(window.webpackJsonp=window.webpackJsonp||[]).push([[3,5],{"+0G6":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";var re={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function sprintf(key){return sprintf_format(sprintf_parse(key),arguments)}function vsprintf(fmt,argv){return sprintf.apply(null,[fmt].concat(argv||[]))}function sprintf_format(parse_tree,argv){var arg,i,k,ph,pad,pad_character,pad_length,is_positive,sign,cursor=1,tree_length=parse_tree.length,output="";for(i=0;i<tree_length;i++)if("string"==typeof parse_tree[i])output+=parse_tree[i];else if("object"==typeof parse_tree[i]){if((ph=parse_tree[i]).keys)for(arg=argv[cursor],k=0;k<ph.keys.length;k++){if(null==arg)throw new Error(sprintf('[sprintf] Cannot access property "%s" of undefined value "%s"',ph.keys[k],ph.keys[k-1]));arg=arg[ph.keys[k]]}else arg=ph.param_no?argv[ph.param_no]:argv[cursor++];if(re.not_type.test(ph.type)&&re.not_primitive.test(ph.type)&&arg instanceof Function&&(arg=arg()),re.numeric_arg.test(ph.type)&&"number"!=typeof arg&&isNaN(arg))throw new TypeError(sprintf("[sprintf] expecting number but found %T",arg));switch(re.number.test(ph.type)&&(is_positive=arg>=0),ph.type){case"b":arg=parseInt(arg,10).toString(2);break;case"c":arg=String.fromCharCode(parseInt(arg,10));break;case"d":case"i":arg=parseInt(arg,10);break;case"j":arg=JSON.stringify(arg,null,ph.width?parseInt(ph.width):0);break;case"e":arg=ph.precision?parseFloat(arg).toExponential(ph.precision):parseFloat(arg).toExponential();break;case"f":arg=ph.precision?parseFloat(arg).toFixed(ph.precision):parseFloat(arg);break;case"g":arg=ph.precision?String(Number(arg.toPrecision(ph.precision))):parseFloat(arg);break;case"o":arg=(parseInt(arg,10)>>>0).toString(8);break;case"s":arg=String(arg),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"t":arg=String(!!arg),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"T":arg=Object.prototype.toString.call(arg).slice(8,-1).toLowerCase(),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"u":arg=parseInt(arg,10)>>>0;break;case"v":arg=arg.valueOf(),arg=ph.precision?arg.substring(0,ph.precision):arg;break;case"x":arg=(parseInt(arg,10)>>>0).toString(16);break;case"X":arg=(parseInt(arg,10)>>>0).toString(16).toUpperCase()}re.json.test(ph.type)?output+=arg:(!re.number.test(ph.type)||is_positive&&!ph.sign?sign="":(sign=is_positive?"+":"-",arg=arg.toString().replace(re.sign,"")),pad_character=ph.pad_char?"0"===ph.pad_char?"0":ph.pad_char.charAt(1):" ",pad_length=ph.width-(sign+arg).length,pad=ph.width&&pad_length>0?pad_character.repeat(pad_length):"",output+=ph.align?sign+arg+pad:"0"===pad_character?sign+pad+arg:pad+sign+arg)}return output}var sprintf_cache=Object.create(null);function sprintf_parse(fmt){if(sprintf_cache[fmt])return sprintf_cache[fmt];for(var match,_fmt=fmt,parse_tree=[],arg_names=0;_fmt;){if(null!==(match=re.text.exec(_fmt)))parse_tree.push(match[0]);else if(null!==(match=re.modulo.exec(_fmt)))parse_tree.push("%");else{if(null===(match=re.placeholder.exec(_fmt)))throw new SyntaxError("[sprintf] unexpected placeholder");if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if(null===(field_match=re.key.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(field_list.push(field_match[1]);""!==(replacement_field=replacement_field.substring(field_match[0].length));)if(null!==(field_match=re.key_access.exec(replacement_field)))field_list.push(field_match[1]);else{if(null===(field_match=re.index_access.exec(replacement_field)))throw new SyntaxError("[sprintf] failed to parse named argument key");field_list.push(field_match[1])}match[2]=field_list}else arg_names|=2;if(3===arg_names)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");parse_tree.push({placeholder:match[0],param_no:match[1],keys:match[2],sign:match[3],pad_char:match[4],align:match[5],width:match[6],precision:match[7],type:match[8]})}_fmt=_fmt.substring(match[0].length)}return sprintf_cache[fmt]=parse_tree}exports.sprintf=sprintf,exports.vsprintf=vsprintf,"undefined"!=typeof window&&(window.sprintf=sprintf,window.vsprintf=vsprintf,void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return{sprintf:sprintf,vsprintf:vsprintf}}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}()},"+rAh":function(module,__webpack_exports__,__webpack_require__){"use strict";function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return Feedback}));var Feedback=function(_Message){var subClass,superClass;function Feedback(){return _Message.apply(this,arguments)||this}return superClass=_Message,(subClass=Feedback).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),Feedback}(__webpack_require__("PwMq").a)},"+t7l":function(module,exports){function NBASearchState(node){this.node=node,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}module.exports=function(){var currentInCache=0,nodeCache=[];return{createNewState:function(node){var cached=nodeCache[currentInCache];cached?(cached.node=node,cached.p1=null,cached.p2=null,cached.closed=!1,cached.g1=Number.POSITIVE_INFINITY,cached.g2=Number.POSITIVE_INFINITY,cached.f1=Number.POSITIVE_INFINITY,cached.f2=Number.POSITIVE_INFINITY,cached.h1=-1,cached.h2=-1):(cached=new NBASearchState(node),nodeCache[currentInCache]=cached);return currentInCache++,cached},reset:function(){currentInCache=0}}}},"/0SF":function(module,exports,__webpack_require__){"use strict";var shim,nullObject,polyProps,desc,create=Object.create;__webpack_require__("ZDcT")()||(shim=__webpack_require__("B8jV")),module.exports=shim?1!==shim.level?create:(nullObject={},polyProps={},desc={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(name){polyProps[name]="__proto__"!==name?desc:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(nullObject,polyProps),Object.defineProperty(shim,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:nullObject}),function(prototype,props){return create(null===prototype?nullObject:prototype,props)}):create},"/Vgd":function(module,exports,__webpack_require__){"use strict";module.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},"/b8Q":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return EmotionMeterView}));__webpack_require__("exX3"),__webpack_require__("li+S");var lib_tracer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ZypF"),constants_node__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("RIFn"),_channels_player__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("9fCi"),_stores_player__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("x3EI"),_templates_emotion_meter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("JtJh"),_templates_emotion_meter__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_templates_emotion_meter__WEBPACK_IMPORTED_MODULE_7__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var EmotionMeterView=function(_Marionette$View){var subClass,superClass;function EmotionMeterView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=EmotionMeterView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=EmotionMeterView.prototype;return _proto.initialize=function(){this.listenTo(_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project,"change:disable_emotion_meter",this.onDisableEmotionMeter),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_4__.a,"current:scene",this.onModelChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_4__.a,"reset",this.onReset),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b,"change:width",this.setThumbWidth)},_proto.className=function(){return"player-emometer player-container"},_proto.ui=function(){return{emotion:".js-emotion",thumb:".js-thumb"}},_proto.events=function(){return{"mouseenter @ui.emotion":"showEmotionTip"}},_proto.getTemplate=function(){return _templates_emotion_meter__WEBPACK_IMPORTED_MODULE_7___default.a},_proto.templateContext=function(){return{emotions:_(constants_node__WEBPACK_IMPORTED_MODULE_3__.c).map((function(emotion){return{emotion:emotion,name:_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.translations(emotion)}}))}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.onReset()},_proto.onAttach=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.toggleEmotionMeter()},_proto.toggleEmotionMeter=function(){_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.get("disable_emotion_meter")?this.$el.css({display:"none"}):(this.$el.css({display:""}),this.setThumbWidth())},_proto.onModelChange=function(model){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.scene=model;var character=this.scene.getCharacter(),visible=!!character;this.visible!==visible&&(this.$el.velocity("stop",!0).velocity({opacity:visible?1:0},{visibility:visible?"visible":"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration}),this.visible=visible),character&&this.setEmotionClass()},_proto.setEmotionClass=function(){this.ui.emotion.removeClass(constants_node__WEBPACK_IMPORTED_MODULE_3__.c.join(" ")).addClass(this.scene.getEmotion())},_proto.setThumbWidth=function(){this.ui.thumb.css({width:this.ui.emotion.innerWidth()})},_proto.onDisableEmotionMeter=function(){this.toggleEmotionMeter()},_proto.onReset=function(){this.visible=!1,this.$el.css({visibility:"hidden",opacity:0}).velocity({opacity:0},{duration:0})},EmotionMeterView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},"/buv":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){return'<div class="image-container js-type-container"></div>'},3:function(container,depth0,helpers,partials,data){return'<div class="pdf-container js-type-container"></div>'},5:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="video-container js-type-container"><video class="js-player"poster="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"thumb_url")||(null!=depth0?lookupProperty(depth0,"thumb_url"):depth0))?helper:alias2)?helper.call(alias1,{name:"thumb_url",hash:{},data:data,loc:{start:{line:1,column:393},end:{line:1,column:406}}}):helper)+'"width="100%"height="100%"playsinline="true"controls="true"><source src="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"url")||(null!=depth0?lookupProperty(depth0,"url"):depth0))?helper:alias2)?helper.call(alias1,{name:"url",hash:{},data:data,loc:{start:{line:1,column:479},end:{line:1,column:486}}}):helper)+'"type="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content_type")||(null!=depth0?lookupProperty(depth0,"content_type"):depth0))?helper:alias2)?helper.call(alias1,{name:"content_type",hash:{},data:data,loc:{start:{line:1,column:493},end:{line:1,column:509}}}):helper)+'"></video></div>'},7:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="video-container js-type-container"><div class="plyr__video-embed"><div class="js-player"data-plyr-provider="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"type")||(null!=depth0?lookupProperty(depth0,"type"):depth0))?helper:alias2)?helper.call(alias1,{name:"type",hash:{},data:data,loc:{start:{line:1,column:669},end:{line:1,column:677}}}):helper)+'"data-plyr-embed-id="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"video_id")||(null!=depth0?lookupProperty(depth0,"video_id"):depth0))?helper:alias2)?helper.call(alias1,{name:"video_id",hash:{},data:data,loc:{start:{line:1,column:698},end:{line:1,column:710}}}):helper)+'"></div></div></div>'},9:function(container,depth0,helpers,partials,data){var obj,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<small class="size">'+container.escapeExpression((obj=__webpack_require__("vy9o"),obj&&(obj.__esModule?obj.default:obj)).call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"size"):depth0,{name:"human_filesize",hash:{},data:data,loc:{start:{line:1,column:837},end:{line:1,column:860}}}))+"</small>"},11:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{},lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<small class="size">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"youtube"):depth0,{name:"if",hash:{},fn:container.program(12,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:912},end:{line:1,column:941}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"vimeo"):depth0,{name:"if",hash:{},fn:container.program(14,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:942},end:{line:1,column:967}}}))?stack1:"")+"</small>"},12:function(container,depth0,helpers,partials,data){return"YouTube"},14:function(container,depth0,helpers,partials,data){return"Vimeo"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<a href="javascript:;"class="js-close close color-inherit"><span class="fa fa-close fa-2x fa-fw"></span></a><div class="attachment-preview player-container">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"image"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:157},end:{line:1,column:230}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"pdf"):depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:231},end:{line:1,column:300}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"video"):depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:301},end:{line:1,column:532}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"video_id"):depth0,{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:533},end:{line:1,column:737}}}))?stack1:"")+'</div><header><div class="name"><strong>'+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:777},end:{line:1,column:790}}}):helper)?stack1:"")+"</strong></div>"+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"size"):depth0,{name:"if",hash:{},fn:container.program(9,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:805},end:{line:1,column:875}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"video_id"):depth0,{name:"if",hash:{},fn:container.program(11,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:876},end:{line:1,column:982}}}))?stack1:"")+'</header><footer><a href="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"url")||(null!=depth0?lookupProperty(depth0,"url"):depth0))?helper:alias2)?helper.call(alias1,{name:"url",hash:{},data:data,loc:{start:{line:1,column:1008},end:{line:1,column:1015}}}):helper)+'"class="color-inherit"target="_blank">Open in New Tab</a></footer>'},useData:!0})},"/gkB":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return COLORS}));var COLORS=["#cc3232","#cc3289","#a332cc","#5b32cc","#324ecc","#3295cc","#2ebaa1","#29a659","#d2b211","#d58317","#d56017"]},"0I07":function(module,exports){function NodeHeap(data,options){if(!(this instanceof NodeHeap))return new NodeHeap(data,options);if(Array.isArray(data)||(options=data,data=[]),options=options||{},this.data=data||[],this.length=this.data.length,this.compare=options.compare||defaultCompare,this.setNodeId=options.setNodeId||noop,this.length>0)for(var i=this.length>>1;i>=0;i--)this._down(i);if(options.setNodeId)for(i=0;i<this.length;++i)this.setNodeId(this.data[i],i)}function noop(){}function defaultCompare(a,b){return a-b}module.exports=NodeHeap,NodeHeap.prototype={push:function(item){this.data.push(item),this.setNodeId(item,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var top=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),top}},peek:function(){return this.data[0]},updateItem:function(pos){this._down(pos),this._up(pos)},_up:function(pos){for(var data=this.data,compare=this.compare,setNodeId=this.setNodeId,item=data[pos];pos>0;){var parent=pos-1>>1,current=data[parent];if(compare(item,current)>=0)break;data[pos]=current,setNodeId(current,pos),pos=parent}data[pos]=item,setNodeId(item,pos)},_down:function(pos){for(var data=this.data,compare=this.compare,halfLength=this.length>>1,item=data[pos],setNodeId=this.setNodeId;pos<halfLength;){var left=1+(pos<<1),right=left+1,best=data[left];if(right<this.length&&compare(data[right],best)<0&&(left=right,best=data[right]),compare(best,item)>=0)break;data[pos]=best,setNodeId(best,pos),pos=left}data[pos]=item,setNodeId(item,pos)}}},"0SDo":function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!!value&&("symbol"==typeof value||!!value.constructor&&("Symbol"===value.constructor.name&&"Symbol"===value[value.constructor.toStringTag]))}},"0u7f":function(module,exports,__webpack_require__){module.exports=function(graph,options){var oriented=(options=options||{}).oriented,heuristic=options.heuristic;heuristic||(heuristic=defaultSettings.heuristic);var distance=options.distance;distance||(distance=defaultSettings.distance);var pool=makeSearchStatePool();return{find:function(fromId,toId){var from=graph.getNode(fromId);if(!from)throw new Error("fromId is not defined in this graph: "+fromId);var to=graph.getNode(toId);if(!to)throw new Error("toId is not defined in this graph: "+toId);if(from===to)return[from];pool.reset();var callVisitor=oriented?orientedVisitor:nonOrientedVisitor,nodeState=new Map,openSetFrom=new NodeHeap({compare:defaultSettings.compareFScore,setNodeId:defaultSettings.setHeapIndex}),openSetTo=new NodeHeap({compare:defaultSettings.compareFScore,setNodeId:defaultSettings.setHeapIndex}),startNode=pool.createNewState(from);nodeState.set(fromId,startNode),startNode.fScore=heuristic(from,to),startNode.distanceToSource=0,openSetFrom.push(startNode),startNode.open=1;var endNode=pool.createNewState(to);endNode.fScore=heuristic(to,from),endNode.distanceToSource=0,openSetTo.push(endNode),endNode.open=2;var minFrom,minTo,lMin=Number.POSITIVE_INFINITY,currentSet=openSetFrom,currentOpener=1;for(;openSetFrom.length>0&&openSetTo.length>0;){openSetFrom.length<openSetTo.length?(currentOpener=1,currentSet=openSetFrom):(currentOpener=2,currentSet=openSetTo);var current=currentSet.pop();if(current.closed=!0,!(current.distanceToSource>lMin)&&(graph.forEachLinkedNode(current.node.id,callVisitor),minFrom&&minTo))return reconstructBiDirectionalPath(minFrom,minTo)}return NO_PATH;function nonOrientedVisitor(otherNode,link){return visitNode(otherNode,link,current)}function orientedVisitor(otherNode,link){if(1===currentOpener){if(link.fromId===current.node.id)return visitNode(otherNode,link,current)}else if(2===currentOpener&&link.toId===current.node.id)return visitNode(otherNode,link,current)}function canExit(currentNode){var opener=currentNode.open;return!(!opener||opener===currentOpener)}function reconstructBiDirectionalPath(a,b){for(var pathOfNodes=[],aParent=a;aParent;)pathOfNodes.push(aParent.node),aParent=aParent.parent;for(var bParent=b;bParent;)pathOfNodes.unshift(bParent.node),bParent=bParent.parent;return pathOfNodes}function visitNode(otherNode,link,cameFrom){var otherSearchState=nodeState.get(otherNode.id);if(otherSearchState||(otherSearchState=pool.createNewState(otherNode),nodeState.set(otherNode.id,otherSearchState)),!otherSearchState.closed)if(canExit(otherSearchState,cameFrom)){var potentialLMin=otherSearchState.distanceToSource+cameFrom.distanceToSource;potentialLMin<lMin&&(minFrom=otherSearchState,minTo=cameFrom,lMin=potentialLMin)}else{var tentativeDistance=cameFrom.distanceToSource+distance(otherSearchState.node,cameFrom.node,link);if(!(tentativeDistance>=otherSearchState.distanceToSource)){var target=1===currentOpener?to:from,newFScore=tentativeDistance+heuristic(otherSearchState.node,target);newFScore>=lMin||(otherSearchState.fScore=newFScore,0===otherSearchState.open&&(currentSet.push(otherSearchState),currentSet.updateItem(otherSearchState.heapIndex),otherSearchState.open=currentOpener),otherSearchState.parent=cameFrom,otherSearchState.distanceToSource=tentativeDistance)}}}}}};var NodeHeap=__webpack_require__("0I07"),makeSearchStatePool=__webpack_require__("ye8D"),heuristics=__webpack_require__("i4hu"),defaultSettings=__webpack_require__("l3Sp"),NO_PATH=defaultSettings.NO_PATH;module.exports.l2=heuristics.l2,module.exports.l1=heuristics.l1},"14L8":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _util=__webpack_require__("8Aw6");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _default=function(){function Slider(container,_ref){var _this=this,_onStart=_ref.onStart,_onMove=_ref.onMove,onEnd=_ref.onEnd,isSliderEnabled=_ref.isSliderEnabled;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Slider),_defineProperty(this,"startHandler",(function(eStart){if(_this.isSliderEnabled()){_this.removeListeners(),eStart.preventDefault();var moveHandler=_this.moveHandler,endHandler=_this.endHandler,onStart=_this.onStart,isTouchEvent="touchstart"===eStart.type;_this.touchMoveEvent=isTouchEvent?"touchmove":"mousemove",_this.touchEndEvent=isTouchEvent?"touchend":"mouseup",_this.sx=isTouchEvent?eStart.touches[0].clientX:eStart.clientX,_this.sy=isTouchEvent?eStart.touches[0].clientY:eStart.clientY,onStart(eStart,{x:_this.sx,y:_this.sy}),document.addEventListener(_this.touchMoveEvent,moveHandler),document.addEventListener(_this.touchEndEvent,endHandler),document.addEventListener("contextmenu",endHandler)}})),_defineProperty(this,"moveHandler",(function(eMove){if(_this.isSliderEnabled()){eMove.preventDefault();var sx=_this.sx,sy=_this.sy,onMove=_this.onMove,isTouchEvent="touchmove"===_this.touchMoveEvent,mx=isTouchEvent?eMove.touches[0].clientX:eMove.clientX,my=isTouchEvent?eMove.touches[0].clientY:eMove.clientY;onMove(eMove,{dx:mx-sx,dy:my-sy,mx:mx,my:my})}})),_defineProperty(this,"endHandler",(function(){_this.isSliderEnabled()&&(_this.removeListeners(),_this.onEnd())})),this.container=container,this.isSliderEnabled=isSliderEnabled,this.onStart=_onStart||_util.noop,this.onMove=_onMove||_util.noop,this.onEnd=onEnd||_util.noop}var Constructor,protoProps,staticProps;return Constructor=Slider,(protoProps=[{key:"removeListeners",value:function(){this.touchMoveEvent&&(document.removeEventListener(this.touchMoveEvent,this.moveHandler),document.removeEventListener(this.touchEndEvent,this.endHandler),document.removeEventListener("contextmenu",this.endHandler))}},{key:"init",value:function(){var _this2=this;["touchstart","mousedown"].forEach((function(evt){_this2.container.addEventListener(evt,_this2.startHandler)}))}},{key:"destroy",value:function(){var _this3=this;["touchstart","mousedown"].forEach((function(evt){_this3.container.removeEventListener(evt,_this3.startHandler)})),this.removeListeners()}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Slider}();exports.default=_default},"1G0L":function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("pocN")()?Object.assign:__webpack_require__("v5u5")},"1x26":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return User}));var User=function(_Backbone$Model){var subClass,superClass;function User(){return _Backbone$Model.apply(this,arguments)||this}return superClass=_Backbone$Model,(subClass=User).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),User}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},"25es":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_,Backbone){__webpack_exports__.a={Events:_.extend({},Backbone.Events),Messages:_.extend({},Backbone.Events),postMessage:function(type,data){void 0===data&&(data={}),data.playlog&&(data.__DEPRECATION__='"playlog" is changed to "results" and will be removed in future'),this.Messages.trigger(type,{details:data});var message={provider:"branchtrack",type:"branchtrack:"+type,details:data};window!==window.parent?window.parent.postMessage(JSON.stringify(message),"*"):window.postMessage(JSON.stringify(message),"*")}}}).call(this,__webpack_require__("5VhH").default,__webpack_require__("clIx"))},"2DHK":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineEntry}));var TimelineEntry=function(_Backbone$Model){var subClass,superClass;function TimelineEntry(){return _Backbone$Model.apply(this,arguments)||this}return superClass=_Backbone$Model,(subClass=TimelineEntry).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),TimelineEntry.prototype.defaults=function(){return{timeline_visibility:!0}},TimelineEntry}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},"2jbP":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";module.exports?module.exports=factory(__webpack_require__("fUZs"),__webpack_require__("d9R5"),__webpack_require__("r33L")):(__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("fUZs"),__webpack_require__("d9R5"),__webpack_require__("r33L")],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(0,(function(punycode,IPv6,SLD,root){"use strict";var _URI=root&&root.URI;function URI(url,base){var _urlSupplied=arguments.length>=1,_baseSupplied=arguments.length>=2;if(!(this instanceof URI))return _urlSupplied?_baseSupplied?new URI(url,base):new URI(url):new URI;if(void 0===url){if(_urlSupplied)throw new TypeError("undefined is not a valid argument for URI");url="undefined"!=typeof location?location.href+"":""}if(null===url&&_urlSupplied)throw new TypeError("null is not a valid argument for URI");return this.href(url),void 0!==base?this.absoluteTo(base):this}URI.version="1.19.7";var p=URI.prototype,hasOwn=Object.prototype.hasOwnProperty;function escapeRegEx(string){return string.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function getType(value){return void 0===value?"Undefined":String(Object.prototype.toString.call(value)).slice(8,-1)}function isArray(obj){return"Array"===getType(obj)}function filterArrayValues(data,value){var i,length,lookup={};if("RegExp"===getType(value))lookup=null;else if(isArray(value))for(i=0,length=value.length;i<length;i++)lookup[value[i]]=!0;else lookup[value]=!0;for(i=0,length=data.length;i<length;i++){(lookup&&void 0!==lookup[data[i]]||!lookup&&value.test(data[i]))&&(data.splice(i,1),length--,i--)}return data}function arrayContains(list,value){var i,length;if(isArray(value)){for(i=0,length=value.length;i<length;i++)if(!arrayContains(list,value[i]))return!1;return!0}var _type=getType(value);for(i=0,length=list.length;i<length;i++)if("RegExp"===_type){if("string"==typeof list[i]&&list[i].match(value))return!0}else if(list[i]===value)return!0;return!1}function arraysEqual(one,two){if(!isArray(one)||!isArray(two))return!1;if(one.length!==two.length)return!1;one.sort(),two.sort();for(var i=0,l=one.length;i<l;i++)if(one[i]!==two[i])return!1;return!0}function trimSlashes(text){return text.replace(/^\/+|\/+$/g,"")}function escapeForDumbFirefox36(value){return escape(value)}function strictEncodeURIComponent(string){return encodeURIComponent(string).replace(/[!'()*]/g,escapeForDumbFirefox36).replace(/\*/g,"%2A")}URI._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:URI.preventInvalidHostname,duplicateQueryParameters:URI.duplicateQueryParameters,escapeQuerySpace:URI.escapeQuerySpace}},URI.preventInvalidHostname=!1,URI.duplicateQueryParameters=!1,URI.escapeQuerySpace=!0,URI.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,URI.idn_expression=/[^a-z0-9\._-]/i,URI.punycode_expression=/(xn--)/i,URI.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,URI.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,URI.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))/gi,URI.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u201e\u2018\u2019]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},URI.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},URI.hostProtocols=["http","https"],URI.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,URI.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},URI.getDomAttribute=function(node){if(node&&node.nodeName){var nodeName=node.nodeName.toLowerCase();if("input"!==nodeName||"image"===node.type)return URI.domAttributes[nodeName]}},URI.encode=strictEncodeURIComponent,URI.decode=decodeURIComponent,URI.iso8859=function(){URI.encode=escape,URI.decode=unescape},URI.unicode=function(){URI.encode=strictEncodeURIComponent,URI.decode=decodeURIComponent},URI.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},URI.encodeQuery=function(string,escapeQuerySpace){var escaped=URI.encode(string+"");return void 0===escapeQuerySpace&&(escapeQuerySpace=URI.escapeQuerySpace),escapeQuerySpace?escaped.replace(/%20/g,"+"):escaped},URI.decodeQuery=function(string,escapeQuerySpace){string+="",void 0===escapeQuerySpace&&(escapeQuerySpace=URI.escapeQuerySpace);try{return URI.decode(escapeQuerySpace?string.replace(/\+/g,"%20"):string)}catch(e){return string}};var _part,_parts={encode:"encode",decode:"decode"},generateAccessor=function(_group,_part){return function(string){try{return URI[_part](string+"").replace(URI.characters[_group][_part].expression,(function(c){return URI.characters[_group][_part].map[c]}))}catch(e){return string}}};for(_part in _parts)URI[_part+"PathSegment"]=generateAccessor("pathname",_parts[_part]),URI[_part+"UrnPathSegment"]=generateAccessor("urnpath",_parts[_part]);var generateSegmentedPathFunction=function(_sep,_codingFuncName,_innerCodingFuncName){return function(string){var actualCodingFunc;actualCodingFunc=_innerCodingFuncName?function(string){return URI[_codingFuncName](URI[_innerCodingFuncName](string))}:URI[_codingFuncName];for(var segments=(string+"").split(_sep),i=0,length=segments.length;i<length;i++)segments[i]=actualCodingFunc(segments[i]);return segments.join(_sep)}};function generateSimpleAccessor(_part){return function(v,build){return void 0===v?this._parts[_part]||"":(this._parts[_part]=v||null,this.build(!build),this)}}function generatePrefixAccessor(_part,_key){return function(v,build){return void 0===v?this._parts[_part]||"":(null!==v&&(v+="").charAt(0)===_key&&(v=v.substring(1)),this._parts[_part]=v,this.build(!build),this)}}URI.decodePath=generateSegmentedPathFunction("/","decodePathSegment"),URI.decodeUrnPath=generateSegmentedPathFunction(":","decodeUrnPathSegment"),URI.recodePath=generateSegmentedPathFunction("/","encodePathSegment","decode"),URI.recodeUrnPath=generateSegmentedPathFunction(":","encodeUrnPathSegment","decode"),URI.encodeReserved=generateAccessor("reserved","encode"),URI.parse=function(string,parts){var pos;return parts||(parts={preventInvalidHostname:URI.preventInvalidHostname}),(pos=string.indexOf("#"))>-1&&(parts.fragment=string.substring(pos+1)||null,string=string.substring(0,pos)),(pos=string.indexOf("?"))>-1&&(parts.query=string.substring(pos+1)||null,string=string.substring(0,pos)),"//"===(string=string.replace(/^(https?|ftp|wss?)?:[/\\]*/,"$1://")).substring(0,2)?(parts.protocol=null,string=string.substring(2),string=URI.parseAuthority(string,parts)):(pos=string.indexOf(":"))>-1&&(parts.protocol=string.substring(0,pos)||null,parts.protocol&&!parts.protocol.match(URI.protocol_expression)?parts.protocol=void 0:"//"===string.substring(pos+1,pos+3).replace(/\\/g,"/")?(string=string.substring(pos+3),string=URI.parseAuthority(string,parts)):(string=string.substring(pos+1),parts.urn=!0)),parts.path=string,parts},URI.parseHost=function(string,parts){string||(string="");var bracketPos,t,pos=(string=string.replace(/\\/g,"/")).indexOf("/");if(-1===pos&&(pos=string.length),"["===string.charAt(0))bracketPos=string.indexOf("]"),parts.hostname=string.substring(1,bracketPos)||null,parts.port=string.substring(bracketPos+2,pos)||null,"/"===parts.port&&(parts.port=null);else{var firstColon=string.indexOf(":"),firstSlash=string.indexOf("/"),nextColon=string.indexOf(":",firstColon+1);-1!==nextColon&&(-1===firstSlash||nextColon<firstSlash)?(parts.hostname=string.substring(0,pos)||null,parts.port=null):(t=string.substring(0,pos).split(":"),parts.hostname=t[0]||null,parts.port=t[1]||null)}return parts.hostname&&"/"!==string.substring(pos).charAt(0)&&(pos++,string="/"+string),parts.preventInvalidHostname&&URI.ensureValidHostname(parts.hostname,parts.protocol),parts.port&&URI.ensureValidPort(parts.port),string.substring(pos)||"/"},URI.parseAuthority=function(string,parts){return string=URI.parseUserinfo(string,parts),URI.parseHost(string,parts)},URI.parseUserinfo=function(string,parts){var _string=string;-1!==string.indexOf("\\")&&(string=string.replace(/\\/g,"/"));var t,firstSlash=string.indexOf("/"),pos=string.lastIndexOf("@",firstSlash>-1?firstSlash:string.length-1);return pos>-1&&(-1===firstSlash||pos<firstSlash)?(t=string.substring(0,pos).split(":"),parts.username=t[0]?URI.decode(t[0]):null,t.shift(),parts.password=t[0]?URI.decode(t.join(":")):null,string=_string.substring(pos+1)):(parts.username=null,parts.password=null),string},URI.parseQuery=function(string,escapeQuerySpace){if(!string)return{};if(!(string=string.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var v,name,value,items={},splits=string.split("&"),length=splits.length,i=0;i<length;i++)v=splits[i].split("="),name=URI.decodeQuery(v.shift(),escapeQuerySpace),value=v.length?URI.decodeQuery(v.join("="),escapeQuerySpace):null,"__proto__"!==name&&(hasOwn.call(items,name)?("string"!=typeof items[name]&&null!==items[name]||(items[name]=[items[name]]),items[name].push(value)):items[name]=value);return items},URI.build=function(parts){var t="",requireAbsolutePath=!1;return parts.protocol&&(t+=parts.protocol+":"),parts.urn||!t&&!parts.hostname||(t+="//",requireAbsolutePath=!0),t+=URI.buildAuthority(parts)||"","string"==typeof parts.path&&("/"!==parts.path.charAt(0)&&requireAbsolutePath&&(t+="/"),t+=parts.path),"string"==typeof parts.query&&parts.query&&(t+="?"+parts.query),"string"==typeof parts.fragment&&parts.fragment&&(t+="#"+parts.fragment),t},URI.buildHost=function(parts){var t="";return parts.hostname?(URI.ip6_expression.test(parts.hostname)?t+="["+parts.hostname+"]":t+=parts.hostname,parts.port&&(t+=":"+parts.port),t):""},URI.buildAuthority=function(parts){return URI.buildUserinfo(parts)+URI.buildHost(parts)},URI.buildUserinfo=function(parts){var t="";return parts.username&&(t+=URI.encode(parts.username)),parts.password&&(t+=":"+URI.encode(parts.password)),t&&(t+="@"),t},URI.buildQuery=function(data,duplicateQueryParameters,escapeQuerySpace){var unique,key,i,length,t="";for(key in data)if("__proto__"!==key&&hasOwn.call(data,key))if(isArray(data[key]))for(unique={},i=0,length=data[key].length;i<length;i++)void 0!==data[key][i]&&void 0===unique[data[key][i]+""]&&(t+="&"+URI.buildQueryParameter(key,data[key][i],escapeQuerySpace),!0!==duplicateQueryParameters&&(unique[data[key][i]+""]=!0));else void 0!==data[key]&&(t+="&"+URI.buildQueryParameter(key,data[key],escapeQuerySpace));return t.substring(1)},URI.buildQueryParameter=function(name,value,escapeQuerySpace){return URI.encodeQuery(name,escapeQuerySpace)+(null!==value?"="+URI.encodeQuery(value,escapeQuerySpace):"")},URI.addQuery=function(data,name,value){if("object"==typeof name)for(var key in name)hasOwn.call(name,key)&&URI.addQuery(data,key,name[key]);else{if("string"!=typeof name)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===data[name])return void(data[name]=value);"string"==typeof data[name]&&(data[name]=[data[name]]),isArray(value)||(value=[value]),data[name]=(data[name]||[]).concat(value)}},URI.setQuery=function(data,name,value){if("object"==typeof name)for(var key in name)hasOwn.call(name,key)&&URI.setQuery(data,key,name[key]);else{if("string"!=typeof name)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");data[name]=void 0===value?null:value}},URI.removeQuery=function(data,name,value){var i,length,key;if(isArray(name))for(i=0,length=name.length;i<length;i++)data[name[i]]=void 0;else if("RegExp"===getType(name))for(key in data)name.test(key)&&(data[key]=void 0);else if("object"==typeof name)for(key in name)hasOwn.call(name,key)&&URI.removeQuery(data,key,name[key]);else{if("string"!=typeof name)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==value?"RegExp"===getType(value)?!isArray(data[name])&&value.test(data[name])?data[name]=void 0:data[name]=filterArrayValues(data[name],value):data[name]!==String(value)||isArray(value)&&1!==value.length?isArray(data[name])&&(data[name]=filterArrayValues(data[name],value)):data[name]=void 0:data[name]=void 0}},URI.hasQuery=function(data,name,value,withinArray){switch(getType(name)){case"String":break;case"RegExp":for(var key in data)if(hasOwn.call(data,key)&&name.test(key)&&(void 0===value||URI.hasQuery(data,key,value)))return!0;return!1;case"Object":for(var _key in name)if(hasOwn.call(name,_key)&&!URI.hasQuery(data,_key,name[_key]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(getType(value)){case"Undefined":return name in data;case"Boolean":return value===Boolean(isArray(data[name])?data[name].length:data[name]);case"Function":return!!value(data[name],name,data);case"Array":return!!isArray(data[name])&&(withinArray?arrayContains:arraysEqual)(data[name],value);case"RegExp":return isArray(data[name])?!!withinArray&&arrayContains(data[name],value):Boolean(data[name]&&data[name].match(value));case"Number":value=String(value);case"String":return isArray(data[name])?!!withinArray&&arrayContains(data[name],value):data[name]===value;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},URI.joinPaths=function(){for(var input=[],segments=[],nonEmptySegments=0,i=0;i<arguments.length;i++){var url=new URI(arguments[i]);input.push(url);for(var _segments=url.segment(),s=0;s<_segments.length;s++)"string"==typeof _segments[s]&&segments.push(_segments[s]),_segments[s]&&nonEmptySegments++}if(!segments.length||!nonEmptySegments)return new URI("");var uri=new URI("").segment(segments);return""!==input[0].path()&&"/"!==input[0].path().slice(0,1)||uri.path("/"+uri.path()),uri.normalize()},URI.commonPath=function(one,two){var pos,length=Math.min(one.length,two.length);for(pos=0;pos<length;pos++)if(one.charAt(pos)!==two.charAt(pos)){pos--;break}return pos<1?one.charAt(0)===two.charAt(0)&&"/"===one.charAt(0)?"/":"":("/"===one.charAt(pos)&&"/"===two.charAt(pos)||(pos=one.substring(0,pos).lastIndexOf("/")),one.substring(0,pos+1))},URI.withinString=function(string,callback,options){options||(options={});var _start=options.start||URI.findUri.start,_end=options.end||URI.findUri.end,_trim=options.trim||URI.findUri.trim,_parens=options.parens||URI.findUri.parens,_attributeOpen=/[a-z0-9-]=["']?$/i;for(_start.lastIndex=0;;){var match=_start.exec(string);if(!match)break;var start=match.index;if(options.ignoreHtml){var attributeOpen=string.slice(Math.max(start-3,0),start);if(attributeOpen&&_attributeOpen.test(attributeOpen))continue}for(var end=start+string.slice(start).search(_end),slice=string.slice(start,end),parensEnd=-1;;){var parensMatch=_parens.exec(slice);if(!parensMatch)break;var parensMatchEnd=parensMatch.index+parensMatch[0].length;parensEnd=Math.max(parensEnd,parensMatchEnd)}if(!((slice=parensEnd>-1?slice.slice(0,parensEnd)+slice.slice(parensEnd).replace(_trim,""):slice.replace(_trim,"")).length<=match[0].length||options.ignore&&options.ignore.test(slice))){var result=callback(slice,start,end=start+slice.length,string);void 0!==result?(result=String(result),string=string.slice(0,start)+result+string.slice(end),_start.lastIndex=start+result.length):_start.lastIndex=end}}return _start.lastIndex=0,string},URI.ensureValidHostname=function(v,protocol){var hasHostname=!!v,rejectEmptyHostname=!1;if(!!protocol&&(rejectEmptyHostname=arrayContains(URI.hostProtocols,protocol)),rejectEmptyHostname&&!hasHostname)throw new TypeError("Hostname cannot be empty, if protocol is "+protocol);if(v&&v.match(URI.invalid_hostname_characters)){if(!punycode)throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(punycode.toASCII(v).match(URI.invalid_hostname_characters))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-:_]')}},URI.ensureValidPort=function(v){if(v){var port=Number(v);if(!(/^[0-9]+$/.test(port)&&port>0&&port<65536))throw new TypeError('Port "'+v+'" is not a valid port')}},URI.noConflict=function(removeAll){if(removeAll){var unconflicted={URI:this.noConflict()};return root.URITemplate&&"function"==typeof root.URITemplate.noConflict&&(unconflicted.URITemplate=root.URITemplate.noConflict()),root.IPv6&&"function"==typeof root.IPv6.noConflict&&(unconflicted.IPv6=root.IPv6.noConflict()),root.SecondLevelDomains&&"function"==typeof root.SecondLevelDomains.noConflict&&(unconflicted.SecondLevelDomains=root.SecondLevelDomains.noConflict()),unconflicted}return root.URI===this&&(root.URI=_URI),this},p.build=function(deferBuild){return!0===deferBuild?this._deferred_build=!0:(void 0===deferBuild||this._deferred_build)&&(this._string=URI.build(this._parts),this._deferred_build=!1),this},p.clone=function(){return new URI(this)},p.valueOf=p.toString=function(){return this.build(!1)._string},p.protocol=generateSimpleAccessor("protocol"),p.username=generateSimpleAccessor("username"),p.password=generateSimpleAccessor("password"),p.hostname=generateSimpleAccessor("hostname"),p.port=generateSimpleAccessor("port"),p.query=generatePrefixAccessor("query","?"),p.fragment=generatePrefixAccessor("fragment","#"),p.search=function(v,build){var t=this.query(v,build);return"string"==typeof t&&t.length?"?"+t:t},p.hash=function(v,build){var t=this.fragment(v,build);return"string"==typeof t&&t.length?"#"+t:t},p.pathname=function(v,build){if(void 0===v||!0===v){var res=this._parts.path||(this._parts.hostname?"/":"");return v?(this._parts.urn?URI.decodeUrnPath:URI.decodePath)(res):res}return this._parts.urn?this._parts.path=v?URI.recodeUrnPath(v):"":this._parts.path=v?URI.recodePath(v):"/",this.build(!build),this},p.path=p.pathname,p.href=function(href,build){var key;if(void 0===href)return this.toString();this._string="",this._parts=URI._parts();var _URI=href instanceof URI,_object="object"==typeof href&&(href.hostname||href.path||href.pathname);href.nodeName&&(href=href[URI.getDomAttribute(href)]||"",_object=!1);if(!_URI&&_object&&void 0!==href.pathname&&(href=href.toString()),"string"==typeof href||href instanceof String)this._parts=URI.parse(String(href),this._parts);else{if(!_URI&&!_object)throw new TypeError("invalid input");var src=_URI?href._parts:href;for(key in src)"query"!==key&&hasOwn.call(this._parts,key)&&(this._parts[key]=src[key]);src.query&&this.query(src.query,!1)}return this.build(!build),this},p.is=function(what){var ip=!1,ip4=!1,ip6=!1,name=!1,sld=!1,idn=!1,punycode=!1,relative=!this._parts.urn;switch(this._parts.hostname&&(relative=!1,ip4=URI.ip4_expression.test(this._parts.hostname),ip6=URI.ip6_expression.test(this._parts.hostname),sld=(name=!(ip=ip4||ip6))&&SLD&&SLD.has(this._parts.hostname),idn=name&&URI.idn_expression.test(this._parts.hostname),punycode=name&&URI.punycode_expression.test(this._parts.hostname)),what.toLowerCase()){case"relative":return relative;case"absolute":return!relative;case"domain":case"name":return name;case"sld":return sld;case"ip":return ip;case"ip4":case"ipv4":case"inet4":return ip4;case"ip6":case"ipv6":case"inet6":return ip6;case"idn":return idn;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return punycode}return null};var _protocol=p.protocol,_port=p.port,_hostname=p.hostname;p.protocol=function(v,build){if(v&&!(v=v.replace(/:(\/\/)?$/,"")).match(URI.protocol_expression))throw new TypeError('Protocol "'+v+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return _protocol.call(this,v,build)},p.scheme=p.protocol,p.port=function(v,build){return this._parts.urn?void 0===v?"":this:(void 0!==v&&(0===v&&(v=null),v&&(":"===(v+="").charAt(0)&&(v=v.substring(1)),URI.ensureValidPort(v))),_port.call(this,v,build))},p.hostname=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0!==v){var x={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==URI.parseHost(v,x))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');v=x.hostname,this._parts.preventInvalidHostname&&URI.ensureValidHostname(v,this._parts.protocol)}return _hostname.call(this,v,build)},p.origin=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v){var protocol=this.protocol();return this.authority()?(protocol?protocol+"://":"")+this.authority():""}var origin=URI(v);return this.protocol(origin.protocol()).authority(origin.authority()).build(!build),this},p.host=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v)return this._parts.hostname?URI.buildHost(this._parts):"";if("/"!==URI.parseHost(v,this._parts))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!build),this},p.authority=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v)return this._parts.hostname?URI.buildAuthority(this._parts):"";if("/"!==URI.parseAuthority(v,this._parts))throw new TypeError('Hostname "'+v+'" contains characters other than [A-Z0-9.-]');return this.build(!build),this},p.userinfo=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v){var t=URI.buildUserinfo(this._parts);return t?t.substring(0,t.length-1):t}return"@"!==v[v.length-1]&&(v+="@"),URI.parseUserinfo(v,this._parts),this.build(!build),this},p.resource=function(v,build){var parts;return void 0===v?this.path()+this.search()+this.hash():(parts=URI.parse(v),this._parts.path=parts.path,this._parts.query=parts.query,this._parts.fragment=parts.fragment,this.build(!build),this)},p.subdomain=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v){if(!this._parts.hostname||this.is("IP"))return"";var end=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,end)||""}var e=this._parts.hostname.length-this.domain().length,sub=this._parts.hostname.substring(0,e),replace=new RegExp("^"+escapeRegEx(sub));if(v&&"."!==v.charAt(v.length-1)&&(v+="."),-1!==v.indexOf(":"))throw new TypeError("Domains cannot contain colons");return v&&URI.ensureValidHostname(v,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(replace,v),this.build(!build),this},p.domain=function(v,build){if(this._parts.urn)return void 0===v?"":this;if("boolean"==typeof v&&(build=v,v=void 0),void 0===v){if(!this._parts.hostname||this.is("IP"))return"";var t=this._parts.hostname.match(/\./g);if(t&&t.length<2)return this._parts.hostname;var end=this._parts.hostname.length-this.tld(build).length-1;return end=this._parts.hostname.lastIndexOf(".",end-1)+1,this._parts.hostname.substring(end)||""}if(!v)throw new TypeError("cannot set domain empty");if(-1!==v.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(URI.ensureValidHostname(v,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=v;else{var replace=new RegExp(escapeRegEx(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(replace,v)}return this.build(!build),this},p.tld=function(v,build){if(this._parts.urn)return void 0===v?"":this;if("boolean"==typeof v&&(build=v,v=void 0),void 0===v){if(!this._parts.hostname||this.is("IP"))return"";var pos=this._parts.hostname.lastIndexOf("."),tld=this._parts.hostname.substring(pos+1);return!0!==build&&SLD&&SLD.list[tld.toLowerCase()]&&SLD.get(this._parts.hostname)||tld}var replace;if(!v)throw new TypeError("cannot set TLD empty");if(v.match(/[^a-zA-Z0-9-]/)){if(!SLD||!SLD.is(v))throw new TypeError('TLD "'+v+'" contains characters other than [A-Z0-9]');replace=new RegExp(escapeRegEx(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(replace,v)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");replace=new RegExp(escapeRegEx(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(replace,v)}return this.build(!build),this},p.directory=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v||!0===v){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var end=this._parts.path.length-this.filename().length-1,res=this._parts.path.substring(0,end)||(this._parts.hostname?"/":"");return v?URI.decodePath(res):res}var e=this._parts.path.length-this.filename().length,directory=this._parts.path.substring(0,e),replace=new RegExp("^"+escapeRegEx(directory));return this.is("relative")||(v||(v="/"),"/"!==v.charAt(0)&&(v="/"+v)),v&&"/"!==v.charAt(v.length-1)&&(v+="/"),v=URI.recodePath(v),this._parts.path=this._parts.path.replace(replace,v),this.build(!build),this},p.filename=function(v,build){if(this._parts.urn)return void 0===v?"":this;if("string"!=typeof v){if(!this._parts.path||"/"===this._parts.path)return"";var pos=this._parts.path.lastIndexOf("/"),res=this._parts.path.substring(pos+1);return v?URI.decodePathSegment(res):res}var mutatedDirectory=!1;"/"===v.charAt(0)&&(v=v.substring(1)),v.match(/\.?\//)&&(mutatedDirectory=!0);var replace=new RegExp(escapeRegEx(this.filename())+"$");return v=URI.recodePath(v),this._parts.path=this._parts.path.replace(replace,v),mutatedDirectory?this.normalizePath(build):this.build(!build),this},p.suffix=function(v,build){if(this._parts.urn)return void 0===v?"":this;if(void 0===v||!0===v){if(!this._parts.path||"/"===this._parts.path)return"";var s,res,filename=this.filename(),pos=filename.lastIndexOf(".");return-1===pos?"":(s=filename.substring(pos+1),res=/^[a-z0-9%]+$/i.test(s)?s:"",v?URI.decodePathSegment(res):res)}"."===v.charAt(0)&&(v=v.substring(1));var replace,suffix=this.suffix();if(suffix)replace=v?new RegExp(escapeRegEx(suffix)+"$"):new RegExp(escapeRegEx("."+suffix)+"$");else{if(!v)return this;this._parts.path+="."+URI.recodePath(v)}return replace&&(v=URI.recodePath(v),this._parts.path=this._parts.path.replace(replace,v)),this.build(!build),this},p.segment=function(segment,v,build){var separator=this._parts.urn?":":"/",path=this.path(),absolute="/"===path.substring(0,1),segments=path.split(separator);if(void 0!==segment&&"number"!=typeof segment&&(build=v,v=segment,segment=void 0),void 0!==segment&&"number"!=typeof segment)throw new Error('Bad segment "'+segment+'", must be 0-based integer');if(absolute&&segments.shift(),segment<0&&(segment=Math.max(segments.length+segment,0)),void 0===v)return void 0===segment?segments:segments[segment];if(null===segment||void 0===segments[segment])if(isArray(v)){segments=[];for(var i=0,l=v.length;i<l;i++)(v[i].length||segments.length&&segments[segments.length-1].length)&&(segments.length&&!segments[segments.length-1].length&&segments.pop(),segments.push(trimSlashes(v[i])))}else(v||"string"==typeof v)&&(v=trimSlashes(v),""===segments[segments.length-1]?segments[segments.length-1]=v:segments.push(v));else v?segments[segment]=trimSlashes(v):segments.splice(segment,1);return absolute&&segments.unshift(""),this.path(segments.join(separator),build)},p.segmentCoded=function(segment,v,build){var segments,i,l;if("number"!=typeof segment&&(build=v,v=segment,segment=void 0),void 0===v){if(isArray(segments=this.segment(segment,v,build)))for(i=0,l=segments.length;i<l;i++)segments[i]=URI.decode(segments[i]);else segments=void 0!==segments?URI.decode(segments):void 0;return segments}if(isArray(v))for(i=0,l=v.length;i<l;i++)v[i]=URI.encode(v[i]);else v="string"==typeof v||v instanceof String?URI.encode(v):v;return this.segment(segment,v,build)};var q=p.query;return p.query=function(v,build){if(!0===v)return URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof v){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace),result=v.call(this,data);return this._parts.query=URI.buildQuery(result||data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!build),this}return void 0!==v&&"string"!=typeof v?(this._parts.query=URI.buildQuery(v,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!build),this):q.call(this,v,build)},p.setQuery=function(name,value,build){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof name||name instanceof String)data[name]=void 0!==value?value:null;else{if("object"!=typeof name)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var key in name)hasOwn.call(name,key)&&(data[key]=name[key])}return this._parts.query=URI.buildQuery(data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof name&&(build=value),this.build(!build),this},p.addQuery=function(name,value,build){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return URI.addQuery(data,name,void 0===value?null:value),this._parts.query=URI.buildQuery(data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof name&&(build=value),this.build(!build),this},p.removeQuery=function(name,value,build){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return URI.removeQuery(data,name,value),this._parts.query=URI.buildQuery(data,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof name&&(build=value),this.build(!build),this},p.hasQuery=function(name,value,withinArray){var data=URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return URI.hasQuery(data,name,value,withinArray)},p.setSearch=p.setQuery,p.addSearch=p.addQuery,p.removeSearch=p.removeQuery,p.hasSearch=p.hasQuery,p.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},p.normalizeProtocol=function(build){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!build)),this},p.normalizeHostname=function(build){return this._parts.hostname&&(this.is("IDN")&&punycode?this._parts.hostname=punycode.toASCII(this._parts.hostname):this.is("IPv6")&&IPv6&&(this._parts.hostname=IPv6.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!build)),this},p.normalizePort=function(build){return"string"==typeof this._parts.protocol&&this._parts.port===URI.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!build)),this},p.normalizePath=function(build){var _was_relative,_path=this._parts.path;if(!_path)return this;if(this._parts.urn)return this._parts.path=URI.recodeUrnPath(this._parts.path),this.build(!build),this;if("/"===this._parts.path)return this;var _parent,_pos,_leadingParents="";for("/"!==(_path=URI.recodePath(_path)).charAt(0)&&(_was_relative=!0,_path="/"+_path),"/.."!==_path.slice(-3)&&"/."!==_path.slice(-2)||(_path+="/"),_path=_path.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),_was_relative&&(_leadingParents=_path.substring(1).match(/^(\.\.\/)+/)||"")&&(_leadingParents=_leadingParents[0]);-1!==(_parent=_path.search(/\/\.\.(\/|$)/));)0!==_parent?(-1===(_pos=_path.substring(0,_parent).lastIndexOf("/"))&&(_pos=_parent),_path=_path.substring(0,_pos)+_path.substring(_parent+3)):_path=_path.substring(3);return _was_relative&&this.is("relative")&&(_path=_leadingParents+_path.substring(1)),this._parts.path=_path,this.build(!build),this},p.normalizePathname=p.normalizePath,p.normalizeQuery=function(build){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(URI.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!build)),this},p.normalizeFragment=function(build){return this._parts.fragment||(this._parts.fragment=null,this.build(!build)),this},p.normalizeSearch=p.normalizeQuery,p.normalizeHash=p.normalizeFragment,p.iso8859=function(){var e=URI.encode,d=URI.decode;URI.encode=escape,URI.decode=decodeURIComponent;try{this.normalize()}finally{URI.encode=e,URI.decode=d}return this},p.unicode=function(){var e=URI.encode,d=URI.decode;URI.encode=strictEncodeURIComponent,URI.decode=unescape;try{this.normalize()}finally{URI.encode=e,URI.decode=d}return this},p.readable=function(){var uri=this.clone();uri.username("").password("").normalize();var t="";if(uri._parts.protocol&&(t+=uri._parts.protocol+"://"),uri._parts.hostname&&(uri.is("punycode")&&punycode?(t+=punycode.toUnicode(uri._parts.hostname),uri._parts.port&&(t+=":"+uri._parts.port)):t+=uri.host()),uri._parts.hostname&&uri._parts.path&&"/"!==uri._parts.path.charAt(0)&&(t+="/"),t+=uri.path(!0),uri._parts.query){for(var q="",i=0,qp=uri._parts.query.split("&"),l=qp.length;i<l;i++){var kv=(qp[i]||"").split("=");q+="&"+URI.decodeQuery(kv[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==kv[1]&&(q+="="+URI.decodeQuery(kv[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}t+="?"+q.substring(1)}return t+=URI.decodeQuery(uri.hash(),!0)},p.absoluteTo=function(base){var basedir,i,p,resolved=this.clone(),properties=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(base instanceof URI||(base=new URI(base)),resolved._parts.protocol)return resolved;if(resolved._parts.protocol=base._parts.protocol,this._parts.hostname)return resolved;for(i=0;p=properties[i];i++)resolved._parts[p]=base._parts[p];return resolved._parts.path?(".."===resolved._parts.path.substring(-2)&&(resolved._parts.path+="/"),"/"!==resolved.path().charAt(0)&&(basedir=(basedir=base.directory())||(0===base.path().indexOf("/")?"/":""),resolved._parts.path=(basedir?basedir+"/":"")+resolved._parts.path,resolved.normalizePath())):(resolved._parts.path=base._parts.path,resolved._parts.query||(resolved._parts.query=base._parts.query)),resolved.build(),resolved},p.relativeTo=function(base){var relativeParts,baseParts,common,relativePath,basePath,relative=this.clone().normalize();if(relative._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(base=new URI(base).normalize(),relativeParts=relative._parts,baseParts=base._parts,relativePath=relative.path(),basePath=base.path(),"/"!==relativePath.charAt(0))throw new Error("URI is already relative");if("/"!==basePath.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(relativeParts.protocol===baseParts.protocol&&(relativeParts.protocol=null),relativeParts.username!==baseParts.username||relativeParts.password!==baseParts.password)return relative.build();if(null!==relativeParts.protocol||null!==relativeParts.username||null!==relativeParts.password)return relative.build();if(relativeParts.hostname!==baseParts.hostname||relativeParts.port!==baseParts.port)return relative.build();if(relativeParts.hostname=null,relativeParts.port=null,relativePath===basePath)return relativeParts.path="",relative.build();if(!(common=URI.commonPath(relativePath,basePath)))return relative.build();var parents=baseParts.path.substring(common.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return relativeParts.path=parents+relativeParts.path.substring(common.length)||"./",relative.build()},p.equals=function(uri){var one_map,two_map,one_query,two_query,key,one=this.clone(),two=new URI(uri),checked={};if(one.normalize(),two.normalize(),one.toString()===two.toString())return!0;if(one_query=one.query(),two_query=two.query(),one.query(""),two.query(""),one.toString()!==two.toString())return!1;if(one_query.length!==two_query.length)return!1;for(key in one_map=URI.parseQuery(one_query,this._parts.escapeQuerySpace),two_map=URI.parseQuery(two_query,this._parts.escapeQuerySpace),one_map)if(hasOwn.call(one_map,key)){if(isArray(one_map[key])){if(!arraysEqual(one_map[key],two_map[key]))return!1}else if(one_map[key]!==two_map[key])return!1;checked[key]=!0}for(key in two_map)if(hasOwn.call(two_map,key)&&!checked[key])return!1;return!0},p.preventInvalidHostname=function(v){return this._parts.preventInvalidHostname=!!v,this},p.duplicateQueryParameters=function(v){return this._parts.duplicateQueryParameters=!!v,this},p.escapeQuerySpace=function(v){return this._parts.escapeQuerySpace=!!v,this},URI}))},"2kBD":function(module,exports){module.exports=function(subject){!function(subject){if(!subject)throw new Error("Eventify cannot use falsy object as events subject");for(var reservedWords=["on","fire","off"],i=0;i<reservedWords.length;++i)if(subject.hasOwnProperty(reservedWords[i]))throw new Error("Subject cannot be eventified, since it already has property '"+reservedWords[i]+"'")}(subject);var eventsStorage=function(subject){var registeredEvents=Object.create(null);return{on:function(eventName,callback,ctx){if("function"!=typeof callback)throw new Error("callback is expected to be a function");var handlers=registeredEvents[eventName];return handlers||(handlers=registeredEvents[eventName]=[]),handlers.push({callback:callback,ctx:ctx}),subject},off:function(eventName,callback){if(void 0===eventName)return registeredEvents=Object.create(null),subject;if(registeredEvents[eventName])if("function"!=typeof callback)delete registeredEvents[eventName];else for(var callbacks=registeredEvents[eventName],i=0;i<callbacks.length;++i)callbacks[i].callback===callback&&callbacks.splice(i,1);return subject},fire:function(eventName){var fireArguments,callbacks=registeredEvents[eventName];if(!callbacks)return subject;arguments.length>1&&(fireArguments=Array.prototype.splice.call(arguments,1));for(var i=0;i<callbacks.length;++i){var callbackInfo=callbacks[i];callbackInfo.callback.apply(callbackInfo.ctx,fireArguments)}return subject}}}(subject);return subject.on=eventsStorage.on,subject.off=eventsStorage.off,subject.fire=eventsStorage.fire,subject}},"2kaT":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<strong class="edge-position theme-highlight-bg-color">'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"order")||(null!=depth0?lookupProperty(depth0,"order"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"order",hash:{},data:data,loc:{start:{line:1,column:195},end:{line:1,column:204}}}):helper)+"</strong>"},3:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'data-translation="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"translation")||(null!=depth0?lookupProperty(depth0,"translation"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"translation",hash:{},data:data,loc:{start:{line:1,column:287},end:{line:1,column:302}}}):helper)+'"'},5:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="color"style="background-color:'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"color")||(null!=depth0?lookupProperty(depth0,"color"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"color",hash:{},data:data,loc:{start:{line:1,column:386},end:{line:1,column:395}}}):helper)+'"></span>'},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div role="button"class="bubble edge js-edge theme-highlight-edge-color '+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"index_name")||(null!=depth0?lookupProperty(depth0,"index_name"):depth0))?helper:alias2)?helper.call(alias1,{name:"index_name",hash:{},data:data,loc:{start:{line:1,column:72},end:{line:1,column:86}}}):helper)+'"tabindex="0"notranslate>'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"enable_choice_numbers"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:111},end:{line:1,column:220}}}))?stack1:"")+'<div class="content"dir="auto"'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"translation"):depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:250},end:{line:1,column:310}}}))?stack1:"")+">"+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:311},end:{line:1,column:324}}}):helper)?stack1:"")+"</div>"+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"color"):depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:330},end:{line:1,column:411}}}))?stack1:"")+"</div>"},useData:!0})},"2vyi":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Attachment}));var constants_attachment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("IseC");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Attachment=function(_Backbone$Model){var subClass,superClass;function Attachment(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Attachment).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Attachment.prototype;return _proto.defaults=function(){return constants_attachment__WEBPACK_IMPORTED_MODULE_0__.c},_proto.parse=function(response){return null!=response.attachment?response.attachment:response},_proto.isPDF=function(){return"pdf"===this.get("type")},_proto.isImage=function(){return"image"===this.get("type")},_proto.isVideo=function(){return"video"===this.get("type")},_proto.isAudio=function(){return"audio"===this.get("type")},_proto.canLinkTo=function(){return!0},_proto.linkTo=function(node){node.set("attachment_id",this.get("id"))},_proto.templateContext=function(){var context=this.pick("url","thumb_url","content_type","filename","extension","size","type","video_id","meta");return context.image="image"===context.type,context.pdf="pdf"===context.type,context.video="video"===context.type,context.audio="audio"===context.type,context.youtube="youtube"===context.type,context.vimeo="vimeo"===context.type,context},Attachment}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},"3mYS":function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("mp0L")()?Number.isNaN:__webpack_require__("f+cg")},"42Pn":function(module,exports,__webpack_require__){"use strict";var callable=__webpack_require__("q/aM"),value=__webpack_require__("EmFb"),bind=Function.prototype.bind,call=Function.prototype.call,keys=Object.keys,objPropertyIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=function(method,defVal){return function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];return obj=Object(value(obj)),callable(cb),list=keys(obj),compareFn&&list.sort("function"==typeof compareFn?bind.call(compareFn,obj):void 0),"function"!=typeof method&&(method=list[method]),call.call(method,list,(function(key,index){return objPropertyIsEnumerable.call(obj,key)?call.call(cb,thisArg,obj[key],key,obj,index):defVal}))}}},"4VYz":function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return value=Number(value),isNaN(value)||0===value?value:value>0?1:-1}},"4Z7C":function(module,exports,__webpack_require__){"use strict";var isSymbol=__webpack_require__("0SDo");module.exports=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value}},"5AVa":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){return'style="display:none;"'},3:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<a href="javascript:;"class="score js-score"role="button"title="'+container.escapeExpression(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_show_points_details"):stack1,depth0))+'"></a>'},5:function(container,depth0,helpers,partials,data){return'<span class="score js-score"></span>'},7:function(container,depth0,helpers,partials,data){var stack1;return" "+(null!=(stack1=container.invokePartial(__webpack_require__("JvLR"),depth0,{name:"user_avatar",data:data,helpers:helpers,partials:partials,decorators:container.decorators}))?stack1:"")+" "},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=container.lambda,alias2=container.escapeExpression,alias3=null!=depth0?depth0:container.nullContext||{},lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<nav class="left"><a href="javascript:;"class="js-menu"role="button"title="'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_simulation_options"):stack1,depth0))+'"aria-haspopup="menu"><span class="fa fa-bars fa-fw"></span></a><a href="javascript:;"class="js-voice"role="button"title="'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_toggle_voiceover"):stack1,depth0))+'"'+(null!=(stack1=lookupProperty(helpers,"unless").call(alias3,null!=depth0?lookupProperty(depth0,"voice_button"):depth0,{name:"unless",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:276},end:{line:1,column:332}}}))?stack1:"")+'><span class="fa '+alias2("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"voice_icon")||(null!=depth0?lookupProperty(depth0,"voice_icon"):depth0))?helper:container.hooks.helperMissing)?helper.call(alias3,{name:"voice_icon",hash:{},data:data,loc:{start:{line:1,column:349},end:{line:1,column:363}}}):helper)+' js-voice-icon"></span></a></nav><div class="right">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias3,null!=depth0?lookupProperty(depth0,"multiple"):depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.program(5,data,0),data:data,loc:{start:{line:1,column:415},end:{line:1,column:593}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias3,null!=depth0?lookupProperty(depth0,"avatar_background"):depth0,{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:594},end:{line:1,column:645}}}))?stack1:"")+"</div>"},usePartial:!0,useData:!0})},"5ECE":function(module,exports,__webpack_require__){"use strict";var objToString=Object.prototype.toString,id=objToString.call("");module.exports=function(value){return"string"==typeof value||value&&"object"==typeof value&&(value instanceof String||objToString.call(value)===id)||!1}},"5JfI":function(module,exports,__webpack_require__){"use strict";var isIterable=__webpack_require__("wmlB");module.exports=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value}},"5Kdd":function(module,exports,__webpack_require__){"use strict";module.exports=function(value){try{return value.toString()}catch(error){try{return String(value)}catch(error2){return null}}}},"5VZH":function(module,exports,__webpack_require__){"use strict";var objToString=Object.prototype.toString,id=objToString.call(function(){return arguments}());module.exports=function(value){return objToString.call(value)===id}},"5VcS":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return MenuView}));__webpack_require__("8At4"),__webpack_require__("fAGv");var lib_tracer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ZypF"),lib_loader__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("B9Pn"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("v53q"),_templates_menu__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("bBB2"),_templates_menu__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_templates_menu__WEBPACK_IMPORTED_MODULE_5__),_stores_settings__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("x3EI"),_stores_player__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("unFh"),_actions_timeline__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("oOCt");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var MenuView=function(_Marionette$View){var subClass,superClass;function MenuView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=MenuView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=MenuView.prototype;return _proto.initialize=function(){this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b,"change:voice_button",this.onVoiceButtonChange),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b,"change:voice_autoplay",this.onVoiceAutoplayChange),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b,"change:duration",this.onAnimationChange)},_proto.tagName=function(){return"nav"},_proto.className=function(){return"player-menu player-container"},_proto.ui=function(){return{hide:".js-hide",voiceover:".js-voiceover",voiceoverIcon:".js-voiceover .fa",voiceoverText:".js-voiceover span",animation:".js-animation",first:"li[role=menuitem]:first-child a"}},_proto.events=function(){return{click:"onOverlayClick","click @ui.hide":"onHide","click @ui.voiceover":"onToggleVoice","click @ui.animation":"onToggleAnimation"}},_proto.keyboard=function(){return{keys:"esc",context:"menu"}},_proto.getTemplate=function(){return _templates_menu__WEBPACK_IMPORTED_MODULE_5___default.a},_proto.templateContext=function(){return{leave_url:lib_loader__WEBPACK_IMPORTED_MODULE_3__.a.url.leave,edit_url:lib_loader__WEBPACK_IMPORTED_MODULE_3__.a.url.edit,voice_button:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_button"),voice_autoplay:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_autoplay"),animation:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("duration")>0,translations:_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.project.translations()}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.$el.css({display:"none"})},_proto.onVoiceButtonChange=function(){this.ui.voiceover.toggle(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_button"))},_proto.onVoiceAutoplayChange=function(){this.ui.voiceoverIcon.removeClass("fa-volume-down fa-volume-up").addClass("fa-volume-"+(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_autoplay")?"up":"down")),this.ui.voiceoverText.text(_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.project.translations(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_autoplay")?"menu_turn_off_voiceover":"menu_turn_on_voiceover"))},_proto.show=function(){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.$el.is(":visible")||(this.$el.velocity("fadeIn",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration,complete:function(){_this.ui.first.focus()}}),_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__.a.on(this))},_proto.hide=function(){_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__.a.off(this),this.$el.velocity("fadeOut",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration,complete:this.remove.bind(this)})},_proto.onHide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.hide()},_proto.onOverlayClick=function(event){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.$el.is(event.target)&&this.hide()},_proto.onToggleVoice=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),_actions_timeline__WEBPACK_IMPORTED_MODULE_8__.a.toggleVoiceAutoplay()},_proto.onToggleAnimation=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),_actions_timeline__WEBPACK_IMPORTED_MODULE_8__.a.toggleAnimation()},_proto.onAnimationChange=function(){this.ui.animation.find(".on").toggle(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration>0),this.ui.animation.find(".off").toggle(0===_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration)},_proto.onShortcut=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.hide()},MenuView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},"5aQi":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="player-xs-11 player-md-7 player-lg-4 player-lg-offset-4 player-fhd-5 player-fhd-offset-3"><div class="js-resize"></div></div>'},useData:!0})},"6BNn":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Application",(function(){return Application})),__webpack_require__.d(__webpack_exports__,"Behavior",(function(){return Behavior})),__webpack_require__.d(__webpack_exports__,"CollectionView",(function(){return CollectionView})),__webpack_require__.d(__webpack_exports__,"DomApi",(function(){return DomApi})),__webpack_require__.d(__webpack_exports__,"Events",(function(){return Events})),__webpack_require__.d(__webpack_exports__,"MnObject",(function(){return MarionetteObject})),__webpack_require__.d(__webpack_exports__,"Region",(function(){return Region})),__webpack_require__.d(__webpack_exports__,"VERSION",(function(){return version})),__webpack_require__.d(__webpack_exports__,"View",(function(){return View})),__webpack_require__.d(__webpack_exports__,"bindEvents",(function(){return bindEvents$1})),__webpack_require__.d(__webpack_exports__,"bindRequests",(function(){return bindRequests$1})),__webpack_require__.d(__webpack_exports__,"extend",(function(){return extend})),__webpack_require__.d(__webpack_exports__,"getOption",(function(){return getOption$1})),__webpack_require__.d(__webpack_exports__,"isEnabled",(function(){return isEnabled})),__webpack_require__.d(__webpack_exports__,"mergeOptions",(function(){return mergeOptions$1})),__webpack_require__.d(__webpack_exports__,"monitorViewEvents",(function(){return monitorViewEvents})),__webpack_require__.d(__webpack_exports__,"normalizeMethods",(function(){return normalizeMethods$1})),__webpack_require__.d(__webpack_exports__,"setDomApi",(function(){return setDomApi$1})),__webpack_require__.d(__webpack_exports__,"setEnabled",(function(){return setEnabled})),__webpack_require__.d(__webpack_exports__,"setRenderer",(function(){return setRenderer$1})),__webpack_require__.d(__webpack_exports__,"triggerMethod",(function(){return triggerMethod$1})),__webpack_require__.d(__webpack_exports__,"unbindEvents",(function(){return unbindEvents$1})),__webpack_require__.d(__webpack_exports__,"unbindRequests",(function(){return unbindRequests$1}));var backbone__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("clIx"),backbone__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(backbone__WEBPACK_IMPORTED_MODULE_0__),underscore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5VhH"),backbone_radio__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("s1/G"),backbone_radio__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(backbone_radio__WEBPACK_IMPORTED_MODULE_2__),version="4.1.3",proxy=function(method){return function(context){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return method.apply(context,args)}},extend=backbone__WEBPACK_IMPORTED_MODULE_0___default.a.Model.extend,normalizeMethods=function(hash){var _this=this;if(hash)return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(hash,(function(normalizedHash,method,name){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(method)||(method=_this[method]),method&&(normalizedHash[name]=method),normalizedHash}),{})},errorProps=["description","fileName","lineNumber","name","message","number","url"],MarionetteError=extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v".concat(version,"/"),url:"",constructor:function(options){var error=Error.call(this,options.message);underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(this,underscore__WEBPACK_IMPORTED_MODULE_1__.default.pick(error,errorProps),underscore__WEBPACK_IMPORTED_MODULE_1__.default.pick(options,errorProps)),Error.captureStackTrace&&this.captureStackTrace(),this.url=this.urlRoot+this.url},captureStackTrace:function(){Error.captureStackTrace(this,MarionetteError)},toString:function(){return"".concat(this.name,": ").concat(this.message," See: ").concat(this.url)}});function normalizeBindings(context,bindings){if(!underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(bindings))throw new MarionetteError({message:"Bindings must be an object.",url:"common.html#bindevents"});return normalizeMethods.call(context,bindings)}function bindEvents(entity,bindings){return entity&&bindings?(this.listenTo(entity,normalizeBindings(this,bindings)),this):this}function unbindEvents(entity,bindings){return entity?bindings?(this.stopListening(entity,normalizeBindings(this,bindings)),this):(this.stopListening(entity),this):this}function normalizeBindings$1(context,bindings){if(!underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(bindings))throw new MarionetteError({message:"Bindings must be an object.",url:"common.html#bindrequests"});return normalizeMethods.call(context,bindings)}function bindRequests(channel,bindings){return channel&&bindings?(channel.reply(normalizeBindings$1(this,bindings),this),this):this}function unbindRequests(channel,bindings){return channel?bindings?(channel.stopReplying(normalizeBindings$1(this,bindings),this),this):(channel.stopReplying(null,null,this),this):this}var getOption=function(optionName){if(optionName)return this.options&&void 0!==this.options[optionName]?this.options[optionName]:this[optionName]},mergeOptions=function(options,keys){var _this=this;options&&underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(keys,(function(key){var option=options[key];void 0!==option&&(_this[key]=option)}))};function triggerMethodChildren(view,event,shouldTrigger){view._getImmediateChildren&&underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(view._getImmediateChildren(),(function(child){shouldTrigger(child)&&child.triggerMethod(event,child)}))}function shouldTriggerAttach(view){return!view._isAttached}function shouldAttach(view){return!!shouldTriggerAttach(view)&&(view._isAttached=!0,!0)}function shouldTriggerDetach(view){return view._isAttached}function shouldDetach(view){return view._isAttached=!1,!0}function triggerDOMRefresh(view){view._isAttached&&view._isRendered&&view.triggerMethod("dom:refresh",view)}function triggerDOMRemove(view){view._isAttached&&view._isRendered&&view.triggerMethod("dom:remove",view)}function handleBeforeAttach(){triggerMethodChildren(this,"before:attach",shouldTriggerAttach)}function handleAttach(){triggerMethodChildren(this,"attach",shouldAttach),triggerDOMRefresh(this)}function handleBeforeDetach(){triggerMethodChildren(this,"before:detach",shouldTriggerDetach),triggerDOMRemove(this)}function handleDetach(){triggerMethodChildren(this,"detach",shouldDetach)}function handleBeforeRender(){triggerDOMRemove(this)}function handleRender(){triggerDOMRefresh(this)}function monitorViewEvents(view){view._areViewEventsMonitored||!1===view.monitorViewEvents||(view._areViewEventsMonitored=!0,view.on({"before:attach":handleBeforeAttach,attach:handleAttach,"before:detach":handleBeforeDetach,detach:handleDetach,"before:render":handleBeforeRender,render:handleRender}))}var splitter=/(^|:)(\w)/gi,methodCache={};function getEventName(match,prefix,eventName){return eventName.toUpperCase()}var getOnMethodName=function(event){return methodCache[event]||(methodCache[event]="on"+event.replace(splitter,getEventName)),methodCache[event]};function triggerMethod(event){var result,methodName=getOnMethodName(event),method=getOption.call(this,methodName);return underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(method)&&(result=method.apply(this,underscore__WEBPACK_IMPORTED_MODULE_1__.default.drop(arguments))),this.trigger.apply(this,arguments),result}var Events={triggerMethod:triggerMethod},CommonMixin={normalizeMethods:normalizeMethods,_setOptions:function(options,classOptions){this.options=underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"options"),options),this.mergeOptions(options,classOptions)},mergeOptions:mergeOptions,getOption:getOption,bindEvents:bindEvents,unbindEvents:unbindEvents,bindRequests:bindRequests,unbindRequests:unbindRequests,triggerMethod:triggerMethod};underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(CommonMixin,backbone__WEBPACK_IMPORTED_MODULE_0___default.a.Events);var DestroyMixin={_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(options){return this._isDestroyed||(this.triggerMethod("before:destroy",this,options),this._isDestroyed=!0,this.triggerMethod("destroy",this,options),this.stopListening()),this}},RadioMixin={_initRadio:function(){var channelName=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"channelName");if(channelName){if(!backbone_radio__WEBPACK_IMPORTED_MODULE_2___default.a)throw new MarionetteError({message:'The dependency "backbone.radio" is missing.',url:"backbone.radio.html#marionette-integration"});var channel=this._channel=backbone_radio__WEBPACK_IMPORTED_MODULE_2___default.a.channel(channelName),radioEvents=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"radioEvents");this.bindEvents(channel,radioEvents);var radioRequests=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"radioRequests");this.bindRequests(channel,radioRequests),this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel}},ClassOptions=["channelName","radioEvents","radioRequests"],MarionetteObject=function(options){this._setOptions(options,ClassOptions),this.cid=underscore__WEBPACK_IMPORTED_MODULE_1__.default.uniqueId(this.cidPrefix),this._initRadio(),this.initialize.apply(this,arguments)};MarionetteObject.extend=extend,underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(MarionetteObject.prototype,CommonMixin,DestroyMixin,RadioMixin,{cidPrefix:"mno",initialize:function(){}});var _invoke=underscore__WEBPACK_IMPORTED_MODULE_1__.default.invokeMap||underscore__WEBPACK_IMPORTED_MODULE_1__.default.invoke;function parseBehaviors(view,behaviors,allBehaviors){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(behaviors,(function(reducedBehaviors,behaviorDefiniton){var _getBehaviorClass=function(options){if(options.behaviorClass)return{BehaviorClass:options.behaviorClass,options:options};if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(options))return{BehaviorClass:options,options:{}};throw new MarionetteError({message:"Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options",url:"marionette.behavior.html#defining-and-attaching-behaviors"})}(behaviorDefiniton),behavior=new(0,_getBehaviorClass.BehaviorClass)(_getBehaviorClass.options,view);return reducedBehaviors.push(behavior),parseBehaviors(view,underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(behavior,"behaviors"),reducedBehaviors)}),allBehaviors)}var BehaviorsMixin={_initBehaviors:function(){this._behaviors=parseBehaviors(this,underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"behaviors"),[])},_getBehaviorTriggers:function(){var triggers=_invoke(this._behaviors,"_getTriggers");return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(triggers,(function(memo,_triggers){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(memo,_triggers)}),{})},_getBehaviorEvents:function(){var events=_invoke(this._behaviors,"_getEvents");return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(events,(function(memo,_events){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(memo,_events)}),{})},_proxyBehaviorViewProperties:function(){_invoke(this._behaviors,"proxyViewProperties")},_delegateBehaviorEntityEvents:function(){_invoke(this._behaviors,"delegateEntityEvents")},_undelegateBehaviorEntityEvents:function(){_invoke(this._behaviors,"undelegateEntityEvents")},_destroyBehaviors:function(options){_invoke(this._behaviors,"destroy",options)},_removeBehavior:function(behavior){this._isDestroyed||(this.undelegate(".trig".concat(behavior.cid," .").concat(behavior.cid)),this._behaviors=underscore__WEBPACK_IMPORTED_MODULE_1__.default.without(this._behaviors,behavior))},_bindBehaviorUIElements:function(){_invoke(this._behaviors,"bindUIElements")},_unbindBehaviorUIElements:function(){_invoke(this._behaviors,"unbindUIElements")},_triggerEventOnBehaviors:function(eventName,view,options){_invoke(this._behaviors,"triggerMethod",eventName,view,options)}},DelegateEntityEventsMixin={_delegateEntityEvents:function(model,collection){model&&(this._modelEvents=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"modelEvents"),this.bindEvents(model,this._modelEvents)),collection&&(this._collectionEvents=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"collectionEvents"),this.bindEvents(collection,this._collectionEvents))},_undelegateEntityEvents:function(model,collection){this._modelEvents&&(this.unbindEvents(model,this._modelEvents),delete this._modelEvents),this._collectionEvents&&(this.unbindEvents(collection,this._collectionEvents),delete this._collectionEvents)},_deleteEntityEventHandlers:function(){delete this._modelEvents,delete this._collectionEvents}},TemplateRenderMixin={_renderTemplate:function(template){var data=this.mixinTemplateContext(this.serializeData())||{},html=this._renderHtml(template,data);void 0!==html&&this.attachElContent(html)},getTemplate:function(){return this.template},mixinTemplateContext:function(serializedData){var templateContext=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"templateContext");return templateContext?serializedData?underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},serializedData,templateContext):templateContext:serializedData},serializeData:function(){return this.model?this.serializeModel():this.collection?{items:this.serializeCollection()}:void 0},serializeModel:function(){return this.model.attributes},serializeCollection:function(){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.map(this.collection.models,(function(model){return model.attributes}))},_renderHtml:function(template,data){return template(data)},attachElContent:function(html){this.Dom.setContents(this.el,html,this.$el)}},delegateEventSplitter=/^(\S+)\s*(.*)$/,getNamespacedEventName=function(eventName,namespace){var match=eventName.match(delegateEventSplitter);return"".concat(match[1],".").concat(namespace," ").concat(match[2])},FEATURES={childViewEventPrefix:!1,triggersStopPropagation:!0,triggersPreventDefault:!0,DEV_MODE:!1};function isEnabled(name){return!!FEATURES[name]}function setEnabled(name,state){return FEATURES[name]=state}var TriggersMixin={_getViewTriggers:function(view,triggers){var _this=this;return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(triggers,(function(events,value,key){return events[key=getNamespacedEventName(key,"trig".concat(_this.cid))]=function(view,triggerDef){underscore__WEBPACK_IMPORTED_MODULE_1__.default.isString(triggerDef)&&(triggerDef={event:triggerDef});var eventName=triggerDef.event,shouldPreventDefault=!!triggerDef.preventDefault;isEnabled("triggersPreventDefault")&&(shouldPreventDefault=!1!==triggerDef.preventDefault);var shouldStopPropagation=!!triggerDef.stopPropagation;return isEnabled("triggersStopPropagation")&&(shouldStopPropagation=!1!==triggerDef.stopPropagation),function(event){shouldPreventDefault&&event.preventDefault(),shouldStopPropagation&&event.stopPropagation();for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];view.triggerMethod.apply(view,[eventName,view,event].concat(args))}}(view,value),events}),{})}},uiRegEx=/@ui\.[a-zA-Z-_$0-9]*/g,_normalizeUIString=function(uiString,ui){return uiString.replace(uiRegEx,(function(r){return ui[r.slice(4)]}))},UIMixin={normalizeUIKeys:function(hash){return function(hash,ui){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(hash,(function(memo,val,key){return memo[_normalizeUIString(key,ui)]=val,memo}),{})}(hash,this._getUIBindings())},normalizeUIString:function(uiString){var uiBindings=this._getUIBindings();return _normalizeUIString(uiString,uiBindings)},normalizeUIValues:function(hash,property){return function(hash,ui,property){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(hash,(function(val,key){if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isString(val))hash[key]=_normalizeUIString(val,ui);else if(val){var propertyVal=val[property];underscore__WEBPACK_IMPORTED_MODULE_1__.default.isString(propertyVal)&&(val[property]=_normalizeUIString(propertyVal,ui))}})),hash}(hash,this._getUIBindings(),property)},_getUIBindings:function(){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"_uiBindings")||underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"ui")},_bindUIElements:function(){var _this=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var bindings=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"_uiBindings");this._ui={},underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(bindings,(function(selector,key){_this._ui[key]=_this.$(selector)})),this.ui=this._ui}},_unbindUIElements:function(){var _this2=this;this.ui&&this._uiBindings&&(underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(this.ui,(function($el,name){delete _this2.ui[name]})),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(name){return this._ui[name]}};function _getEl(el){return el instanceof backbone__WEBPACK_IMPORTED_MODULE_0___default.a.$?el:backbone__WEBPACK_IMPORTED_MODULE_0___default.a.$(el)}function setDomApi(mixin){return this.prototype.Dom=underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},this.prototype.Dom,mixin),this}var DomApi={createBuffer:function(){return document.createDocumentFragment()},getDocumentEl:function(el){return el.ownerDocument.documentElement},getEl:function(selector){return _getEl(selector)},findEl:function(el,selector){return _getEl(el).find(selector)},hasEl:function(el,childEl){return el.contains(childEl&&childEl.parentNode)},detachEl:function(el){var _$el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_getEl(el);_$el.detach()},replaceEl:function(newEl,oldEl){if(newEl!==oldEl){var parent=oldEl.parentNode;parent&&parent.replaceChild(newEl,oldEl)}},swapEl:function(el1,el2){if(el1!==el2){var parent1=el1.parentNode,parent2=el2.parentNode;if(parent1&&parent2){var next1=el1.nextSibling,next2=el2.nextSibling;parent1.insertBefore(el2,next1),parent2.insertBefore(el1,next2)}}},setContents:function(el,html){var _$el=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_getEl(el);_$el.html(html)},appendContents:function(el,contents){var _ref=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_ref$_$el=_ref._$el,_$el=void 0===_ref$_$el?_getEl(el):_ref$_$el,_ref$_$contents=_ref._$contents,_$contents=void 0===_ref$_$contents?_getEl(contents):_ref$_$contents;_$el.append(_$contents)},hasContents:function(el){return!!el&&el.hasChildNodes()},detachContents:function(el){var _$el=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_getEl(el);_$el.contents().detach()}},ViewMixin={Dom:DomApi,_isElAttached:function(){return!!this.el&&this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEvents:function(events){this._proxyBehaviorViewProperties(),this._buildEventProxies();var combinedEvents=underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},this._getBehaviorEvents(),this._getEvents(events),this._getBehaviorTriggers(),this._getTriggers());return backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.prototype.delegateEvents.call(this,combinedEvents),this},_getEvents:function(events){return events?this.normalizeUIKeys(events):this.events?this.normalizeUIKeys(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"events")):void 0},_getTriggers:function(){if(this.triggers){var triggers=this.normalizeUIKeys(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"triggers"));return this._getViewTriggers(this,triggers)}},delegateEntityEvents:function(){return this._delegateEntityEvents(this.model,this.collection),this._delegateBehaviorEntityEvents(),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.model,this.collection),this._undelegateBehaviorEntityEvents(),this},destroy:function(options){if(this._isDestroyed||this._isDestroying)return this;this._isDestroying=!0;var shouldTriggerDetach=this._isAttached&&!this._disableDetachEvents;return this.triggerMethod("before:destroy",this,options),shouldTriggerDetach&&this.triggerMethod("before:detach",this),this.unbindUIElements(),this._removeElement(),shouldTriggerDetach&&(this._isAttached=!1,this.triggerMethod("detach",this)),this._removeChildren(),this._isDestroyed=!0,this._isRendered=!1,this._destroyBehaviors(options),this._deleteEntityEventHandlers(),this.triggerMethod("destroy",this,options),this._triggerEventOnBehaviors("destroy",this,options),this.stopListening(),this},_removeElement:function(){this.$el.off().removeData(),this.Dom.detachEl(this.el,this.$el)},bindUIElements:function(){return this._bindUIElements(),this._bindBehaviorUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this._unbindBehaviorUIElements(),this},getUI:function(name){return this._getUI(name)},_buildEventProxies:function(){this._childViewEvents=this.normalizeMethods(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"childViewEvents")),this._childViewTriggers=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"childViewTriggers"),this._eventPrefix=this._getEventPrefix()},_getEventPrefix:function(){var defaultPrefix=!!isEnabled("childViewEventPrefix")&&"childview",prefix=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"childViewEventPrefix",defaultPrefix);return!1===prefix?prefix:prefix+":"},_proxyChildViewEvents:function(view){(this._childViewEvents||this._childViewTriggers||this._eventPrefix)&&this.listenTo(view,"all",this._childViewEventHandler)},_childViewEventHandler:function(eventName){for(var childViewEvents=this._childViewEvents,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];childViewEvents&&childViewEvents[eventName]&&childViewEvents[eventName].apply(this,args);var childViewTriggers=this._childViewTriggers;childViewTriggers&&childViewTriggers[eventName]&&this.triggerMethod.apply(this,[childViewTriggers[eventName]].concat(args)),this._eventPrefix&&this.triggerMethod.apply(this,[this._eventPrefix+eventName].concat(args))}};function renderView(view){view._isRendered||(view.supportsRenderLifecycle||view.triggerMethod("before:render",view),view.render(),view._isRendered=!0,view.supportsRenderLifecycle||view.triggerMethod("render",view))}function destroyView(view,disableDetachEvents){if(view.destroy)return view._disableDetachEvents=disableDetachEvents,void view.destroy();view.supportsDestroyLifecycle||view.triggerMethod("before:destroy",view);var shouldTriggerDetach=view._isAttached&&!disableDetachEvents;shouldTriggerDetach&&view.triggerMethod("before:detach",view),view.remove(),shouldTriggerDetach&&(view._isAttached=!1,view.triggerMethod("detach",view)),view._isDestroyed=!0,view.supportsDestroyLifecycle||view.triggerMethod("destroy",view)}underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(ViewMixin,BehaviorsMixin,CommonMixin,DelegateEntityEventsMixin,TemplateRenderMixin,TriggersMixin,UIMixin);var ClassOptions$1=["allowMissingEl","parentEl","replaceElement"],Region=function(options){this._setOptions(options,ClassOptions$1),this.cid=underscore__WEBPACK_IMPORTED_MODULE_1__.default.uniqueId(this.cidPrefix),this._initEl=this.el=this.getOption("el"),this.el=this.el instanceof backbone__WEBPACK_IMPORTED_MODULE_0___default.a.$?this.el[0]:this.el,this.$el=this._getEl(this.el),this.initialize.apply(this,arguments)};function buildRegion(definition,defaults){if(definition instanceof Region)return definition;if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isString(definition))return buildRegionFromObject(defaults,{el:definition});if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(definition))return buildRegionFromObject(defaults,{regionClass:definition});if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(definition))return buildRegionFromObject(defaults,definition);throw new MarionetteError({message:"Improper region configuration type.",url:"marionette.region.html#defining-regions"})}function buildRegionFromObject(defaults,definition){var options=underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},defaults,definition),RegionClass=options.regionClass;return delete options.regionClass,new RegionClass(options)}Region.extend=extend,Region.setDomApi=setDomApi,underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(Region.prototype,CommonMixin,{Dom:DomApi,cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,initialize:function(){},show:function(view,options){if(this._ensureElement(options)){if((view=this._getView(view,options))===this.currentView)return this;if(view._isShown)throw new MarionetteError({name:"RegionError",message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});return this._isSwappingView=!!this.currentView,this.triggerMethod("before:show",this,view,options),!this.currentView&&view._isAttached||this.empty(options),this._setupChildView(view),this.currentView=view,renderView(view),this._attachView(view,options),this.triggerMethod("show",this,view,options),this._isSwappingView=!1,this}},_getEl:function(el){if(!el)throw new MarionetteError({name:"RegionError",message:'An "el" must be specified for a region.',url:"marionette.region.html#additional-options"});return this.getEl(el)},_setEl:function(){this.$el=this._getEl(this.el),this.$el.length&&(this.el=this.$el[0]),this.$el.length>1&&(this.$el=this.Dom.getEl(this.el))},_setElement:function(el){if(el===this.el)return this;var shouldReplace=this._isReplaced;if(this._restoreEl(),this.el=el,this._setEl(),this.currentView){var view=this.currentView;shouldReplace?this._replaceEl(view):this.attachHtml(view)}return this},_setupChildView:function(view){monitorViewEvents(view),this._proxyChildViewEvents(view),view.on("destroy",this._empty,this)},_proxyChildViewEvents:function(view){var parentView=this._parentView;parentView&&parentView._proxyChildViewEvents(view)},_shouldDisableMonitoring:function(){return this._parentView&&!1===this._parentView.monitorViewEvents},_isElAttached:function(){return this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},_attachView:function(view){var _ref=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},replaceElement=_ref.replaceElement,shouldTriggerAttach=!view._isAttached&&this._isElAttached()&&!this._shouldDisableMonitoring(),shouldReplaceEl=void 0===replaceElement?!!underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"replaceElement"):!!replaceElement;shouldTriggerAttach&&view.triggerMethod("before:attach",view),shouldReplaceEl?this._replaceEl(view):this.attachHtml(view),shouldTriggerAttach&&(view._isAttached=!0,view.triggerMethod("attach",view)),view._isShown=!0},_ensureElement:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(this.el)||this._setEl(),!this.$el||0===this.$el.length){var allowMissingEl=void 0===options.allowMissingEl?!!underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"allowMissingEl"):!!options.allowMissingEl;if(allowMissingEl)return!1;throw new MarionetteError({name:"RegionError",message:'An "el" must exist in DOM for this region '.concat(this.cid),url:"marionette.region.html#additional-options"})}return!0},_getView:function(view){if(!view)throw new MarionetteError({name:"RegionError",message:"The view passed is undefined and therefore invalid. You must pass a view instance to show.",url:"marionette.region.html#showing-a-view"});if(view._isDestroyed)throw new MarionetteError({name:"RegionError",message:'View (cid: "'.concat(view.cid,'") has already been destroyed and cannot be used.'),url:"marionette.region.html#showing-a-view"});if(view instanceof backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View)return view;var viewOptions=this._getViewOptions(view);return new View(viewOptions)},_getViewOptions:function(viewOptions){if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(viewOptions))return{template:viewOptions};if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(viewOptions))return viewOptions;return{template:function(){return viewOptions}}},getEl:function(el){var context=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"parentEl");return context&&underscore__WEBPACK_IMPORTED_MODULE_1__.default.isString(el)?this.Dom.findEl(context,el):this.Dom.getEl(el)},_replaceEl:function(view){this._restoreEl(),view.on("before:destroy",this._restoreEl,this),this.Dom.replaceEl(view.el,this.el),this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var view=this.currentView;view&&(this._detachView(view),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(view){this.Dom.appendContents(this.el,view.el,{_$el:this.$el,_$contents:view.$el})},empty:function(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},view=this.currentView;return view?(this._empty(view,!0),this):(this._ensureElement(options)&&this.detachHtml(),this)},_empty:function(view,shouldDestroy){view.off("destroy",this._empty,this),this.triggerMethod("before:empty",this,view),this._restoreEl(),delete this.currentView,view._isDestroyed||(shouldDestroy?this.removeView(view):this._detachView(view),view._isShown=!1,this._stopChildViewEvents(view)),this.triggerMethod("empty",this,view)},_stopChildViewEvents:function(view){this._parentView&&this._parentView.stopListening(view)},destroyView:function(view){return view._isDestroyed||destroyView(view,this._shouldDisableMonitoring()),view},removeView:function(view){this.destroyView(view)},detachView:function(){var view=this.currentView;if(view)return this._empty(view),view},_detachView:function(view){var shouldTriggerDetach=view._isAttached&&!this._shouldDisableMonitoring(),shouldRestoreEl=this._isReplaced;shouldTriggerDetach&&view.triggerMethod("before:detach",view),shouldRestoreEl?this.Dom.replaceEl(this.el,view.el):this.detachHtml(),shouldTriggerDetach&&(view._isAttached=!1,view.triggerMethod("detach",view))},detachHtml:function(){this.Dom.detachContents(this.el,this.$el)},hasView:function(){return!!this.currentView},reset:function(options){return this.empty(options),this.el=this._initEl,delete this.$el,this},_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(options){return this._isDestroyed||(this.triggerMethod("before:destroy",this,options),this._isDestroyed=!0,this.reset(options),this._name&&this._parentView._removeReferences(this._name),delete this._parentView,delete this._name,this.triggerMethod("destroy",this,options),this.stopListening()),this}});var RegionsMixin={regionClass:Region,_initRegions:function(){this.regions=this.regions||{},this._regions={},this.addRegions(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"regions"))},_reInitRegions:function(){_invoke(this._regions,"reset")},addRegion:function(name,definition){var regions={};return regions[name]=definition,this.addRegions(regions)[name]},addRegions:function(regions){if(!underscore__WEBPACK_IMPORTED_MODULE_1__.default.isEmpty(regions))return regions=this.normalizeUIValues(regions,"el"),this.regions=underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},this.regions,regions),this._addRegions(regions)},_addRegions:function(regionDefinitions){var _this=this,defaults={regionClass:this.regionClass,parentEl:underscore__WEBPACK_IMPORTED_MODULE_1__.default.partial(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result,this,"el")};return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(regionDefinitions,(function(regions,definition,name){return regions[name]=buildRegion(definition,defaults),_this._addRegion(regions[name],name),regions}),{})},_addRegion:function(region,name){this.triggerMethod("before:add:region",this,name,region),region._parentView=this,region._name=name,this._regions[name]=region,this.triggerMethod("add:region",this,name,region)},removeRegion:function(name){var region=this._regions[name];return this._removeRegion(region,name),region},removeRegions:function(){var regions=this._getRegions();return underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(this._regions,this._removeRegion.bind(this)),regions},_removeRegion:function(region,name){this.triggerMethod("before:remove:region",this,name,region),region.destroy(),this.triggerMethod("remove:region",this,name,region)},_removeReferences:function(name){delete this.regions[name],delete this._regions[name]},emptyRegions:function(){var regions=this.getRegions();return _invoke(regions,"empty"),regions},hasRegion:function(name){return!!this.getRegion(name)},getRegion:function(name){return this._isRendered||this.render(),this._regions[name]},_getRegions:function(){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.clone(this._regions)},getRegions:function(){return this._isRendered||this.render(),this._getRegions()},showChildView:function(name,view,options){return this.getRegion(name).show(view,options),view},detachChildView:function(name){return this.getRegion(name).detachView()},getChildView:function(name){return this.getRegion(name).currentView}};function setRenderer(renderer){return this.prototype._renderHtml=renderer,this}var ClassOptions$2=["behaviors","childViewEventPrefix","childViewEvents","childViewTriggers","collectionEvents","events","modelEvents","regionClass","regions","template","templateContext","triggers","ui"];function childReducer(children,region){return region.currentView&&children.push(region.currentView),children}var View=backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.extend({constructor:function(options){this._setOptions(options,ClassOptions$2),monitorViewEvents(this),this._initBehaviors(),this._initRegions(),backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.prototype.constructor.apply(this,arguments),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this,options)},setElement:function(){return backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.prototype.setElement.apply(this,arguments),this._isRendered=this.Dom.hasContents(this.el),this._isAttached=this._isElAttached(),this._isRendered&&this.bindUIElements(),this},render:function(){var template=this.getTemplate();return!1===template||this._isDestroyed||(this.triggerMethod("before:render",this),this._isRendered&&this._reInitRegions(),this._renderTemplate(template),this.bindUIElements(),this._isRendered=!0,this.triggerMethod("render",this)),this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(this._regions,childReducer,[])}},{setRenderer:setRenderer,setDomApi:setDomApi});underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(View.prototype,ViewMixin,RegionsMixin);var Container=function(){this._init()};function stringComparator(comparator,view){return view.model&&view.model.get(comparator)}underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce","partition"],(function(method){Container.prototype[method]=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return underscore__WEBPACK_IMPORTED_MODULE_1__.default[method].apply(underscore__WEBPACK_IMPORTED_MODULE_1__.default,[this._views].concat(args))}})),underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(Container.prototype,{_init:function(){this._views=[],this._viewsByCid={},this._indexByModel={},this._updateLength()},_add:function(view){var index=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._views.length;this._addViewIndexes(view),this._views.splice(index,0,view),this._updateLength()},_addViewIndexes:function(view){this._viewsByCid[view.cid]=view,view.model&&(this._indexByModel[view.model.cid]=view)},_sort:function(comparator,context){return"string"==typeof comparator?(comparator=underscore__WEBPACK_IMPORTED_MODULE_1__.default.partial(stringComparator,comparator),this._sortBy(comparator)):1===comparator.length?this._sortBy(comparator.bind(context)):this._views.sort(comparator.bind(context))},_sortBy:function(comparator){var sortedViews=underscore__WEBPACK_IMPORTED_MODULE_1__.default.sortBy(this._views,comparator);return this._set(sortedViews),sortedViews},_set:function(views,shouldReset){this._views.length=0,this._views.push.apply(this._views,views.slice(0)),shouldReset&&(this._viewsByCid={},this._indexByModel={},underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(views,this._addViewIndexes.bind(this)),this._updateLength())},_swap:function(view1,view2){var view1Index=this.findIndexByView(view1),view2Index=this.findIndexByView(view2);if(-1!==view1Index&&-1!==view2Index){var swapView=this._views[view1Index];this._views[view1Index]=this._views[view2Index],this._views[view2Index]=swapView}},findByModel:function(model){return this.findByModelCid(model.cid)},findByModelCid:function(modelCid){return this._indexByModel[modelCid]},findByIndex:function(index){return this._views[index]},findIndexByView:function(view){return this._views.indexOf(view)},findByCid:function(cid){return this._viewsByCid[cid]},hasView:function(view){return!!this.findByCid(view.cid)},_remove:function(view){if(this._viewsByCid[view.cid]){view.model&&delete this._indexByModel[view.model.cid],delete this._viewsByCid[view.cid];var index=this.findIndexByView(view);this._views.splice(index,1),this._updateLength()}},_updateLength:function(){this.length=this._views.length}});var ClassOptions$3=["behaviors","childView","childViewContainer","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","collectionEvents","emptyView","emptyViewOptions","events","modelEvents","sortWithCollection","template","templateContext","triggers","ui","viewComparator","viewFilter"],CollectionView=backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.extend({sortWithCollection:!0,constructor:function(options){this._setOptions(options,ClassOptions$3),monitorViewEvents(this),this._initChildViewStorage(),this._initBehaviors(),backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.prototype.constructor.apply(this,arguments),this.getEmptyRegion(),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this,options)},_initChildViewStorage:function(){this._children=new Container,this.children=new Container},getEmptyRegion:function(){var $emptyEl=this.$container||this.$el;return this._emptyRegion&&!this._emptyRegion.isDestroyed()?(this._emptyRegion._setElement($emptyEl[0]),this._emptyRegion):(this._emptyRegion=new Region({el:$emptyEl[0],replaceElement:!1}),this._emptyRegion._parentView=this,this._emptyRegion)},_initialEvents:function(){this._isRendered||this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,update:this._onCollectionUpdate})},_onCollectionSort:function(collection,_ref){var add=_ref.add,merge=_ref.merge,remove=_ref.remove;this.sortWithCollection&&!1!==this.viewComparator&&(add||remove||merge||this.sort())},_onCollectionReset:function(){this._destroyChildren(),this._addChildModels(this.collection.models),this.sort()},_onCollectionUpdate:function(collection,options){var changes=options.changes,removedViews=changes.removed.length&&this._removeChildModels(changes.removed);this._addedViews=changes.added.length&&this._addChildModels(changes.added),this._detachChildren(removedViews),this.sort(),this._removeChildViews(removedViews)},_removeChildModels:function(models){var _this=this;return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(models,(function(views,model){var removeView=_this._removeChildModel(model);return removeView&&views.push(removeView),views}),[])},_removeChildModel:function(model){var view=this._children.findByModel(model);return view&&this._removeChild(view),view},_removeChild:function(view){this.triggerMethod("before:remove:child",this,view),this.children._remove(view),this._children._remove(view),this.triggerMethod("remove:child",this,view)},_addChildModels:function(models){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.map(models,this._addChildModel.bind(this))},_addChildModel:function(model){var view=this._createChildView(model);return this._addChild(view),view},_createChildView:function(model){var ChildView=this._getChildView(model),childViewOptions=this._getChildViewOptions(model);return this.buildChildView(model,ChildView,childViewOptions)},_addChild:function(view,index){this.triggerMethod("before:add:child",this,view),this._setupChildView(view),this._children._add(view,index),this.children._add(view,index),this.triggerMethod("add:child",this,view)},_getChildView:function(child){var childView=this.childView;if(!childView)throw new MarionetteError({name:"CollectionViewError",message:'A "childView" must be specified',url:"marionette.collectionview.html#collectionviews-childview"});if(!(childView=this._getView(childView,child)))throw new MarionetteError({name:"CollectionViewError",message:'"childView" must be a view class or a function that returns a view class',url:"marionette.collectionview.html#collectionviews-childview"});return childView},_getView:function(view,child){return view.prototype instanceof backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View||view===backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View?view:underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(view)?view.call(this,child):void 0},_getChildViewOptions:function(child){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(this.childViewOptions)?this.childViewOptions(child):this.childViewOptions},buildChildView:function(child,ChildViewClass,childViewOptions){return new ChildViewClass(underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({model:child},childViewOptions))},_setupChildView:function(view){monitorViewEvents(view),view.on("destroy",this.removeChildView,this),this._proxyChildViewEvents(view)},_getImmediateChildren:function(){return this.children._views},setElement:function(){return backbone__WEBPACK_IMPORTED_MODULE_0___default.a.View.prototype.setElement.apply(this,arguments),this._isAttached=this._isElAttached(),this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this),this._destroyChildren(),this.collection&&(this._addChildModels(this.collection.models),this._initialEvents());var template=this.getTemplate();return template&&(this._renderTemplate(template),this.bindUIElements()),this._getChildViewContainer(),this.sort(),this._isRendered=!0,this.triggerMethod("render",this),this},_getChildViewContainer:function(){var childViewContainer=underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"childViewContainer");if(this.$container=childViewContainer?this.$(childViewContainer):this.$el,!this.$container.length)throw new MarionetteError({name:"CollectionViewError",message:'The specified "childViewContainer" was not found: '.concat(childViewContainer),url:"marionette.collectionview.html#defining-the-childviewcontainer"})},sort:function(){return this._sortChildren(),this.filter(),this},_sortChildren:function(){if(this._children.length){var viewComparator=this.getComparator();viewComparator&&(delete this._addedViews,this.triggerMethod("before:sort",this),this._children._sort(viewComparator,this),this.triggerMethod("sort",this))}},setComparator:function(comparator){var _ref2=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},preventRender=_ref2.preventRender,comparatorChanged=this.viewComparator!==comparator,shouldSort=comparatorChanged&&!preventRender;return this.viewComparator=comparator,shouldSort&&this.sort(),this},removeComparator:function(options){return this.setComparator(null,options)},getComparator:function(){return this.viewComparator?this.viewComparator:!(!this.sortWithCollection||!1===this.viewComparator||!this.collection)&&this._viewComparator},_viewComparator:function(view){return this.collection.indexOf(view.model)},filter:function(){return this._isDestroyed||(this._filterChildren(),this._renderChildren()),this},_filterChildren:function(){var _this2=this;if(this._children.length){var viewFilter=this._getFilter();if(viewFilter){delete this._addedViews,this.triggerMethod("before:filter",this);var attachViews=[],detachViews=[];underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(this._children._views,(function(view,key,children){(viewFilter.call(_this2,view,key,children)?attachViews:detachViews).push(view)})),this._detachChildren(detachViews),this.children._set(attachViews,!0),this.triggerMethod("filter",this,attachViews,detachViews)}else{var shouldReset=this.children.length!==this._children.length;this.children._set(this._children._views,shouldReset)}}},_getFilter:function(){var viewFilter=this.getFilter();if(!viewFilter)return!1;if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(viewFilter))return viewFilter;if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(viewFilter)){var matcher=underscore__WEBPACK_IMPORTED_MODULE_1__.default.matches(viewFilter);return function(view){return matcher(view.model&&view.model.attributes)}}if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isString(viewFilter))return function(view){return view.model&&view.model.get(viewFilter)};throw new MarionetteError({name:"CollectionViewError",message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy',url:"marionette.collectionview.html#defining-the-viewfilter"})},getFilter:function(){return this.viewFilter},setFilter:function(filter){var _ref3=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},preventRender=_ref3.preventRender,filterChanged=this.viewFilter!==filter,shouldRender=filterChanged&&!preventRender;return this.viewFilter=filter,shouldRender&&this.filter(),this},removeFilter:function(options){return this.setFilter(null,options)},_detachChildren:function(detachingViews){underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(detachingViews,this._detachChildView.bind(this))},_detachChildView:function(view){var shouldTriggerDetach=view._isAttached&&!1!==this.monitorViewEvents;shouldTriggerDetach&&view.triggerMethod("before:detach",view),this.detachHtml(view),shouldTriggerDetach&&(view._isAttached=!1,view.triggerMethod("detach",view)),view._isShown=!1},detachHtml:function(view){this.Dom.detachEl(view.el,view.$el)},_renderChildren:function(){this._hasUnrenderedViews&&(delete this._addedViews,delete this._hasUnrenderedViews);var views=this._addedViews||this.children._views;if(this.triggerMethod("before:render:children",this,views),this.isEmpty())this._showEmptyView();else{this._destroyEmptyView();var els=this._getBuffer(views);this._attachChildren(els,views)}delete this._addedViews,this.triggerMethod("render:children",this,views)},_getBuffer:function(views){var _this3=this,elBuffer=this.Dom.createBuffer();return underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(views,(function(view){renderView(view),view._isShown=!0,_this3.Dom.appendContents(elBuffer,view.el,{_$contents:view.$el})})),elBuffer},_attachChildren:function(els,views){views=this._isAttached&&!1!==this.monitorViewEvents?views:[],underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(views,(function(view){view._isAttached||view.triggerMethod("before:attach",view)})),this.attachHtml(els,this.$container),underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(views,(function(view){view._isAttached||(view._isAttached=!0,view.triggerMethod("attach",view))}))},attachHtml:function(els,$container){this.Dom.appendContents($container[0],els,{_$el:$container})},isEmpty:function(){return!this.children.length},_showEmptyView:function(){var EmptyView=this._getEmptyView();if(EmptyView){var options=this._getEmptyViewOptions();this.getEmptyRegion().show(new EmptyView(options))}},_getEmptyView:function(){var emptyView=this.emptyView;if(emptyView)return this._getView(emptyView)},_destroyEmptyView:function(){var emptyRegion=this.getEmptyRegion();emptyRegion.hasView()&&emptyRegion.empty()},_getEmptyViewOptions:function(){var emptyViewOptions=this.emptyViewOptions||this.childViewOptions;return underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(emptyViewOptions)?emptyViewOptions.call(this):emptyViewOptions},swapChildViews:function(view1,view2){if(!this._children.hasView(view1)||!this._children.hasView(view2))throw new MarionetteError({name:"CollectionViewError",message:"Both views must be children of the collection view to swap.",url:"marionette.collectionview.html#swapping-child-views"});return this._children._swap(view1,view2),this.Dom.swapEl(view1.el,view2.el),this.children.hasView(view1)!==this.children.hasView(view2)?this.filter():this.children._swap(view1,view2),this},addChildView:function(view,index){var options=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!view||view._isDestroyed)return view;if(view._isShown)throw new MarionetteError({name:"CollectionViewError",message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});if(underscore__WEBPACK_IMPORTED_MODULE_1__.default.isObject(index)&&(options=index),null!=options.index&&(index=options.index),this._isRendered||this.render(),this._addChild(view,index),options.preventRender)return this._hasUnrenderedViews=!0,view;var hasIndex=void 0!==index,isAddedToEnd=!hasIndex||index>=this._children.length;return isAddedToEnd&&!this._hasUnrenderedViews&&(this._addedViews=[view]),hasIndex?this._renderChildren():this.sort(),view},detachChildView:function(view){return this.removeChildView(view,{shouldDetach:!0}),view},removeChildView:function(view,options){return view?(this._removeChildView(view,options),this._removeChild(view),this.isEmpty()&&this._showEmptyView(),view):view},_removeChildViews:function(views){underscore__WEBPACK_IMPORTED_MODULE_1__.default.each(views,this._removeChildView.bind(this))},_removeChildView:function(view){var _ref4=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},shouldDetach=_ref4.shouldDetach;view.off("destroy",this.removeChildView,this),shouldDetach?this._detachChildView(view):this._destroyChildView(view),this.stopListening(view)},_destroyChildView:function(view){view._isDestroyed||destroyView(view,!1===this.monitorViewEvents)},_removeChildren:function(){this._destroyChildren(),this.getEmptyRegion().destroy(),delete this._addedViews},_destroyChildren:function(){this._children.length&&(this.triggerMethod("before:destroy:children",this),!1===this.monitorViewEvents&&this.Dom.detachContents(this.el,this.$el),this._removeChildViews(this._children._views),this._children._init(),this.children._init(),this.triggerMethod("destroy:children",this))}},{setDomApi:setDomApi,setRenderer:setRenderer});underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(CollectionView.prototype,ViewMixin);var ClassOptions$4=["collectionEvents","events","modelEvents","triggers","ui"],Behavior=function(options,view){this.view=view,this._setOptions(options,ClassOptions$4),this.cid=underscore__WEBPACK_IMPORTED_MODULE_1__.default.uniqueId(this.cidPrefix),this.ui=underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend({},underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"ui"),underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(view,"ui")),this.listenTo(view,"all",this.triggerMethod),this.initialize.apply(this,arguments)};Behavior.extend=extend,underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(Behavior.prototype,CommonMixin,DelegateEntityEventsMixin,TriggersMixin,UIMixin,{cidPrefix:"mnb",initialize:function(){},$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this.stopListening(),this.view._removeBehavior(this),this._deleteEntityEventHandlers(),this},proxyViewProperties:function(){return this.$el=this.view.$el,this.el=this.view.el,this},bindUIElements:function(){return this._bindUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this},getUI:function(name){return this._getUI(name)},delegateEntityEvents:function(){return this._delegateEntityEvents(this.view.model,this.view.collection),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.view.model,this.view.collection),this},_getEvents:function(){var _this=this;if(this.events){var behaviorEvents=this.normalizeUIKeys(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"events"));return underscore__WEBPACK_IMPORTED_MODULE_1__.default.reduce(behaviorEvents,(function(events,behaviorHandler,key){return underscore__WEBPACK_IMPORTED_MODULE_1__.default.isFunction(behaviorHandler)||(behaviorHandler=_this[behaviorHandler]),behaviorHandler?(events[key=getNamespacedEventName(key,_this.cid)]=behaviorHandler.bind(_this),events):events}),{})}},_getTriggers:function(){if(this.triggers){var behaviorTriggers=this.normalizeUIKeys(underscore__WEBPACK_IMPORTED_MODULE_1__.default.result(this,"triggers"));return this._getViewTriggers(this.view,behaviorTriggers)}}});var ClassOptions$5=["channelName","radioEvents","radioRequests","region","regionClass"],Application=function(options){this._setOptions(options,ClassOptions$5),this.cid=underscore__WEBPACK_IMPORTED_MODULE_1__.default.uniqueId(this.cidPrefix),this._initRegion(),this._initRadio(),this.initialize.apply(this,arguments)};Application.extend=extend,underscore__WEBPACK_IMPORTED_MODULE_1__.default.extend(Application.prototype,CommonMixin,DestroyMixin,RadioMixin,{cidPrefix:"mna",initialize:function(){},start:function(options){return this.triggerMethod("before:start",this,options),this.triggerMethod("start",this,options),this},regionClass:Region,_initRegion:function(){var region=this.region;if(region){var defaults={regionClass:this.regionClass};this._region=buildRegion(region,defaults)}},getRegion:function(){return this._region},showView:function(view){for(var region=this.getRegion(),_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return region.show.apply(region,[view].concat(args)),view},getView:function(){return this.getRegion().currentView}});var bindEvents$1=proxy(bindEvents),unbindEvents$1=proxy(unbindEvents),bindRequests$1=proxy(bindRequests),unbindRequests$1=proxy(unbindRequests),mergeOptions$1=proxy(mergeOptions),getOption$1=proxy(getOption),normalizeMethods$1=proxy(normalizeMethods),triggerMethod$1=proxy(triggerMethod),setDomApi$1=function(mixin){CollectionView.setDomApi(mixin),Region.setDomApi(mixin),View.setDomApi(mixin)},setRenderer$1=function(renderer){CollectionView.setRenderer(renderer),View.setRenderer(renderer)},backbone_marionette={View:View,CollectionView:CollectionView,MnObject:MarionetteObject,Object:MarionetteObject,Region:Region,Behavior:Behavior,Application:Application,isEnabled:isEnabled,setEnabled:setEnabled,monitorViewEvents:monitorViewEvents,Events:Events,extend:extend,DomApi:DomApi,VERSION:version};__webpack_exports__.default=backbone_marionette},"6Gvz":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="color"style="background-color:'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"color")||(null!=depth0?lookupProperty(depth0,"color"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"color",hash:{},data:data,loc:{start:{line:1,column:361},end:{line:1,column:370}}}):helper)+'"></span>'},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="bubble edge freetext theme-highlight-edge-color '+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"index_name")||(null!=depth0?lookupProperty(depth0,"index_name"):depth0))?helper:alias2)?helper.call(alias1,{name:"index_name",hash:{},data:data,loc:{start:{line:1,column:60},end:{line:1,column:74}}}):helper)+'"notranslate><div class="input"><textarea name="edge[freetext]"placeholder="..."rows="3"dir="auto"tabindex="0"></textarea><span class="counter"></span></div>'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"color"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:305},end:{line:1,column:386}}}))?stack1:"")+'</div><div role="button"class="js-edge submit theme-highlight-bg-color"tabindex="0">'+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:470},end:{line:1,column:483}}}):helper)?stack1:"")+"</div>"},useData:!0})},"6lUm":function(module,__webpack_exports__,__webpack_require__){"use strict";function loadSingleImage(image){var promise=new Promise((function(resolve,reject){function fulfill(){image.naturalWidth?resolve(image):reject(image),image.removeEventListener("load",fulfill),image.removeEventListener("error",fulfill)}image.naturalWidth?resolve(image):image.complete?reject(image):(image.addEventListener("load",fulfill),image.addEventListener("error",fulfill))}));return Object.assign(promise,{image:image})}__webpack_exports__.a=function loadImages(input,attributes){if(void 0===attributes&&(attributes={}),input instanceof HTMLImageElement)return loadSingleImage(input);if("string"==typeof input){var src=input,image_1=new Image;return Object.keys(attributes).forEach((function(name){return image_1.setAttribute(name,attributes[name])})),image_1.src=src,loadSingleImage(image_1)}if(function(input){return void 0!==input.length}(input)){var reflected=[].map.call(input,(function(img){return loadImages(img,attributes).catch((function(error){return error}))}));return Promise.all(reflected).then((function(results){var loaded=results.filter((function(x){return x.naturalWidth}));return loaded.length===results.length?loaded:Promise.reject({loaded:loaded,errored:results.filter((function(x){return!x.naturalWidth}))})}))}return Promise.reject(new TypeError("input is not an image, a URL string, or an array of them."))}},"6nYy":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Scene}));__webpack_require__("fAGv"),__webpack_require__("ba7S");var lib_format_cumulative_score__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("HL6H");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Scene=function(_TimelineEntry){var subClass,superClass;function Scene(){return _TimelineEntry.apply(this,arguments)||this}superClass=_TimelineEntry,(subClass=Scene).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Scene.prototype;return _proto.initialize=function(attributes,options){void 0===options&&(options={}),this.node=options.node,this.choice=options.choice},_proto.getVoiceURL=function(){return this.node.getVoiceURL()},_proto.getVideoURL=function(){return this.node.getVideoURL()},_proto.getCharacter=function(){return this.node.project.characters.get(this.get("character_id"))},_proto.getBackground=function(){return this.node.project.backgrounds.get(this.get("background_id"))},_proto.getContent=function(){return this.node.getContent()},_proto.getEmotion=function(){return this.node.getEmotion()},_proto.getAttachment=function(){return this.node.getAttachment()},_proto.edges=function(){return this.node.edges()},_proto.eventJSON=function(){return _.extend(this.node.eventJSON(),this.pick("score","scores"))},_proto.getScores=function(){var _this=this,result=[];return this.node.project.scores.each((function(projectScore){var uid=projectScore.get("uid"),totalScore=_this.totalScoreFor(uid);null!=totalScore&&result.push(_.extend(projectScore.attributes,{score:Object(lib_format_cumulative_score__WEBPACK_IMPORTED_MODULE_2__.a)(_this.scoreFor(uid)),total_score:(totalScore||0).toString()}))})),result},_proto.score=function(){return this.get("total_score")},_proto.scoreFor=function(uid){return(this.get("scores")||{})[uid]},_proto.totalScoreFor=function(uid){return(this.get("total_scores")||{})[uid]},_proto.hasAttachment=function(){return null!=this.node.get("attachment_id")},Scene}(__webpack_require__("2DHK").a)}).call(this,__webpack_require__("5VhH").default)},"7o3E":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){return" clickable"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="feedback-score'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"clickable"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:26},end:{line:1,column:60}}}))?stack1:"")+' theme-highlight-bg-color"><span data-translation="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"translation")||(null!=depth0?lookupProperty(depth0,"translation"):depth0))?helper:alias2)?helper.call(alias1,{name:"translation",hash:{},data:data,loc:{start:{line:1,column:111},end:{line:1,column:126}}}):helper)+'">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"title")||(null!=depth0?lookupProperty(depth0,"title"):depth0))?helper:alias2)?helper.call(alias1,{name:"title",hash:{},data:data,loc:{start:{line:1,column:128},end:{line:1,column:137}}}):helper)+"</span><aside><strong>"+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"points")||(null!=depth0?lookupProperty(depth0,"points"):depth0))?helper:alias2)?helper.call(alias1,{name:"points",hash:{},data:data,loc:{start:{line:1,column:159},end:{line:1,column:169}}}):helper)+'</strong><span class="fa fa-info-circle"></span></aside></div>'},useData:!0})},"8+v2":function(module,exports,__webpack_require__){"use strict";module.exports=function(){var sign=Math.sign;return"function"==typeof sign&&(1===sign(10)&&-1===sign(-20))}},"8Aw6":function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noop=function(){},exports.easeOutQuart=function(t,b,c,d){return t/=d,-c*((t-=1)*t*t*t-1)+b},exports.createElement=function(options){var elem=document.createElement(options.tagName);options.id&&(elem.id=options.id);options.html&&(elem.innerHTML=options.html);options.className&&(elem.className=options.className);options.src&&(elem.src=options.src);options.style&&(elem.style.cssText=options.style);options.child&&elem.appendChild(options.child);options.insertBefore?options.parent.insertBefore(elem,options.insertBefore):options.parent.appendChild(elem);return elem},exports.addClass=function addClass(el,className){var classNameAry=className.split(" ");classNameAry.length>1?classNameAry.forEach((function(classItem){return addClass(el,classItem)})):el.classList?el.classList.add(className):el.className+=" ".concat(className)},exports.removeClass=function removeClass(el,className){var classNameAry=className.split(" ");classNameAry.length>1?classNameAry.forEach((function(classItem){return removeClass(el,classItem)})):el.classList?el.classList.remove(className):el.className=el.className.replace(new RegExp("(^|\\b)".concat(className.split(" ").join("|"),"(\\b|$)"),"gi")," ")},exports.imageLoaded=function(img){return img.complete&&(void 0===img.naturalWidth||0!==img.naturalWidth)},exports.toArray=toArray,exports.assign=function(target){for(var _len=arguments.length,rest=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)rest[_key-1]=arguments[_key];return rest.forEach((function(obj){Object.keys(obj).forEach((function(key){target[key]=obj[key]}))})),target},exports.css=function(elements,properties){var elmArray=toArray(elements);if("string"==typeof properties)return window.getComputedStyle(elmArray[0])[properties];return void elmArray.forEach((function(element){Object.keys(properties).forEach((function(key){var value=properties[key];element.style[key]=value}))}))},exports.removeCss=function(element,property){element.style.removeProperty(property)},exports.wrap=function(element,_ref){var _ref$tag=_ref.tag,tag=void 0===_ref$tag?"div":_ref$tag,className=_ref.className,id=_ref.id,style=_ref.style,wrapper=document.createElement(tag);className&&(wrapper.className=className);id&&(wrapper.id=id);style&&(wrapper.style=style);return element.parentNode.insertBefore(wrapper,element),element.parentNode.removeChild(element),wrapper.appendChild(element),wrapper},exports.unwrap=function(element){var parent=element.parentNode;parent!==document.body&&(parent.parentNode.insertBefore(element,parent),parent.parentNode.removeChild(parent))},exports.remove=function(elements){toArray(elements).forEach((function(element){element.parentNode.removeChild(element)}))},exports.clamp=function(num,min,max){return Math.min(Math.max(num,min),max)},exports.assignEvent=function(element,events,handler){"string"==typeof events&&(events=[events]);return events.forEach((function(event){element.addEventListener(event,handler)})),function(){events.forEach((function(event){element.removeEventListener(event,handler)}))}},exports.getTouchPointsDistance=function(touches){var touch0=touches[0],touch1=touches[1];return Math.sqrt(Math.pow(touch1.pageX-touch0.pageX,2)+Math.pow(touch1.pageY-touch0.pageY,2))},exports.MOUSE_WHEEL_COUNT=exports.ZOOM_CONSTANT=void 0;exports.ZOOM_CONSTANT=15;function toArray(list){return list instanceof NodeList||list instanceof HTMLCollection?Array.prototype.slice.call(list):[list]}exports.MOUSE_WHEEL_COUNT=5},"9Cd6":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return MenuView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_stores_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("unFh"),_channels_player__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("9fCi"),_stores_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("x3EI"),_templates_progress_bar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("VLRA"),_templates_progress_bar__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_templates_progress_bar__WEBPACK_IMPORTED_MODULE_4__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var MenuView=function(_Marionette$View){var subClass,superClass;function MenuView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=MenuView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=MenuView.prototype;return _proto.initialize=function(){this.percentage=3,this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_2__.a,"current:scene",this.onSceneChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_2__.a,"reset",this.onReset),this.listenTo(_stores_player__WEBPACK_IMPORTED_MODULE_1__.a.project,"change:disable_progress_bar",this.onDisableProgressBar)},_proto.tagName=function(){return"div"},_proto.className=function(){return"player-progress-bar"},_proto.ui=function(){return{progress:".js-progress"}},_proto.getTemplate=function(){return _templates_progress_bar__WEBPACK_IMPORTED_MODULE_4___default.a},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.toggleProgressBar(),this.renderProgress()},_proto.onSceneChange=function(scene){var pct=scene.get("progress_pct");this.percentage=Math.min(Math.max(pct,3),100)||3,this.renderProgress()},_proto.renderProgress=function(){this.ui.progress.velocity({width:this.percentage+"%"},{display:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_3__.b.duration,complete:this.toggleFinishClass.bind(this)})},_proto.toggleFinishClass=function(){this.ui.progress.toggleClass("finish",100===this.percentage)},_proto.toggleProgressBar=function(){this.$el.toggle(!_stores_player__WEBPACK_IMPORTED_MODULE_1__.a.project.get("disable_progress_bar"))},_proto.onDisableProgressBar=function(){this.toggleProgressBar()},MenuView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},"9H0M":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("jVoc")],__WEBPACK_AMD_DEFINE_FACTORY__=function($){var nullLowestDeltaTimeout,lowestDelta,toFix=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],toBind="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],slice=Array.prototype.slice;if($.event.fixHooks)for(var i=toFix.length;i;)$.event.fixHooks[toFix[--i]]=$.event.mouseHooks;var special=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=toBind.length;i;)this.addEventListener(toBind[--i],handler,!1);else this.onmousewheel=handler;$.data(this,"mousewheel-line-height",special.getLineHeight(this)),$.data(this,"mousewheel-page-height",special.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=toBind.length;i;)this.removeEventListener(toBind[--i],handler,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(elem){var $elem=$(elem),$parent=$elem["offsetParent"in $.fn?"offsetParent":"parent"]();return $parent.length||($parent=$("body")),parseInt($parent.css("fontSize"),10)||parseInt($elem.css("fontSize"),10)||16},getPageHeight:function(elem){return $(elem).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function handler(event){var orgEvent=event||window.event,args=slice.call(arguments,1),delta=0,deltaX=0,deltaY=0,absDelta=0,offsetX=0,offsetY=0;if((event=$.event.fix(orgEvent)).type="mousewheel","detail"in orgEvent&&(deltaY=-1*orgEvent.detail),"wheelDelta"in orgEvent&&(deltaY=orgEvent.wheelDelta),"wheelDeltaY"in orgEvent&&(deltaY=orgEvent.wheelDeltaY),"wheelDeltaX"in orgEvent&&(deltaX=-1*orgEvent.wheelDeltaX),"axis"in orgEvent&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS&&(deltaX=-1*deltaY,deltaY=0),delta=0===deltaY?deltaX:deltaY,"deltaY"in orgEvent&&(delta=deltaY=-1*orgEvent.deltaY),"deltaX"in orgEvent&&(deltaX=orgEvent.deltaX,0===deltaY&&(delta=-1*deltaX)),0!==deltaY||0!==deltaX){if(1===orgEvent.deltaMode){var lineHeight=$.data(this,"mousewheel-line-height");delta*=lineHeight,deltaY*=lineHeight,deltaX*=lineHeight}else if(2===orgEvent.deltaMode){var pageHeight=$.data(this,"mousewheel-page-height");delta*=pageHeight,deltaY*=pageHeight,deltaX*=pageHeight}if(absDelta=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta,shouldAdjustOldDeltas(orgEvent,absDelta)&&(lowestDelta/=40)),shouldAdjustOldDeltas(orgEvent,absDelta)&&(delta/=40,deltaX/=40,deltaY/=40),delta=Math[delta>=1?"floor":"ceil"](delta/lowestDelta),deltaX=Math[deltaX>=1?"floor":"ceil"](deltaX/lowestDelta),deltaY=Math[deltaY>=1?"floor":"ceil"](deltaY/lowestDelta),special.settings.normalizeOffset&&this.getBoundingClientRect){var boundingRect=this.getBoundingClientRect();offsetX=event.clientX-boundingRect.left,offsetY=event.clientY-boundingRect.top}return event.deltaX=deltaX,event.deltaY=deltaY,event.deltaFactor=lowestDelta,event.offsetX=offsetX,event.offsetY=offsetY,event.deltaMode=0,args.unshift(event,delta,deltaX,deltaY),nullLowestDeltaTimeout&&clearTimeout(nullLowestDeltaTimeout),nullLowestDeltaTimeout=setTimeout(nullLowestDelta,200),($.event.dispatch||$.event.handle).apply(this,args)}}function nullLowestDelta(){lowestDelta=null}function shouldAdjustOldDeltas(orgEvent,absDelta){return special.settings.adjustOldDeltas&&"mousewheel"===orgEvent.type&&absDelta%120==0}$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel")},unmousewheel:function(fn){return this.unbind("mousewheel",fn)}})},void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},"9QdE":function(module,exports,__webpack_require__){module.exports={aStar:__webpack_require__("Cqyb"),aGreedy:__webpack_require__("0u7f"),nba:__webpack_require__("KZP9")}},"9fCi":function(module,__webpack_exports__,__webpack_require__){"use strict";var backbone_radio__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("s1/G"),backbone_radio__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(backbone_radio__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.a=backbone_radio__WEBPACK_IMPORTED_MODULE_0___default.a.channel("player")},"9ovB":function(module,exports){var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(error){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()},"9seb":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Nodes}));__webpack_require__("vpd+"),__webpack_require__("mejx"),__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug"),__webpack_require__("olot");var _models_node__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("DazJ");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Nodes=function(_Backbone$Collection){var subClass,superClass;function Nodes(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Nodes).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Nodes.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_node__WEBPACK_IMPORTED_MODULE_6__.a(attributes,options)},_proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project},_proto.create=function(attributes,options){return void 0===options&&(options={}),attributes.index||_extends(attributes,{index:this.project.nextNodeIndex()}),_extends(options,{project:this.project}),this.add(attributes,options)},_proto.hasAbsoluteScore=function(){return this.any((function(node){var score=node.get("score");return null!=score&&!_.includes(["-","+"],score[0])}))},_proto.hasMultipleScores=function(){return this.any((function(node){return _(node.get("scores")).values().length>1}))},_proto.getFinishNodes=function(){var _this=this;return this.reject((function(node){return _this.project.edges.any({from_node_index:node.get("index")})}))},Nodes}(Backbone.Collection)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},"9uF6":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("9H0M"),__webpack_require__("vjfU");__webpack_require__("cz6k").a.call(window.btx)},"9v3Y":function(module,exports,__webpack_require__){"use strict";var value=__webpack_require__("EmFb");module.exports=function(){return value(this).length=0,this}},ASzZ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Voices}));var lib_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("B9Pn"),constants_voice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("lYBc"),_models_voice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ggrQ");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Voices=function(_Backbone$Collection){var subClass,superClass;function Voices(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Voices).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Voices.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_voice__WEBPACK_IMPORTED_MODULE_2__.a(attributes,options)},_proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project},_proto.url=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_0__.a.url.project_voices},_proto.parse=function(response){return response.voices},_proto.deleteAll=function(){return this.trigger("deleting"),$.ajax({url:this.url(),method:"DELETE",error:this.deleteError,success:this.deleteSuccess,contentType:"application/json",dataType:"json"})},_proto.deleteSuccess=function(){this.project.nodes.each((function(node){return node.set("voice_id",null)})),this.project.edges.each((function(edge){return edge.set("voice_id",null)})),this.reset([]),this.trigger("deleting:success")},_proto.deleteError=function(){this.trigger("deleting:error")},_proto.getUploaderFileTypes=function(){return constants_voice__WEBPACK_IMPORTED_MODULE_1__.a},Voices}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},AuPL:function(module,exports,__webpack_require__){"use strict";var resolveException=__webpack_require__("Tz7V"),is=__webpack_require__("Fc97");module.exports=function(value){return is(value)?value:resolveException(value,"Cannot use %v",arguments[1])}},B7eJ:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("olot"),__webpack_require__("C9yj"),__webpack_require__("9XlR"),__webpack_require__("W1wS"),__webpack_require__("fAGv"),__webpack_require__("vaYn"),__webpack_require__("E03B"),__webpack_require__("bnlB"),__webpack_require__("vpd+"),__webpack_require__("mejx"),__webpack_require__("WIcX"),__webpack_require__("9wHH"),__webpack_require__("GAxB"),__webpack_require__("Tzi+"),__webpack_require__("qoQZ"),__webpack_require__("BzOA"),__webpack_require__("lcBG"),__webpack_require__("AQAF"),__webpack_require__("exX3"),__webpack_require__("Ubn2"),__webpack_require__("D4Pz"),__webpack_require__("Cwug"),__webpack_require__("rmLv"),__webpack_require__("jQa7"),__webpack_require__("4M8R"),__webpack_require__("mlKI"),__webpack_require__("8At4"),__webpack_require__("mbm0"),__webpack_require__("x8ax"),__webpack_require__("N6Ff"),__webpack_require__("v51e"),__webpack_require__("eZK8"),__webpack_require__("RFC7"),__webpack_require__("V4Jz"),__webpack_require__("921v"),__webpack_require__("ba7S"),__webpack_require__("5v+e"),__webpack_require__("zj3r"),__webpack_require__("lRLL"),__webpack_require__("li+S"),__webpack_require__("9dT4"),__webpack_require__("+ao8"),__webpack_require__("vrbO"),__webpack_require__("NBzm"),__webpack_require__("nPQI"),__webpack_require__("Ocky"),__webpack_require__("/xhF");var _excluded=["premium","referrerPolicy"];function __defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass2(Constructor,protoProps,staticProps){return protoProps&&__defineProperties(Constructor.prototype,protoProps),staticProps&&__defineProperties(Constructor,staticProps),Constructor}function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _defineProperty$1(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach((function(t){_defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var defaults$1={addCSS:!0,thumbWidth:15,watch:!0};function matches$1(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var getConstructor$1=function(e){return null!=e?e.constructor:null},instanceOf$1=function(e,t){return!!(e&&t&&e instanceof t)},isNullOrUndefined$1=function(e){return null==e},isObject$1=function(e){return getConstructor$1(e)===Object},isString$1=function(e){return getConstructor$1(e)===String},isArray$1=function(e){return Array.isArray(e)},isNodeList$1=function(e){return instanceOf$1(e,NodeList)},is$1_string=isString$1,is$1_array=isArray$1,is$1_nodeList=isNodeList$1,is$1_element=function(e){return instanceOf$1(e,Element)},is$1_event=function(e){return instanceOf$1(e,Event)},is$1_empty=function(e){return isNullOrUndefined$1(e)||(isString$1(e)||isArray$1(e)||isNodeList$1(e))&&!e.length||isObject$1(e)&&!Object.keys(e).length};function round(e,t){if(1>t){var i=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}var e,t,i,RangeTouch=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),is$1_element(t)?this.element=t:is$1_string(t)&&(this.element=document.querySelector(t)),is$1_element(this.element)&&is$1_empty(this.element.rangeTouch)&&(this.config=_objectSpread2({},defaults$1,{},i),this.init())}return function(e,t,i){t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[i](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!is$1_event(t))return null;var i,s=t.target,n=t.changedTouches[0],r=parseFloat(s.getAttribute("min"))||0,a=parseFloat(s.getAttribute("max"))||100,o=parseFloat(s.getAttribute("step"))||1,l=s.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(n.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*c:50<i&&(i+=2*(i-50)*c),r+round(i/100*(a-r),o)}},{key:"set",value:function(t){e.enabled&&is$1_event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=null;if(is$1_empty(t)||is$1_string(t)?s=Array.from(document.querySelectorAll(is$1_string(t)?t:'input[type="range"]')):is$1_element(t)?s=[t]:is$1_nodeList(t)?s=Array.from(t):is$1_array(t)&&(s=t.filter(is$1_element)),is$1_empty(s))return null;var n=_objectSpread2({},defaults$1,{},i);if(is$1_string(t)&&n.watch){var r=new MutationObserver((function(i){Array.from(i).forEach((function(i){Array.from(i.addedNodes).forEach((function(i){is$1_element(i)&&matches$1(i,t)&&new e(i,n)}))}))}));r.observe(document.body,{childList:!0,subtree:!0})}return s.map((function(t){return new e(t,i)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),getConstructor=function(e){return null!=e?e.constructor:null},instanceOf=function(e,t){return Boolean(e&&t&&e instanceof t)},isNullOrUndefined=function(e){return null==e},isObject=function(e){return getConstructor(e)===Object},isString=function(e){return getConstructor(e)===String},isFunction=function(e){return getConstructor(e)===Function},isArray=function(e){return Array.isArray(e)},isNodeList=function(e){return instanceOf(e,NodeList)},isEmpty=function(e){return isNullOrUndefined(e)||(isString(e)||isArray(e)||isNodeList(e))&&!e.length||isObject(e)&&!Object.keys(e).length},is_nullOrUndefined=isNullOrUndefined,is_object=isObject,is_number=function(e){return getConstructor(e)===Number&&!Number.isNaN(e)},is_string=isString,is_boolean=function(e){return getConstructor(e)===Boolean},is_function=isFunction,is_array=isArray,is_nodeList=isNodeList,is_element=function(e){return null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument},is_event=function(e){return instanceOf(e,Event)},is_keyboardEvent=function(e){return instanceOf(e,KeyboardEvent)},is_track=function(e){return instanceOf(e,TextTrack)||!isNullOrUndefined(e)&&isString(e.kind)},is_promise=function(e){return instanceOf(e,Promise)&&isFunction(e.then)},is_url=function(e){if(instanceOf(e,window.URL))return!0;if(!isString(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://"+e);try{return!isEmpty(new URL(t).hostname)}catch(e){return!1}},is_empty=isEmpty,transitionEndEvent=(e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i=Object.keys(t).find((function(t){return void 0!==e.style[t]})),!!is_string(i)&&t[i]);function repaint(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var browser={isIE:Boolean(window.document.documentMode),isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};function getDeep(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function extend(e){void 0===e&&(e={});for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)t[_key-1]=arguments[_key];if(!t.length)return e;var i=t.shift();return is_object(i)?(Object.keys(i).forEach((function(t){var _extends2,_extends3;is_object(i[t])?(Object.keys(e).includes(t)||_extends(e,((_extends2={})[t]={},_extends2)),extend(e[t],i[t])):_extends(e,((_extends3={})[t]=i[t],_extends3))})),extend.apply(void 0,[e].concat(t))):e}function wrap(e,t){var i=e.length?e:[e];Array.from(i).reverse().forEach((function(e,i){var s=i>0?t.cloneNode(!0):t,n=e.parentNode,r=e.nextSibling;s.appendChild(e),r?n.insertBefore(s,r):n.appendChild(s)}))}function setAttributes(e,t){is_element(e)&&!is_empty(t)&&Object.entries(t).filter((function(_ref){var e=_ref[1];return!is_nullOrUndefined(e)})).forEach((function(_ref2){var t=_ref2[0],i=_ref2[1];return e.setAttribute(t,i)}))}function createElement(e,t,i){var s=document.createElement(e);return is_object(t)&&setAttributes(s,t),is_string(i)&&(s.innerText=i),s}function insertElement(e,t,i,s){is_element(t)&&t.appendChild(createElement(e,i,s))}function removeElement(e){is_nodeList(e)||is_array(e)?Array.from(e).forEach(removeElement):is_element(e)&&is_element(e.parentNode)&&e.parentNode.removeChild(e)}function emptyElement(e){if(is_element(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function replaceElement(e,t){return is_element(t)&&is_element(t.parentNode)&&is_element(e)?(t.parentNode.replaceChild(e,t),e):null}function getAttributesFromSelector(e,t){if(!is_string(e)||is_empty(e))return{};var i={},s=extend({},t);return e.split(",").forEach((function(e){var t=e.trim(),n=t.replace(".",""),r=t.replace(/[[\]]/g,"").split("="),a=r[0],o=r.length>1?r[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":is_string(s.class)?i.class=s.class+" "+n:i.class=n;break;case"#":i.id=t.replace("#","");break;case"[":i[a]=o}})),extend(s,i)}function toggleHidden(e,t){if(is_element(e)){var i=t;is_boolean(i)||(i=!e.hidden),e.hidden=i}}function toggleClass(e,t,i){if(is_nodeList(e))return Array.from(e).map((function(e){return toggleClass(e,t,i)}));if(is_element(e)){var s="toggle";return void 0!==i&&(s=i?"add":"remove"),e.classList[s](t),e.classList.contains(t)}return!1}function hasClass(e,t){return is_element(e)&&e.classList.contains(t)}function matches(e,t){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function getElements(e){return this.elements.container.querySelectorAll(e)}function getElement(e){return this.elements.container.querySelector(e)}function setFocus(e,t){void 0===e&&(e=null),void 0===t&&(t=!1),is_element(e)&&(e.focus({preventScroll:!0}),t&&toggleClass(e,this.config.classNames.tabFocus))}var defaultCodecs={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},support={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,i){var s=browser.isIPhone&&i&&support.playsinline,n=support[e]||"html5"!==t;return{api:n,ui:n&&support.rangeInput&&("video"!==e||!browser.isIPhone||s)}},pip:!(browser.isIPhone||!is_function(createElement("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||createElement("video").disablePictureInPicture)),airplay:is_function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(is_empty(e))return!1;var t=e.split("/")[0],i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(defaultCodecs).includes(i)&&(i+='; codecs="'+defaultCodecs[e]+'"');try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:function(){var e=document.createElement("input");return e.type="range","range"===e.type}(),touch:"ontouchstart"in document.documentElement,transitions:!1!==transitionEndEvent,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},supportsPassiveListeners=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function toggleListener(e,t,i,s,n,r){var _this=this;if(void 0===s&&(s=!1),void 0===n&&(n=!0),void 0===r&&(r=!1),e&&"addEventListener"in e&&!is_empty(t)&&is_function(i)){var a=t.split(" "),o=r;supportsPassiveListeners&&(o={passive:n,capture:r}),a.forEach((function(t){_this&&_this.eventListeners&&s&&_this.eventListeners.push({element:e,type:t,callback:i,options:o}),e[s?"addEventListener":"removeEventListener"](t,i,o)}))}}function on(e,t,i,s,n){void 0===t&&(t=""),void 0===s&&(s=!0),void 0===n&&(n=!1),toggleListener.call(this,e,t,i,!0,s,n)}function off(e,t,i,s,n){void 0===t&&(t=""),void 0===s&&(s=!0),void 0===n&&(n=!1),toggleListener.call(this,e,t,i,!1,s,n)}function once(e,t,i,s,n){var _this2=this;void 0===t&&(t=""),void 0===s&&(s=!0),void 0===n&&(n=!1);toggleListener.call(this,e,t,(function r(){for(var _len2=arguments.length,a=new Array(_len2),_key2=0;_key2<_len2;_key2++)a[_key2]=arguments[_key2];off(e,t,r,s,n),i.apply(_this2,a)}),!0,s,n)}function triggerEvent(e,t,i,s){if(void 0===t&&(t=""),void 0===i&&(i=!1),void 0===s&&(s={}),is_element(e)&&!is_empty(t)){var n=new CustomEvent(t,{bubbles:i,detail:_extends({},s,{plyr:this})});e.dispatchEvent(n)}}function unbindListeners(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,i=e.type,s=e.callback,n=e.options;t.removeEventListener(i,s,n)})),this.eventListeners=[])}function ready(){var _this3=this;return new Promise((function(e){return _this3.ready?setTimeout(e,0):on.call(_this3,_this3.elements.container,"ready",e)})).then((function(){}))}function silencePromise(e){is_promise(e)&&e.then(null,(function(){}))}function validateRatio(e){return!!(is_array(e)||is_string(e)&&e.includes(":"))&&(is_array(e)?e:e.split(":")).map(Number).every(is_number)}function reduceAspectRatio(e){if(!is_array(e)||!e.every(is_number))return null;var t=e[0],i=e[1],n=function s(e,t){return 0===t?e:s(t,e%t)}(t,i);return[t/n,i/n]}function getAspectRatio(e){var t=function(e){return validateRatio(e)?e.split(":").map(Number):null},i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!is_empty(this.embed)&&is_array(this.embed.ratio)&&(i=this.embed.ratio),null===i&&this.isHTML5){var _this$media=this.media;i=reduceAspectRatio([_this$media.videoWidth,_this$media.videoHeight])}return i}function setAspectRatio(e){if(!this.isVideo)return{};var t=this.elements.wrapper,i=getAspectRatio.call(this,e),_ref3=is_array(i)?i:[0,0],r=100/_ref3[0]*_ref3[1];if(t.style.paddingBottom=r+"%",this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var _e2=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),_i=(_e2-r)/(_e2/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform="translateY(-"+_i+"%)"}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==i);return{padding:r,ratio:i}}var html5={getSources:function(){var _this4=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(e){var t=e.getAttribute("type");return!!is_empty(t)||support.mime.call(_this4,t)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:html5.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,is_empty(this.config.ratio)||setAspectRatio.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=html5.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&is_function(e.config.quality.onChange))e.config.quality.onChange(t);else{var i=html5.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!i)return;var _e$media=e.media,s=_e$media.currentTime,n=_e$media.paused,r=_e$media.preload,a=_e$media.readyState,o=_e$media.playbackRate;e.media.src=i.getAttribute("src"),("none"!==r||a)&&(e.once("loadedmetadata",(function(){e.speed=o,e.currentTime=s,n||silencePromise(e.play())})),e.media.load())}triggerEvent.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(removeElement(html5.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function dedupe(e){return is_array(e)?e.filter((function(t,i){return e.indexOf(t)===i})):e}function generateId(e){return e+"-"+Math.floor(1e4*Math.random())}function format(e){for(var _len3=arguments.length,t=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)t[_key3-1]=arguments[_key3];return is_empty(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,i){return t[i].toString()}))}var replaceAll=function(e,t,i){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString())},toTitleCase=function(e){return void 0===e&&(e=""),e.toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};function toCamelCase(e){void 0===e&&(e="");var t=e.toString();return t=function(e){void 0===e&&(e="");var t=e.toString();return t=replaceAll(t,"-"," "),t=replaceAll(t,"_"," "),t=toTitleCase(t),replaceAll(t," ","")}(t),t.charAt(0).toLowerCase()+t.slice(1)}function getHTML(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var resources={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},i18n_get=function(e,t){if(void 0===e&&(e=""),void 0===t&&(t={}),is_empty(e)||is_empty(t))return"";var i=getDeep(t.i18n,e);if(is_empty(i))return Object.keys(resources).includes(e)?resources[e]:"";var s={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(s).forEach((function(_ref4){var e=_ref4[0],t=_ref4[1];i=replaceAll(i,e,t)})),i},Storage=function(){function Storage(e){var _this5=this;_defineProperty$1(this,"get",(function(e){if(!Storage.supported||!_this5.enabled)return null;var t=window.localStorage.getItem(_this5.key);if(is_empty(t))return null;var i=JSON.parse(t);return is_string(e)&&e.length?i[e]:i})),_defineProperty$1(this,"set",(function(e){if(Storage.supported&&_this5.enabled&&is_object(e)){var t=_this5.get();is_empty(t)&&(t={}),extend(t,e),window.localStorage.setItem(_this5.key,JSON.stringify(t))}})),this.enabled=e.config.storage.enabled,this.key=e.config.storage.key}return _createClass2(Storage,null,[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}]),Storage}();function fetch(e,t){return void 0===t&&(t="text"),new Promise((function(i,s){try{var _s=new XMLHttpRequest;if(!("withCredentials"in _s))return;_s.addEventListener("load",(function(){if("text"===t)try{i(JSON.parse(_s.responseText))}catch(e){i(_s.responseText)}else i(_s.response)})),_s.addEventListener("error",(function(){throw new Error(_s.status)})),_s.open("GET",e,!0),_s.responseType=t,_s.send()}catch(e){s(e)}}))}function _loadSprite(e,t){if(is_string(e)){var i=is_string(t),n=function(){return null!==document.getElementById(t)},r=function(e,t){e.innerHTML=t,i&&n()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!n()){var _n=Storage.supported,a=document.createElement("div");if(a.setAttribute("hidden",""),i&&a.setAttribute("id",t),_n){var _e3=window.localStorage.getItem("cache-"+t);if(null!==_e3){var _t2=JSON.parse(_e3);r(a,_t2.content)}}fetch(e).then((function(e){is_empty(e)||(_n&&window.localStorage.setItem("cache-"+t,JSON.stringify({content:e})),r(a,e))})).catch((function(){}))}}}var getHours=function(e){return Math.trunc(e/60/60%60,10)};function _formatTime(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=!1),void 0===i&&(i=!1),!is_number(e))return _formatTime(void 0,t,i);var a,s=function(e){return("0"+e).slice(-2)},n=getHours(e),r=(a=e,Math.trunc(a/60%60,10)),o=function(e){return Math.trunc(e%60,10)}(e);return(i&&e>0?"-":"")+(n=t||n>0?n+":":"")+s(r)+":"+s(o)}var controls={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||browser.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=getElement.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:getElements.call(this,this.config.selectors.buttons.play),pause:getElement.call(this,this.config.selectors.buttons.pause),restart:getElement.call(this,this.config.selectors.buttons.restart),rewind:getElement.call(this,this.config.selectors.buttons.rewind),fastForward:getElement.call(this,this.config.selectors.buttons.fastForward),mute:getElement.call(this,this.config.selectors.buttons.mute),pip:getElement.call(this,this.config.selectors.buttons.pip),airplay:getElement.call(this,this.config.selectors.buttons.airplay),settings:getElement.call(this,this.config.selectors.buttons.settings),captions:getElement.call(this,this.config.selectors.buttons.captions),fullscreen:getElement.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=getElement.call(this,this.config.selectors.progress),this.elements.inputs={seek:getElement.call(this,this.config.selectors.inputs.seek),volume:getElement.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:getElement.call(this,this.config.selectors.display.buffer),currentTime:getElement.call(this,this.config.selectors.display.currentTime),duration:getElement.call(this,this.config.selectors.display.duration)},is_element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector("."+this.config.classNames.tooltip)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var i="http://www.w3.org/2000/svg",s=controls.getIconUrl.call(this),n=(s.cors?"":s.url)+"#"+this.config.iconPrefix,r=document.createElementNS(i,"svg");setAttributes(r,extend(t,{"aria-hidden":"true",focusable:"false"}));var a=document.createElementNS(i,"use"),o=n+"-"+e;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel:function(e,t){void 0===t&&(t={});var i=i18n_get(e,this.config);return createElement("span",_extends({},t,{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")}),i)},createBadge:function(e){if(is_empty(e))return null;var t=createElement("span",{class:this.config.classNames.menu.value});return t.appendChild(createElement("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var _this6=this,i=extend({},t),s=toCamelCase(e),n={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(i).includes(e)&&(n[e]=i[e],delete i[e])})),"button"!==n.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((function(e){return e===_this6.config.classNames.control}))||extend(i,{class:i.class+" "+this.config.classNames.control}):i.class=this.config.classNames.control,e){case"play":n.toggle=!0,n.label="play",n.labelPressed="pause",n.icon="play",n.iconPressed="pause";break;case"mute":n.toggle=!0,n.label="mute",n.labelPressed="unmute",n.icon="volume",n.iconPressed="muted";break;case"captions":n.toggle=!0,n.label="enableCaptions",n.labelPressed="disableCaptions",n.icon="captions-off",n.iconPressed="captions-on";break;case"fullscreen":n.toggle=!0,n.label="enterFullscreen",n.labelPressed="exitFullscreen",n.icon="enter-fullscreen",n.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" "+this.config.classNames.control+"--overlaid",s="play",n.label="play",n.icon="play";break;default:is_empty(n.label)&&(n.label=s),is_empty(n.icon)&&(n.icon=e)}var r=createElement(n.element);return n.toggle?(r.appendChild(controls.createIcon.call(this,n.iconPressed,{class:"icon--pressed"})),r.appendChild(controls.createIcon.call(this,n.icon,{class:"icon--not-pressed"})),r.appendChild(controls.createLabel.call(this,n.labelPressed,{class:"label--pressed"})),r.appendChild(controls.createLabel.call(this,n.label,{class:"label--not-pressed"}))):(r.appendChild(controls.createIcon.call(this,n.icon)),r.appendChild(controls.createLabel.call(this,n.label))),extend(i,getAttributesFromSelector(this.config.selectors.buttons[s],i)),setAttributes(r,i),"play"===s?(is_array(this.elements.buttons[s])||(this.elements.buttons[s]=[]),this.elements.buttons[s].push(r)):this.elements.buttons[s]=r,r},createRange:function(e,t){var i=createElement("input",extend(getAttributesFromSelector(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":i18n_get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,controls.updateRangeFill.call(this,i),RangeTouch.setup(i),i},createProgress:function(e,t){var i=createElement("progress",extend(getAttributesFromSelector(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(createElement("span",null,"0"));var _t3={played:"played",buffer:"buffered"}[e],s=_t3?i18n_get(_t3,this.config):"";i.innerText="% "+s.toLowerCase()}return this.elements.display[e]=i,i},createTime:function(e,t){var i=getAttributesFromSelector(this.config.selectors.display[e],t),s=createElement("div",extend(i,{class:((i.class?i.class:"")+" "+this.config.classNames.display.time+" ").trim(),"aria-label":i18n_get(e,this.config)}),"00:00");return this.elements.display[e]=s,s},bindMenuItemShortcuts:function(e,t){var _this7=this;on.call(this,e,"keydown keyup",(function(i){if([32,38,39,40].includes(i.which)&&(i.preventDefault(),i.stopPropagation(),"keydown"!==i.type)){var _t4,s=matches(e,'[role="menuitemradio"]');if(!s&&[32,39].includes(i.which))controls.showMenuPanel.call(_this7,t,!0);else 32!==i.which&&(40===i.which||s&&39===i.which?(_t4=e.nextElementSibling,is_element(_t4)||(_t4=e.parentNode.firstElementChild)):(_t4=e.previousElementSibling,is_element(_t4)||(_t4=e.parentNode.lastElementChild)),setFocus.call(_this7,_t4,!0))}}),!1),on.call(this,e,"keyup",(function(e){13===e.which&&controls.focusFirstMenuItem.call(_this7,null,!0)}))},createMenuItem:function(_ref5){var _this8=this,e=_ref5.value,t=_ref5.list,i=_ref5.type,s=_ref5.title,_ref5$badge=_ref5.badge,n=void 0===_ref5$badge?null:_ref5$badge,_ref5$checked=_ref5.checked,r=void 0!==_ref5$checked&&_ref5$checked,a=getAttributesFromSelector(this.config.selectors.inputs[i]),o=createElement("button",extend(a,{type:"button",role:"menuitemradio",class:(this.config.classNames.control+" "+(a.class?a.class:"")).trim(),"aria-checked":r,value:e})),l=createElement("span");l.innerHTML=s,is_element(n)&&l.appendChild(n),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:function(){return"true"===o.getAttribute("aria-checked")},set:function(e){e&&Array.from(o.parentNode.children).filter((function(e){return matches(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),o.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(o,"click keyup",(function(t){if(!is_keyboardEvent(t)||32===t.which){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,i){case"language":_this8.currentTrack=Number(e);break;case"quality":_this8.quality=e;break;case"speed":_this8.speed=parseFloat(e)}controls.showMenuPanel.call(_this8,"home",is_keyboardEvent(t))}}),i,!1),controls.bindMenuItemShortcuts.call(this,o,i),t.appendChild(o)},formatTime:function(e,t){return void 0===e&&(e=0),void 0===t&&(t=!1),is_number(e)?_formatTime(e,getHours(this.duration)>0,t):e},updateTimeDisplay:function(e,t,i){void 0===e&&(e=null),void 0===t&&(t=0),void 0===i&&(i=!1),is_element(e)&&is_number(t)&&(e.innerText=controls.formatTime(t,i))},updateVolume:function(){this.supported.ui&&(is_element(this.elements.inputs.volume)&&controls.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),is_element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e,t){void 0===t&&(t=0),is_element(e)&&(e.value=t,controls.updateRangeFill.call(this,e))},updateProgress:function(e){var _this9=this;if(this.supported.ui&&is_event(e)){var t=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=function(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}(this.currentTime,this.duration),"timeupdate"===e.type&&controls.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":!function(e,t){var i=is_number(t)?t:0,s=is_element(e)?e:_this9.elements.display.buffer;if(is_element(s)){s.value=i;var _e4=s.getElementsByTagName("span")[0];is_element(_e4)&&(_e4.childNodes[0].nodeValue=i)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=is_event(e)?e.target:e;if(is_element(t)&&"range"===t.getAttribute("type")){if(matches(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var _e5=controls.formatTime(this.currentTime),i=controls.formatTime(this.duration),s=i18n_get("seekLabel",this.config);t.setAttribute("aria-valuetext",s.replace("{currentTime}",_e5).replace("{duration}",i))}else if(matches(t,this.config.selectors.inputs.volume)){var _e6=100*t.value;t.setAttribute("aria-valuenow",_e6),t.setAttribute("aria-valuetext",_e6.toFixed(1)+"%")}else t.setAttribute("aria-valuenow",t.value);browser.isWebkit&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip:function(e){var _this10=this;if(this.config.tooltips.seek&&is_element(this.elements.inputs.seek)&&is_element(this.elements.display.seekTooltip)&&0!==this.duration){var t=this.config.classNames.tooltip+"--visible",i=function(e){return toggleClass(_this10.elements.display.seekTooltip,t,e)};if(this.touch)i(!1);else{var s=0,n=this.elements.progress.getBoundingClientRect();if(is_event(e))s=100/n.width*(e.pageX-n.left);else{if(!hasClass(this.elements.display.seekTooltip,t))return;s=parseFloat(this.elements.display.seekTooltip.style.left,10)}s<0?s=0:s>100&&(s=100),controls.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*s),this.elements.display.seekTooltip.style.left=s+"%",is_event(e)&&["mouseenter","mouseleave"].includes(e.type)&&i("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!is_element(this.elements.display.duration)&&this.config.invertTime;controls.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||controls.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return toggleHidden(this.elements.display.currentTime,!0),void toggleHidden(this.elements.progress,!0);is_element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=is_element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&controls.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&controls.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),controls.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){toggleHidden(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,i){var s=this.elements.settings.panels[e],n=null,r=t;if("captions"===e)n=this.currentTrack;else{if(n=is_empty(i)?this[e]:i,is_empty(n)&&(n=this.config[e].default),!is_empty(this.options[e])&&!this.options[e].includes(n))return void this.debug.warn("Unsupported value of '"+n+"' for "+e);if(!this.config[e].options.includes(n))return void this.debug.warn("Disabled value of '"+n+"' for "+e)}if(is_element(r)||(r=s&&s.querySelector('[role="menu"]')),is_element(r)){this.elements.settings.buttons[e].querySelector("."+this.config.classNames.menu.value).innerHTML=controls.getLabel.call(this,e,n);var a=r&&r.querySelector('[value="'+n+'"]');is_element(a)&&(a.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?i18n_get("normal",this.config):t+"&times;";case"quality":if(is_number(t)){var _e7=i18n_get("qualityLabel."+t,this.config);return _e7.length?_e7:t+"p"}return toTitleCase(t);case"captions":return captions.getLabel.call(this);default:return null}},setQualityMenu:function(e){var _this11=this;if(is_element(this.elements.settings.panels.quality)){var t="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');is_array(e)&&(this.options.quality=dedupe(e).filter((function(e){return _this11.config.quality.options.includes(e)})));var s=!is_empty(this.options.quality)&&this.options.quality.length>1;if(controls.toggleMenuButton.call(this,t,s),emptyElement(i),controls.checkMenu.call(this),s){var n=function(e){var t=i18n_get("qualityBadge."+e,_this11.config);return t.length?controls.createBadge.call(_this11,t):null};this.options.quality.sort((function(e,t){var i=_this11.config.quality.options;return i.indexOf(e)>i.indexOf(t)?1:-1})).forEach((function(e){controls.createMenuItem.call(_this11,{value:e,list:i,type:t,title:controls.getLabel.call(_this11,"quality",e),badge:n(e)})})),controls.updateSetting.call(this,t,i)}}},setCaptionsMenu:function(){var _this12=this;if(is_element(this.elements.settings.panels.captions)){var e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=captions.getTracks.call(this),s=Boolean(i.length);if(controls.toggleMenuButton.call(this,e,s),emptyElement(t),controls.checkMenu.call(this),s){var n=i.map((function(e,i){return{value:i,checked:_this12.captions.toggled&&_this12.currentTrack===i,title:captions.getLabel.call(_this12,e),badge:e.language&&controls.createBadge.call(_this12,e.language.toUpperCase()),list:t,type:"language"}}));n.unshift({value:-1,checked:!this.captions.toggled,title:i18n_get("disabled",this.config),list:t,type:"language"}),n.forEach(controls.createMenuItem.bind(this)),controls.updateSetting.call(this,e,t)}}},setSpeedMenu:function(){var _this13=this;if(is_element(this.elements.settings.panels.speed)){var e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(e){return e>=_this13.minimumSpeed&&e<=_this13.maximumSpeed}));var i=!is_empty(this.options.speed)&&this.options.speed.length>1;controls.toggleMenuButton.call(this,e,i),emptyElement(t),controls.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){controls.createMenuItem.call(_this13,{value:i,list:t,type:e,title:controls.getLabel.call(_this13,"speed",i)})})),controls.updateSetting.call(this,e,t))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!is_empty(e)&&Object.values(e).some((function(e){return!e.hidden}));toggleHidden(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e,t){if(void 0===t&&(t=!1),!this.elements.settings.popup.hidden){var i=e;is_element(i)||(i=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var s=i.querySelector('[role^="menuitem"]');setFocus.call(this,s,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,i=this.elements.buttons.settings;if(is_element(t)&&is_element(i)){var s=t.hidden,n=s;if(is_boolean(e))n=e;else if(is_keyboardEvent(e)&&27===e.which)n=!1;else if(is_event(e)){var _s2=is_function(e.composedPath)?e.composedPath()[0]:e.target,r=t.contains(_s2);if(r||!r&&e.target!==i&&n)return}i.setAttribute("aria-expanded",n),toggleHidden(t,!n),toggleClass(this.elements.container,this.config.classNames.menu.open,n),n&&is_keyboardEvent(e)?controls.focusFirstMenuItem.call(this,null,!0):n||s||setFocus.call(this,i,is_keyboardEvent(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var i=t.scrollWidth,s=t.scrollHeight;return removeElement(t),{width:i,height:s}},showMenuPanel:function(e,t){var _this14=this;void 0===e&&(e=""),void 0===t&&(t=!1);var i=this.elements.container.querySelector("#plyr-settings-"+this.id+"-"+e);if(is_element(i)){var s=i.parentNode,n=Array.from(s.children).find((function(e){return!e.hidden}));if(support.transitions&&!support.reducedMotion){s.style.width=n.scrollWidth+"px",s.style.height=n.scrollHeight+"px";var _e8=controls.getMenuSize.call(this,i);on.call(this,s,transitionEndEvent,(function _t5(e){e.target===s&&["width","height"].includes(e.propertyName)&&(s.style.width="",s.style.height="",off.call(_this14,s,transitionEndEvent,_t5))})),s.style.width=_e8.width+"px",s.style.height=_e8.height+"px"}toggleHidden(n,!0),toggleHidden(i,!1),controls.focusFirstMenuItem.call(this,i,t)}},setDownloadUrl:function(){var e=this.elements.buttons.download;is_element(e)&&e.setAttribute("href",this.download)},create:function(e){var _this15=this,t=controls.bindMenuItemShortcuts,i=controls.createButton,s=controls.createProgress,n=controls.createRange,r=controls.createTime,a=controls.setQualityMenu,o=controls.setSpeedMenu,l=controls.showMenuPanel;this.elements.controls=null,is_array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));var c=createElement("div",getAttributesFromSelector(this.config.selectors.controls.wrapper));this.elements.controls=c;var u={class:"plyr__controls__item"};return dedupe(is_array(this.config.controls)?this.config.controls:[]).forEach((function(a){if("restart"===a&&c.appendChild(i.call(_this15,"restart",u)),"rewind"===a&&c.appendChild(i.call(_this15,"rewind",u)),"play"===a&&c.appendChild(i.call(_this15,"play",u)),"fast-forward"===a&&c.appendChild(i.call(_this15,"fast-forward",u)),"progress"===a){var _t6=createElement("div",{class:u.class+" plyr__progress__container"}),_i2=createElement("div",getAttributesFromSelector(_this15.config.selectors.progress));if(_i2.appendChild(n.call(_this15,"seek",{id:"plyr-seek-"+e.id})),_i2.appendChild(s.call(_this15,"buffer")),_this15.config.tooltips.seek){var _e9=createElement("span",{class:_this15.config.classNames.tooltip},"00:00");_i2.appendChild(_e9),_this15.elements.display.seekTooltip=_e9}_this15.elements.progress=_i2,_t6.appendChild(_this15.elements.progress),c.appendChild(_t6)}if("current-time"===a&&c.appendChild(r.call(_this15,"currentTime",u)),"duration"===a&&c.appendChild(r.call(_this15,"duration",u)),"mute"===a||"volume"===a){var _t7=_this15.elements.volume;if(is_element(_t7)&&c.contains(_t7)||(_t7=createElement("div",extend({},u,{class:(u.class+" plyr__volume").trim()})),_this15.elements.volume=_t7,c.appendChild(_t7)),"mute"===a&&_t7.appendChild(i.call(_this15,"mute")),"volume"===a&&!browser.isIos){var _i3={max:1,step:.05,value:_this15.config.volume};_t7.appendChild(n.call(_this15,"volume",extend(_i3,{id:"plyr-volume-"+e.id})))}}if("captions"===a&&c.appendChild(i.call(_this15,"captions",u)),"settings"===a&&!is_empty(_this15.config.settings)){var _s3=createElement("div",extend({},u,{class:(u.class+" plyr__menu").trim(),hidden:""}));_s3.appendChild(i.call(_this15,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-"+e.id,"aria-expanded":!1}));var _n2=createElement("div",{class:"plyr__menu__container",id:"plyr-settings-"+e.id,hidden:""}),_r=createElement("div"),_a=createElement("div",{id:"plyr-settings-"+e.id+"-home"}),_o=createElement("div",{role:"menu"});_a.appendChild(_o),_r.appendChild(_a),_this15.elements.settings.panels.home=_a,_this15.config.settings.forEach((function(i){var s=createElement("button",extend(getAttributesFromSelector(_this15.config.selectors.buttons.settings),{type:"button",class:_this15.config.classNames.control+" "+_this15.config.classNames.control+"--forward",role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(_this15,s,i),on.call(_this15,s,"click",(function(){l.call(_this15,i,!1)}));var n=createElement("span",null,i18n_get(i,_this15.config)),a=createElement("span",{class:_this15.config.classNames.menu.value});a.innerHTML=e[i],n.appendChild(a),s.appendChild(n),_o.appendChild(s);var c=createElement("div",{id:"plyr-settings-"+e.id+"-"+i,hidden:""}),u=createElement("button",{type:"button",class:_this15.config.classNames.control+" "+_this15.config.classNames.control+"--back"});u.appendChild(createElement("span",{"aria-hidden":!0},i18n_get(i,_this15.config))),u.appendChild(createElement("span",{class:_this15.config.classNames.hidden},i18n_get("menuBack",_this15.config))),on.call(_this15,c,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),l.call(_this15,"home",!0))}),!1),on.call(_this15,u,"click",(function(){l.call(_this15,"home",!1)})),c.appendChild(u),c.appendChild(createElement("div",{role:"menu"})),_r.appendChild(c),_this15.elements.settings.buttons[i]=s,_this15.elements.settings.panels[i]=c})),_n2.appendChild(_r),_s3.appendChild(_n2),c.appendChild(_s3),_this15.elements.settings.popup=_n2,_this15.elements.settings.menu=_s3}if("pip"===a&&support.pip&&c.appendChild(i.call(_this15,"pip",u)),"airplay"===a&&support.airplay&&c.appendChild(i.call(_this15,"airplay",u)),"download"===a){var _e10=extend({},u,{element:"a",href:_this15.download,target:"_blank"});_this15.isHTML5&&(_e10.download="");var _t8=_this15.config.urls.download;!is_url(_t8)&&_this15.isEmbed&&extend(_e10,{icon:"logo-"+_this15.provider,label:_this15.provider}),c.appendChild(i.call(_this15,"download",_e10))}"fullscreen"===a&&c.appendChild(i.call(_this15,"fullscreen",u))})),this.isHTML5&&a.call(this,html5.getQualityOptions.call(this)),o.call(this),c},inject:function(){var _this16=this;if(this.config.loadSprite){var _e11=controls.getIconUrl.call(this);_e11.cors&&_loadSprite(_e11.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var e=null;this.elements.controls=null;var s,t={id:this.id,seektime:this.config.seekTime,title:this.config.title},i=!0;if(is_function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),is_element(this.config.controls)||is_string(this.config.controls)?e=this.config.controls:(e=controls.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:captions.getLabel.call(this)}),i=!1),i&&is_string(this.config.controls)&&(e=function(e){var i=e;return Object.entries(t).forEach((function(_ref6){var e=_ref6[0],t=_ref6[1];i=replaceAll(i,"{"+e+"}",t)})),i}(e)),is_string(this.config.selectors.controls.container)&&(s=document.querySelector(this.config.selectors.controls.container)),is_element(s)||(s=this.elements.container),s[is_element(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),is_element(this.elements.controls)||controls.findElements.call(this),!is_empty(this.elements.buttons)){var _e12=function(e){var t=_this16.config.classNames.controlPressed;Object.defineProperty(e,"pressed",{enumerable:!0,get:function(){return hasClass(e,t)},set:function(i){void 0===i&&(i=!1),toggleClass(e,t,i)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(t){is_array(t)||is_nodeList(t)?Array.from(t).filter(Boolean).forEach(_e12):_e12(t)}))}if(browser.isEdge&&repaint(s),this.config.tooltips.controls){var _this$config=this.config,_e13=_this$config.classNames,_t9=_this$config.selectors,_i4=_t9.controls.wrapper+" "+_t9.labels+" ."+_e13.hidden,_s4=getElements.call(this,_i4);Array.from(_s4).forEach((function(e){toggleClass(e,_this16.config.classNames.hidden,!1),toggleClass(e,_this16.config.classNames.tooltip,!0)}))}}};function parseUrl(e,t){void 0===t&&(t=!0);var i=e;if(t){var _e14=document.createElement("a");_e14.href=i,i=_e14.href}try{return new URL(i)}catch(e){return null}}function buildUrlParams(e){var t=new URLSearchParams;return is_object(e)&&Object.entries(e).forEach((function(_ref7){var e=_ref7[0],i=_ref7[1];t.set(e,i)})),t}var captions={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!support.textTracks)is_array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this);else{if(is_element(this.elements.captions)||(this.elements.captions=createElement("div",getAttributesFromSelector(this.config.selectors.captions)),function(e,t){is_element(e)&&is_element(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),browser.isIE&&window.URL){var _e15=this.media.querySelectorAll("track");Array.from(_e15).forEach((function(e){var t=e.getAttribute("src"),i=parseUrl(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&fetch(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){removeElement(e)}))}))}var e=dedupe((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),t=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===t&&(t=e[0]);var i=this.storage.get("captions");if(is_boolean(i)||(i=this.config.captions.active),_extends(this.captions,{toggled:!1,active:i,language:t,languages:e}),this.isHTML5){var _e17=this.config.captions.update?"addtrack removetrack":"removetrack";on.call(this,this.media.textTracks,_e17,captions.update.bind(this))}setTimeout(captions.update.bind(this),0)}},update:function(){var _this17=this,e=captions.getTracks.call(this,!0),_this$captions=this.captions,t=_this$captions.active,i=_this$captions.language,s=_this$captions.meta,n=_this$captions.currentTrackNode,r=Boolean(e.find((function(e){return e.language===i})));this.isHTML5&&this.isVideo&&e.filter((function(e){return!s.get(e)})).forEach((function(e){_this17.debug.log("Track added",e),s.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),on.call(_this17,e,"cuechange",(function(){return captions.updateCues.call(_this17)}))})),(r&&this.language!==i||!e.includes(n))&&(captions.setLanguage.call(this,i),captions.toggle.call(this,t&&r)),toggleClass(this.elements.container,this.config.classNames.captions.enabled,!is_empty(e)),is_array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this)},toggle:function(e,t){var _this18=this;if(void 0===t&&(t=!0),this.supported.ui){var i=this.captions.toggled,s=this.config.classNames.captions.active,n=is_nullOrUndefined(e)?!i:e;if(n!==i){if(t||(this.captions.active=n,this.storage.set({captions:n})),!this.language&&n&&!t){var _e18=captions.getTracks.call(this),_t10=captions.findTrack.call(this,[this.captions.language].concat(this.captions.languages),!0);return this.captions.language=_t10.language,void captions.set.call(this,_e18.indexOf(_t10))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=n),toggleClass(this.elements.container,s,n),this.captions.toggled=n,controls.updateSetting.call(this,"captions"),triggerEvent.call(this,this.media,n?"captionsenabled":"captionsdisabled")}setTimeout((function(){n&&_this18.captions.toggled&&(_this18.captions.currentTrackNode.mode="hidden")}))}},set:function(e,t){void 0===t&&(t=!0);var i=captions.getTracks.call(this);if(-1!==e)if(is_number(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var s=i[e],n=(s||{}).language;this.captions.currentTrackNode=s,controls.updateSetting.call(this,"captions"),t||(this.captions.language=n,this.storage.set({language:n})),this.isVimeo&&this.embed.enableTextTrack(n),triggerEvent.call(this,this.media,"languagechange")}captions.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&captions.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else captions.toggle.call(this,!1,t)},setLanguage:function(e,t){if(void 0===t&&(t=!0),is_string(e)){var i=e.toLowerCase();this.captions.language=i;var s=captions.getTracks.call(this),n=captions.findTrack.call(this,[i]);captions.set.call(this,s.indexOf(n),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(e){var _this19=this;return void 0===e&&(e=!1),Array.from((this.media||{}).textTracks||[]).filter((function(t){return!_this19.isHTML5||e||_this19.captions.meta.has(t)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e,t){var _this20=this;void 0===t&&(t=!1);var r,i=captions.getTracks.call(this),s=function(e){return Number((_this20.captions.meta.get(e)||{}).default)},n=Array.from(i).sort((function(e,t){return s(t)-s(e)}));return e.every((function(e){return r=n.find((function(t){return t.language===e})),!r})),r||(t?n[0]:void 0)},getCurrentTrack:function(){return captions.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!is_track(t)&&support.textTracks&&this.captions.toggled&&(t=captions.getCurrentTrack.call(this)),is_track(t)?is_empty(t.label)?is_empty(t.language)?i18n_get("enabled",this.config):e.language.toUpperCase():t.label:i18n_get("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(is_element(this.elements.captions))if(is_nullOrUndefined(e)||Array.isArray(e)){var t=e;if(!t){var _e19=captions.getCurrentTrack.call(this);t=Array.from((_e19||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(getHTML)}var i=t.map((function(e){return e.trim()})).join("\n");if(i!==this.elements.captions.innerHTML){emptyElement(this.elements.captions);var _e20=createElement("span",getAttributesFromSelector(this.config.selectors.caption));_e20.innerHTML=i,this.elements.captions.appendChild(_e20),triggerEvent.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},defaults={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.5/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1}},pip_active="picture-in-picture",pip_inactive="inline",providers={html5:"html5",youtube:"youtube",vimeo:"vimeo"},types_audio="audio",types_video="video";var noop=function(){},Console=function(){function Console(e){void 0===e&&(e=!1),this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}return _createClass2(Console,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):noop}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):noop}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):noop}}]),Console}(),Fullscreen=function(){function Fullscreen(e){var _this21=this;_defineProperty$1(this,"onChange",(function(){if(_this21.enabled){var e=_this21.player.elements.buttons.fullscreen;is_element(e)&&(e.pressed=_this21.active);var t=_this21.target===_this21.player.media?_this21.target:_this21.player.elements.container;triggerEvent.call(_this21.player,t,_this21.active?"enterfullscreen":"exitfullscreen",!0)}})),_defineProperty$1(this,"toggleFallback",(function(e){if(void 0===e&&(e=!1),e?_this21.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(_this21.scrollPosition.x,_this21.scrollPosition.y),document.body.style.overflow=e?"hidden":"",toggleClass(_this21.target,_this21.player.config.classNames.fullscreen.fallback,e),browser.isIos){var t=document.head.querySelector('meta[name="viewport"]'),i="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var s=is_string(t.content)&&t.content.includes(i);e?(_this21.cleanupViewport=!s,s||(t.content+=","+i)):_this21.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==i})).join(","))}_this21.onChange()})),_defineProperty$1(this,"trapFocus",(function(e){if(!browser.isIos&&_this21.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,i=getElements.call(_this21.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),s=i[0],n=i[i.length-1];t!==n||e.shiftKey?t===s&&e.shiftKey&&(n.focus(),e.preventDefault()):(s.focus(),e.preventDefault())}})),_defineProperty$1(this,"update",(function(){var _e21;_this21.enabled?(_e21=_this21.forceFallback?"Fallback (forced)":Fullscreen.native?"Native":"Fallback",_this21.player.debug.log(_e21+" fullscreen enabled")):_this21.player.debug.log("Fullscreen not supported and fallback disabled");toggleClass(_this21.player.elements.container,_this21.player.config.classNames.fullscreen.enabled,_this21.enabled)})),_defineProperty$1(this,"enter",(function(){_this21.enabled&&(browser.isIos&&_this21.player.config.fullscreen.iosNative?_this21.player.isVimeo?_this21.player.embed.requestFullscreen():_this21.target.webkitEnterFullscreen():!Fullscreen.native||_this21.forceFallback?_this21.toggleFallback(!0):_this21.prefix?is_empty(_this21.prefix)||_this21.target[_this21.prefix+"Request"+_this21.property]():_this21.target.requestFullscreen({navigationUI:"hide"}))})),_defineProperty$1(this,"exit",(function(){if(_this21.enabled)if(browser.isIos&&_this21.player.config.fullscreen.iosNative)_this21.target.webkitExitFullscreen(),silencePromise(_this21.player.play());else if(!Fullscreen.native||_this21.forceFallback)_this21.toggleFallback(!1);else if(_this21.prefix){if(!is_empty(_this21.prefix)){var _e22="moz"===_this21.prefix?"Cancel":"Exit";document[""+_this21.prefix+_e22+_this21.property]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)})),_defineProperty$1(this,"toggle",(function(){_this21.active?_this21.exit():_this21.enter()})),this.player=e,this.prefix=Fullscreen.prefix,this.property=Fullscreen.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===e.config.fullscreen.fallback,this.player.elements.fullscreen=e.config.fullscreen.container&&function(e,t){return(Element.prototype.closest||function(){var e=this;do{if(matches.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,e.config.fullscreen.container),on.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":this.prefix+"fullscreenchange",(function(){_this21.onChange()})),on.call(this.player,this.player.elements.container,"dblclick",(function(e){is_element(_this21.player.elements.controls)&&_this21.player.elements.controls.contains(e.target)||_this21.player.listeners.proxy(e,_this21.toggle,"fullscreen")})),on.call(this,this.player.elements.container,"keydown",(function(e){return _this21.trapFocus(e)})),this.update()}return _createClass2(Fullscreen,[{key:"usingNative",get:function(){return Fullscreen.native&&!this.forceFallback}},{key:"enabled",get:function(){return(Fullscreen.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!Fullscreen.native||this.forceFallback)return hasClass(this.target,this.player.config.classNames.fullscreen.fallback);var e=this.prefix?document[""+this.prefix+this.property+"Element"]:document.fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}},{key:"target",get:function(){return browser.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(is_function(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!is_function(document[t+"ExitFullscreen"])&&!is_function(document[t+"CancelFullScreen"])||(e=t,0))})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),Fullscreen}();function loadImage(e,t){return void 0===t&&(t=1),new Promise((function(i,s){var n=new Image,r=function(){delete n.onload,delete n.onerror,(n.naturalWidth>=t?i:s)(n)};_extends(n,{onload:r,onerror:r,src:e})}))}var ui={addStyleHook:function(){toggleClass(this.elements.container,this.config.selectors.container.replace(".",""),!0),toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(e){void 0===e&&(e=!1),e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var _this22=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for "+this.provider+" "+this.type),void ui.toggleNativeControls.call(this,!0);is_element(this.elements.controls)||(controls.inject.call(this),this.listeners.controls()),ui.toggleNativeControls.call(this),this.isHTML5&&captions.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,controls.updateVolume.call(this),controls.timeUpdate.call(this),ui.checkPlaying.call(this),toggleClass(this.elements.container,this.config.classNames.pip.supported,support.pip&&this.isHTML5&&this.isVideo),toggleClass(this.elements.container,this.config.classNames.airplay.supported,support.airplay&&this.isHTML5),toggleClass(this.elements.container,this.config.classNames.isIos,browser.isIos),toggleClass(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){triggerEvent.call(_this22,_this22.media,"ready")}),0),ui.setTitle.call(this),this.poster&&ui.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&controls.durationUpdate.call(this)},setTitle:function(){var e=i18n_get("play",this.config);if(is_string(this.config.title)&&!is_empty(this.config.title)&&(e+=", "+this.config.title),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var _e23=getElement.call(this,"iframe");if(!is_element(_e23))return;var t=is_empty(this.config.title)?"video":this.config.title,i=i18n_get("frameTitle",this.config);_e23.setAttribute("title",i.replace("{title}",t))}},togglePoster:function(e){toggleClass(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e,t){var _this23=this;return void 0===t&&(t=!0),t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),ready.call(this).then((function(){return loadImage(e)})).catch((function(t){throw e===_this23.poster&&ui.togglePoster.call(_this23,!1),t})).then((function(){if(e!==_this23.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return _extends(_this23.elements.poster.style,{backgroundImage:"url('"+e+"')",backgroundSize:""}),ui.togglePoster.call(_this23,!0),e})))},checkPlaying:function(e){var _this24=this;toggleClass(this.elements.container,this.config.classNames.playing,this.playing),toggleClass(this.elements.container,this.config.classNames.paused,this.paused),toggleClass(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){_extends(e,{pressed:_this24.playing}),e.setAttribute("aria-label",i18n_get(_this24.playing?"pause":"play",_this24.config))})),is_event(e)&&"timeupdate"===e.type||ui.toggleControls.call(this)},checkLoading:function(e){var _this25=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){toggleClass(_this25.elements.container,_this25.config.classNames.loading,_this25.loading),ui.toggleControls.call(_this25)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles:function(){var _this26=this;Object.values(_extends({},this.media.style)).filter((function(e){return!is_empty(e)&&is_string(e)&&e.startsWith("--plyr")})).forEach((function(e){_this26.elements.container.style.setProperty(e,_this26.media.style.getPropertyValue(e)),_this26.media.style.removeProperty(e)})),is_empty(this.media.style)&&this.media.removeAttribute("style")}},Listeners=function(){function Listeners(e){var _this27=this;_defineProperty$1(this,"firstTouch",(function(){var e=_this27.player,t=e.elements;e.touch=!0,toggleClass(t.container,e.config.classNames.isTouch,!0)})),_defineProperty$1(this,"setTabFocus",(function(e){var t=_this27.player,i=t.elements;if(clearTimeout(_this27.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(_this27.lastKeyDown=e.timeStamp);var s=e.timeStamp-_this27.lastKeyDown<=20;("focus"!==e.type||s)&&(function(){var e=t.config.classNames.tabFocus;toggleClass(getElements.call(t,"."+e),e,!1)}(),"focusout"!==e.type&&(_this27.focusTimer=setTimeout((function(){var e=document.activeElement;i.container.contains(e)&&toggleClass(document.activeElement,t.config.classNames.tabFocus,!0)}),10)))}})),_defineProperty$1(this,"global",(function(e){void 0===e&&(e=!0);var t=_this27.player;t.config.keyboard.global&&toggleListener.call(t,window,"keydown keyup",_this27.handleKey,e,!1),toggleListener.call(t,document.body,"click",_this27.toggleMenu,e),once.call(t,document.body,"touchstart",_this27.firstTouch),toggleListener.call(t,document.body,"keydown focus blur focusout",_this27.setTabFocus,e,!1,!0)})),_defineProperty$1(this,"container",(function(){var e=_this27.player,t=e.config,i=e.elements,s=e.timers;!t.keyboard.global&&t.keyboard.focused&&on.call(e,i.container,"keydown keyup",_this27.handleKey,!1),on.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var n=i.controls;n&&"enterfullscreen"===t.type&&(n.pressed=!1,n.hover=!1);var r=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(ui.toggleControls.call(e,!0),r=e.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout((function(){return ui.toggleControls.call(e,!1)}),r)}));var n=function(t){if(!t)return setAspectRatio.call(e);var s=i.container.getBoundingClientRect(),n=s.width,r=s.height;return setAspectRatio.call(e,n+":"+r)},r=function(){clearTimeout(s.resized),s.resized=setTimeout(n,50)};on.call(e,i.container,"enterfullscreen exitfullscreen",(function(t){var _e$fullscreen=e.fullscreen,s=_e$fullscreen.target,a=_e$fullscreen.usingNative;if(s===i.container&&(e.isEmbed||!is_empty(e.config.ratio))){var o="enterfullscreen"===t.type,_n3=n(o);_n3.padding;(function(t,i,s){if(e.isVimeo&&!e.config.vimeo.premium){var n=e.elements.wrapper.firstChild,r=t[1],_getAspectRatio$call=getAspectRatio.call(e),a=_getAspectRatio$call[0],o=_getAspectRatio$call[1];n.style.maxWidth=s?r/o*a+"px":null,n.style.margin=s?"0 auto":null}})(_n3.ratio,0,o),o&&setTimeout((function(){return repaint(i.container)}),100),a||(o?on.call(e,window,"resize",r):off.call(e,window,"resize",r))}}))})),_defineProperty$1(this,"media",(function(){var e=_this27.player,t=e.elements;if(on.call(e,e.media,"timeupdate seeking seeked",(function(t){return controls.timeUpdate.call(e,t)})),on.call(e,e.media,"durationchange loadeddata loadedmetadata",(function(t){return controls.durationUpdate.call(e,t)})),on.call(e,e.media,"ended",(function(){e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())})),on.call(e,e.media,"progress playing seeking seeked",(function(t){return controls.updateProgress.call(e,t)})),on.call(e,e.media,"volumechange",(function(t){return controls.updateVolume.call(e,t)})),on.call(e,e.media,"playing play pause ended emptied timeupdate",(function(t){return ui.checkPlaying.call(e,t)})),on.call(e,e.media,"waiting canplay seeked playing",(function(t){return ui.checkLoading.call(e,t)})),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){var _i5=getElement.call(e,"."+e.config.classNames.video);if(!is_element(_i5))return;on.call(e,t.container,"click",(function(s){([t.container,_i5].includes(s.target)||_i5.contains(s.target))&&(e.touch&&e.config.hideControls||(e.ended?(_this27.proxy(s,e.restart,"restart"),_this27.proxy(s,(function(){silencePromise(e.play())}),"play")):_this27.proxy(s,(function(){silencePromise(e.togglePlay())}),"play")))}))}e.supported.ui&&e.config.disableContextMenu&&on.call(e,t.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),on.call(e,e.media,"volumechange",(function(){e.storage.set({volume:e.volume,muted:e.muted})})),on.call(e,e.media,"ratechange",(function(){controls.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})})),on.call(e,e.media,"qualitychange",(function(t){controls.updateSetting.call(e,"quality",null,t.detail.quality)})),on.call(e,e.media,"ready qualitychange",(function(){controls.setDownloadUrl.call(e)}));var i=e.config.events.concat(["keyup","keydown"]).join(" ");on.call(e,e.media,i,(function(i){var _i$detail=i.detail,s=void 0===_i$detail?{}:_i$detail;"error"===i.type&&(s=e.media.error),triggerEvent.call(e,t.container,i.type,!0,s)}))})),_defineProperty$1(this,"proxy",(function(e,t,i){var s=_this27.player,n=s.config.listeners[i],r=!0;is_function(n)&&(r=n.call(s,e)),!1!==r&&is_function(t)&&t.call(s,e)})),_defineProperty$1(this,"bind",(function(e,t,i,s,n){void 0===n&&(n=!0);var r=_this27.player,a=r.config.listeners[s],o=is_function(a);on.call(r,e,t,(function(e){return _this27.proxy(e,i,s)}),n&&!o)})),_defineProperty$1(this,"controls",(function(){var e=_this27.player,t=e.elements,i=browser.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach((function(t){_this27.bind(t,"click",(function(){silencePromise(e.togglePlay())}),"play")})),_this27.bind(t.buttons.restart,"click",e.restart,"restart"),_this27.bind(t.buttons.rewind,"click",(function(){e.lastSeekTime=Date.now(),e.rewind()}),"rewind"),_this27.bind(t.buttons.fastForward,"click",(function(){e.lastSeekTime=Date.now(),e.forward()}),"fastForward"),_this27.bind(t.buttons.mute,"click",(function(){e.muted=!e.muted}),"mute"),_this27.bind(t.buttons.captions,"click",(function(){return e.toggleCaptions()})),_this27.bind(t.buttons.download,"click",(function(){triggerEvent.call(e,e.media,"download")}),"download"),_this27.bind(t.buttons.fullscreen,"click",(function(){e.fullscreen.toggle()}),"fullscreen"),_this27.bind(t.buttons.pip,"click",(function(){e.pip="toggle"}),"pip"),_this27.bind(t.buttons.airplay,"click",e.airplay,"airplay"),_this27.bind(t.buttons.settings,"click",(function(t){t.stopPropagation(),t.preventDefault(),controls.toggleMenu.call(e,t)}),null,!1),_this27.bind(t.buttons.settings,"keyup",(function(t){var i=t.which;[13,32].includes(i)&&(13!==i?(t.preventDefault(),t.stopPropagation(),controls.toggleMenu.call(e,t)):controls.focusFirstMenuItem.call(e,null,!0))}),null,!1),_this27.bind(t.settings.menu,"keydown",(function(t){27===t.which&&controls.toggleMenu.call(e,t)})),_this27.bind(t.inputs.seek,"mousedown mousemove",(function(e){var i=t.progress.getBoundingClientRect(),s=100/i.width*(e.pageX-i.left);e.currentTarget.setAttribute("seek-value",s)})),_this27.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(t){var i=t.currentTarget,s=t.keyCode?t.keyCode:t.which,n="play-on-seeked";if(!is_keyboardEvent(t)||39===s||37===s){e.lastSeekTime=Date.now();var r=i.hasAttribute(n),a=["mouseup","touchend","keyup"].includes(t.type);r&&a?(i.removeAttribute(n),silencePromise(e.play())):!a&&e.playing&&(i.setAttribute(n,""),e.pause())}})),browser.isIos){var _t11=getElements.call(e,'input[type="range"]');Array.from(_t11).forEach((function(e){return _this27.bind(e,i,(function(e){return repaint(e.target)}))}))}_this27.bind(t.inputs.seek,i,(function(t){var i=t.currentTarget,s=i.getAttribute("seek-value");is_empty(s)&&(s=i.value),i.removeAttribute("seek-value"),e.currentTime=s/i.max*e.duration}),"seek"),_this27.bind(t.progress,"mouseenter mouseleave mousemove",(function(t){return controls.updateSeekTooltip.call(e,t)})),_this27.bind(t.progress,"mousemove touchmove",(function(t){var i=e.previewThumbnails;i&&i.loaded&&i.startMove(t)})),_this27.bind(t.progress,"mouseleave touchend click",(function(){var t=e.previewThumbnails;t&&t.loaded&&t.endMove(!1,!0)})),_this27.bind(t.progress,"mousedown touchstart",(function(t){var i=e.previewThumbnails;i&&i.loaded&&i.startScrubbing(t)})),_this27.bind(t.progress,"mouseup touchend",(function(t){var i=e.previewThumbnails;i&&i.loaded&&i.endScrubbing(t)})),browser.isWebkit&&Array.from(getElements.call(e,'input[type="range"]')).forEach((function(t){_this27.bind(t,"input",(function(t){return controls.updateRangeFill.call(e,t.target)}))})),e.config.toggleInvert&&!is_element(t.display.duration)&&_this27.bind(t.display.currentTime,"click",(function(){0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,controls.timeUpdate.call(e))})),_this27.bind(t.inputs.volume,i,(function(t){e.volume=t.target.value}),"volume"),_this27.bind(t.controls,"mouseenter mouseleave",(function(i){t.controls.hover=!e.touch&&"mouseenter"===i.type})),t.fullscreen&&Array.from(t.fullscreen.children).filter((function(e){return!e.contains(t.container)})).forEach((function(i){_this27.bind(i,"mouseenter mouseleave",(function(i){t.controls.hover=!e.touch&&"mouseenter"===i.type}))})),_this27.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){t.controls.pressed=["mousedown","touchstart"].includes(e.type)})),_this27.bind(t.controls,"focusin",(function(){var i=e.config,s=e.timers;toggleClass(t.controls,i.classNames.noTransition,!0),ui.toggleControls.call(e,!0),setTimeout((function(){toggleClass(t.controls,i.classNames.noTransition,!1)}),0);var n=_this27.touch?3e3:4e3;clearTimeout(s.controls),s.controls=setTimeout((function(){return ui.toggleControls.call(e,!1)}),n)})),_this27.bind(t.inputs.volume,"wheel",(function(t){var i=t.webkitDirectionInvertedFromDevice,_map=[t.deltaX,-t.deltaY].map((function(e){return i?-e:e})),s=_map[0],n=_map[1],r=Math.sign(Math.abs(s)>Math.abs(n)?s:n);e.increaseVolume(r/50);var a=e.media.volume;(1===r&&a<1||-1===r&&a>0)&&t.preventDefault()}),"volume",!1)})),this.player=e,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}var _proto=Listeners.prototype;return _proto.handleKey=function(e){var t=this.player,i=t.elements,s=e.keyCode?e.keyCode:e.which,n="keydown"===e.type,r=n&&s===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&is_number(s))if(n){var _n4=document.activeElement;if(is_element(_n4)){var _s5=t.config.selectors.editable;if(_n4!==i.inputs.seek&&matches(_n4,_s5))return;if(32===e.which&&matches(_n4,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:r||(t.currentTime=t.duration/10*(s-48));break;case 32:case 75:r||silencePromise(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:r||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:r||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===s&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null},_proto.toggleMenu=function(e){controls.toggleMenu.call(this.player,e)},Listeners}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var loadjs_umd=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){e.exports=function(){var e=function(){},t={},i={},s={};function r(e,t){if(e){var n=s[e];if(i[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function a(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function o(t,i,s,n){var r,a,l=document,c=s.async,u=(s.numRetries||0)+1,d=s.before||e,h=t.replace(/[\?|#].*$/,""),m=t.replace(/^(css|img)!/,"");n=n||0,/(^css!|\.css$)/.test(h)?((a=l.createElement("link")).rel="stylesheet",a.href=m,(r="hideFocus"in a)&&a.relList&&(r=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(h)?(a=l.createElement("img")).src=m:((a=l.createElement("script")).src=t,a.async=void 0===c||c),a.onload=a.onerror=a.onbeforeload=function(e){var l=e.type[0];if(r)try{a.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((n+=1)<u)return o(t,i,s,n)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";i(t,l,e.defaultPrevented)},!1!==d(t,a)&&l.head.appendChild(a)}function l(e,t,i){var s,n,r=(e=e.push?e:[e]).length,a=r,l=[];for(s=function(e,i,_s6){if("e"==i&&l.push(e),"b"==i){if(!_s6)return;l.push(e)}--r||t(l)},n=0;n<a;n++)o(e[n],s,i)}function c(e,i,s){var n,o;if(i&&i.trim&&(n=i),o=(n?s:i)||{},n){if(n in t)throw"LoadJS";t[n]=!0}function c(t,i){l(e,(function(e){a(o,e),t&&a({success:t,error:i},e),r(n,e)}),o)}if(o.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return function(e,t){e=e.push?e:[e];var n,r,a,o=[],l=e.length,c=l;for(n=function(e,i){i.length&&o.push(e),--c||t(o)};l--;)r=e[l],(a=i[r])?n(r,a):(s[r]=s[r]||[]).push(n)}(e,(function(e){a(t,e)})),c},c.done=function(e){r(e,[])},c.reset=function(){t={},i={},s={}},c.isDefined=function(e){return e in t},c}()}));function loadScript(e){return new Promise((function(t,i){loadjs_umd(e,{success:t,error:i})}))}function assurePlaybackState$1(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,triggerEvent.call(this,this.media,e?"play":"pause"))}var vimeo={setup:function(){var e=this;toggleClass(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,setAspectRatio.call(e),is_object(window.Vimeo)?vimeo.ready.call(e):loadScript(e.config.urls.vimeo.sdk).then((function(){vimeo.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var _this28=this,e=this,t=e.config.vimeo,i=t.premium,s=t.referrerPolicy,n=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(t,_excluded);i&&_extends(n,{controls:!1,sidedock:!1});var r=buildUrlParams(_extends({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},n)),a=e.media.getAttribute("src");is_empty(a)&&(a=e.media.getAttribute(e.config.attributes.embed.id));var o=function(e){return is_empty(e)?null:is_number(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e}(a),l=createElement("iframe"),c=format(e.config.urls.vimeo.iframe,o,r);if(l.setAttribute("src",c),l.setAttribute("allowfullscreen",""),l.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),is_empty(s)||l.setAttribute("referrerPolicy",s),i||!t.customControls)l.setAttribute("data-poster",e.poster),e.media=replaceElement(l,e.media);else{var _t12=createElement("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});_t12.appendChild(l),e.media=replaceElement(_t12,e.media)}t.customControls||fetch(format(e.config.urls.vimeo.api,c)).then((function(t){!is_empty(t)&&t.thumbnail_url&&ui.setPoster.call(e,t.thumbnail_url).catch((function(){}))})),e.embed=new window.Vimeo.Player(l,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=function(){return assurePlaybackState$1.call(e,!0),e.embed.play()},e.media.pause=function(){return assurePlaybackState$1.call(e,!1),e.embed.pause()},e.media.stop=function(){e.pause(),e.currentTime=0};var u=e.media.currentTime;Object.defineProperty(e.media,"currentTime",{get:function(){return u},set:function(t){var i=e.embed,s=e.media,n=e.paused,r=e.volume,a=n&&!i.hasPlayed;s.seeking=!0,triggerEvent.call(e,s,"seeking"),Promise.resolve(a&&i.setVolume(0)).then((function(){return i.setCurrentTime(t)})).then((function(){return a&&i.pause()})).then((function(){return a&&i.setVolume(r)})).catch((function(){}))}});var d=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:function(){return d},set:function(t){e.embed.setPlaybackRate(t).then((function(){d=t,triggerEvent.call(e,e.media,"ratechange")})).catch((function(){e.options.speed=[1]}))}});var h=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return h},set:function(t){e.embed.setVolume(t).then((function(){h=t,triggerEvent.call(e,e.media,"volumechange")}))}});var m=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return m},set:function(t){var i=!!is_boolean(t)&&t;e.embed.setVolume(i?0:e.config.volume).then((function(){m=i,triggerEvent.call(e,e.media,"volumechange")}))}});var p,g=e.config.loop;Object.defineProperty(e.media,"loop",{get:function(){return g},set:function(t){var i=is_boolean(t)?t:e.config.loop.active;e.embed.setLoop(i).then((function(){g=i}))}}),e.embed.getVideoUrl().then((function(t){p=t,controls.setDownloadUrl.call(e)})).catch((function(e){_this28.debug.warn(e)})),Object.defineProperty(e.media,"currentSrc",{get:function(){return p}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then((function(t){var i=t[0],s=t[1];e.embed.ratio=[i,s],setAspectRatio.call(_this28)})),e.embed.setAutopause(e.config.autopause).then((function(t){e.config.autopause=t})),e.embed.getVideoTitle().then((function(t){e.config.title=t,ui.setTitle.call(_this28)})),e.embed.getCurrentTime().then((function(t){u=t,triggerEvent.call(e,e.media,"timeupdate")})),e.embed.getDuration().then((function(t){e.media.duration=t,triggerEvent.call(e,e.media,"durationchange")})),e.embed.getTextTracks().then((function(t){e.media.textTracks=t,captions.setup.call(e)})),e.embed.on("cuechange",(function(_ref9){var _ref9$cues=_ref9.cues,i=(void 0===_ref9$cues?[]:_ref9$cues).map((function(e){return function(e){var t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text)}));captions.updateCues.call(e,i)})),e.embed.on("loaded",(function(){e.embed.getPaused().then((function(t){assurePlaybackState$1.call(e,!t),t||triggerEvent.call(e,e.media,"playing")})),is_element(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)})),e.embed.on("bufferstart",(function(){triggerEvent.call(e,e.media,"waiting")})),e.embed.on("bufferend",(function(){triggerEvent.call(e,e.media,"playing")})),e.embed.on("play",(function(){assurePlaybackState$1.call(e,!0),triggerEvent.call(e,e.media,"playing")})),e.embed.on("pause",(function(){assurePlaybackState$1.call(e,!1)})),e.embed.on("timeupdate",(function(t){e.media.seeking=!1,u=t.seconds,triggerEvent.call(e,e.media,"timeupdate")})),e.embed.on("progress",(function(t){e.media.buffered=t.percent,triggerEvent.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&triggerEvent.call(e,e.media,"canplaythrough"),e.embed.getDuration().then((function(t){t!==e.media.duration&&(e.media.duration=t,triggerEvent.call(e,e.media,"durationchange"))}))})),e.embed.on("seeked",(function(){e.media.seeking=!1,triggerEvent.call(e,e.media,"seeked")})),e.embed.on("ended",(function(){e.media.paused=!0,triggerEvent.call(e,e.media,"ended")})),e.embed.on("error",(function(t){e.media.error=t,triggerEvent.call(e,e.media,"error")})),t.customControls&&setTimeout((function(){return ui.build.call(e)}),0)}};function assurePlaybackState(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,triggerEvent.call(this,this.media,e?"play":"pause"))}function getHost(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var youtube={setup:function(){var _this29=this;if(toggleClass(this.elements.wrapper,this.config.classNames.embed,!0),is_object(window.YT)&&is_function(window.YT.Player))youtube.ready.call(this);else{var e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){is_function(e)&&e(),youtube.ready.call(_this29)},loadScript(this.config.urls.youtube.sdk).catch((function(e){_this29.debug.warn("YouTube API failed to load",e)}))}},getTitle:function(e){var _this30=this;fetch(format(this.config.urls.youtube.api,e)).then((function(e){if(is_object(e)){var t=e.title,i=e.height,s=e.width;_this30.config.title=t,ui.setTitle.call(_this30),_this30.embed.ratio=[s,i]}setAspectRatio.call(_this30)})).catch((function(){setAspectRatio.call(_this30)}))},ready:function(){var e=this,t=e.config.youtube,i=e.media&&e.media.getAttribute("id");if(is_empty(i)||!i.startsWith("youtube-")){var s=e.media.getAttribute("src");is_empty(s)&&(s=e.media.getAttribute(this.config.attributes.embed.id));var n=function(e){return is_empty(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e}(s),r=createElement("div",{id:generateId(e.provider),"data-poster":t.customControls?e.poster:void 0});if(e.media=replaceElement(r,e.media),t.customControls){var _t13=function(e){return"https://i.ytimg.com/vi/"+n+"/"+e+"default.jpg"};loadImage(_t13("maxres"),121).catch((function(){return loadImage(_t13("sd"),121)})).catch((function(){return loadImage(_t13("hq"))})).then((function(t){return ui.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}e.embed=new window.YT.Player(e.media,{videoId:n,host:getHost(t),playerVars:extend({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError:function(t){if(!e.media.error){var _i6=t.data,_s7={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[_i6]||"An unknown error occured";e.media.error={code:_i6,message:_s7},triggerEvent.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var i=t.target;e.media.playbackRate=i.getPlaybackRate(),triggerEvent.call(e,e.media,"ratechange")},onReady:function(i){if(!is_function(e.media.play)){var s=i.target;youtube.getTitle.call(e,n),e.media.play=function(){assurePlaybackState.call(e,!0),s.playVideo()},e.media.pause=function(){assurePlaybackState.call(e,!1),s.pauseVideo()},e.media.stop=function(){s.stopVideo()},e.media.duration=s.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(s.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,triggerEvent.call(e,e.media,"seeking"),s.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return s.getPlaybackRate()},set:function(e){s.setPlaybackRate(e)}});var r=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return r},set:function(t){r=t,s.setVolume(100*r),triggerEvent.call(e,e.media,"volumechange")}});var a=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return a},set:function(t){var i=is_boolean(t)?t:a;a=i,s[i?"mute":"unMute"](),s.setVolume(100*r),triggerEvent.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return s.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var o=s.getAvailablePlaybackRates();e.options.speed=o.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),triggerEvent.call(e,e.media,"timeupdate"),triggerEvent.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=s.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&triggerEvent.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),triggerEvent.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((function(){return ui.build.call(e)}),50)}},onStateChange:function(i){var s=i.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(i.data)&&(e.media.seeking=!1,triggerEvent.call(e,e.media,"seeked")),i.data){case-1:triggerEvent.call(e,e.media,"timeupdate"),e.media.buffered=s.getVideoLoadedFraction(),triggerEvent.call(e,e.media,"progress");break;case 0:assurePlaybackState.call(e,!1),e.media.loop?(s.stopVideo(),s.playVideo()):triggerEvent.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(assurePlaybackState.call(e,!0),triggerEvent.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){triggerEvent.call(e,e.media,"timeupdate")}),50),e.media.duration!==s.getDuration()&&(e.media.duration=s.getDuration(),triggerEvent.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),assurePlaybackState.call(e,!1);break;case 3:triggerEvent.call(e,e.media,"waiting")}triggerEvent.call(e,e.elements.container,"statechange",!1,{code:i.data})}}})}}},media={setup:function(){this.media?(toggleClass(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),toggleClass(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&toggleClass(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=createElement("div",{class:this.config.classNames.video}),wrap(this.media,this.elements.wrapper),this.elements.poster=createElement("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?html5.setup.call(this):this.isYouTube?youtube.setup.call(this):this.isVimeo&&vimeo.setup.call(this)):this.debug.warn("No media element found!")}},Ads=function(){function Ads(e){var _this31=this;_defineProperty$1(this,"load",(function(){_this31.enabled&&(is_object(window.google)&&is_object(window.google.ima)?_this31.ready():loadScript(_this31.player.config.urls.googleIMA.sdk).then((function(){_this31.ready()})).catch((function(){_this31.trigger("error",new Error("Google IMA SDK failed to load"))})))})),_defineProperty$1(this,"ready",(function(){var e;_this31.enabled||((e=_this31).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),_this31.startSafetyTimer(12e3,"ready()"),_this31.managerPromise.then((function(){_this31.clearSafetyTimer("onAdsManagerLoaded()")})),_this31.listeners(),_this31.setupIMA()})),_defineProperty$1(this,"setupIMA",(function(){_this31.elements.container=createElement("div",{class:_this31.player.config.classNames.ads}),_this31.player.elements.container.appendChild(_this31.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(_this31.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(_this31.player.config.playsinline),_this31.elements.displayContainer=new google.ima.AdDisplayContainer(_this31.elements.container,_this31.player.media),_this31.loader=new google.ima.AdsLoader(_this31.elements.displayContainer),_this31.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){return _this31.onAdsManagerLoaded(e)}),!1),_this31.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return _this31.onAdError(e)}),!1),_this31.requestAds()})),_defineProperty$1(this,"requestAds",(function(){var e=_this31.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=_this31.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!_this31.player.muted),_this31.loader.requestAds(t)}catch(e){_this31.onAdError(e)}})),_defineProperty$1(this,"pollCountdown",(function(e){if(void 0===e&&(e=!1),!e)return clearInterval(_this31.countdownTimer),void _this31.elements.container.removeAttribute("data-badge-text");_this31.countdownTimer=setInterval((function(){var e=_formatTime(Math.max(_this31.manager.getRemainingTime(),0)),t=i18n_get("advertisement",_this31.player.config)+" - "+e;_this31.elements.container.setAttribute("data-badge-text",t)}),100)})),_defineProperty$1(this,"onAdsManagerLoaded",(function(e){if(_this31.enabled){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,_this31.manager=e.getAdsManager(_this31.player,t),_this31.cuePoints=_this31.manager.getCuePoints(),_this31.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return _this31.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){_this31.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return _this31.onAdEvent(e)}))})),_this31.trigger("loaded")}})),_defineProperty$1(this,"addCuePoints",(function(){is_empty(_this31.cuePoints)||_this31.cuePoints.forEach((function(e){if(0!==e&&-1!==e&&e<_this31.player.duration){var t=_this31.player.elements.progress;if(is_element(t)){var i=100/_this31.player.duration*e,s=createElement("span",{class:_this31.player.config.classNames.cues});s.style.left=i.toString()+"%",t.appendChild(s)}}}))})),_defineProperty$1(this,"onAdEvent",(function(e){var t=_this31.player.elements.container,i=e.getAd(),s=e.getAdData();switch(function(e){triggerEvent.call(_this31.player,_this31.player.media,"ads"+e.replace(/_/g,"").toLowerCase())}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:_this31.trigger("loaded"),_this31.pollCountdown(!0),i.isLinear()||(i.width=t.offsetWidth,i.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:_this31.manager.setVolume(_this31.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:_this31.player.ended?_this31.loadAds():_this31.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:_this31.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:_this31.pollCountdown(),_this31.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&_this31.player.debug.warn("Non-fatal ad error: "+s.adError.getMessage())}})),_defineProperty$1(this,"onAdError",(function(e){_this31.cancel(),_this31.player.debug.warn("Ads error",e)})),_defineProperty$1(this,"listeners",(function(){var t,e=_this31.player.elements.container;_this31.player.on("canplay",(function(){_this31.addCuePoints()})),_this31.player.on("ended",(function(){_this31.loader.contentComplete()})),_this31.player.on("timeupdate",(function(){t=_this31.player.currentTime})),_this31.player.on("seeked",(function(){var e=_this31.player.currentTime;is_empty(_this31.cuePoints)||_this31.cuePoints.forEach((function(i,s){t<i&&i<e&&(_this31.manager.discardAdBreak(),_this31.cuePoints.splice(s,1))}))})),window.addEventListener("resize",(function(){_this31.manager&&_this31.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)}))})),_defineProperty$1(this,"play",(function(){var e=_this31.player.elements.container;_this31.managerPromise||_this31.resumeContent(),_this31.managerPromise.then((function(){_this31.manager.setVolume(_this31.player.volume),_this31.elements.displayContainer.initialize();try{_this31.initialized||(_this31.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),_this31.manager.start()),_this31.initialized=!0}catch(e){_this31.onAdError(e)}})).catch((function(){}))})),_defineProperty$1(this,"resumeContent",(function(){_this31.elements.container.style.zIndex="",_this31.playing=!1,silencePromise(_this31.player.media.play())})),_defineProperty$1(this,"pauseContent",(function(){_this31.elements.container.style.zIndex=3,_this31.playing=!0,_this31.player.media.pause()})),_defineProperty$1(this,"cancel",(function(){_this31.initialized&&_this31.resumeContent(),_this31.trigger("error"),_this31.loadAds()})),_defineProperty$1(this,"loadAds",(function(){_this31.managerPromise.then((function(){_this31.manager&&_this31.manager.destroy(),_this31.managerPromise=new Promise((function(e){_this31.on("loaded",e),_this31.player.debug.log(_this31.manager)})),_this31.initialized=!1,_this31.requestAds()})).catch((function(){}))})),_defineProperty$1(this,"trigger",(function(e){for(var _len4=arguments.length,t=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)t[_key4-1]=arguments[_key4];var i=_this31.events[e];is_array(i)&&i.forEach((function(e){is_function(e)&&e.apply(_this31,t)}))})),_defineProperty$1(this,"on",(function(e,t){return is_array(_this31.events[e])||(_this31.events[e]=[]),_this31.events[e].push(t),_this31})),_defineProperty$1(this,"startSafetyTimer",(function(e,t){_this31.player.debug.log("Safety timer invoked from: "+t),_this31.safetyTimer=setTimeout((function(){_this31.cancel(),_this31.clearSafetyTimer("startSafetyTimer()")}),e)})),_defineProperty$1(this,"clearSafetyTimer",(function(e){is_nullOrUndefined(_this31.safetyTimer)||(_this31.player.debug.log("Safety timer cleared from: "+e),clearTimeout(_this31.safetyTimer),_this31.safetyTimer=null)})),this.player=e,this.config=e.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){_this31.on("loaded",e),_this31.on("error",t)})),this.load()}return _createClass2(Ads,[{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!is_empty(e.publisherId)||is_url(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;return is_url(e.tagUrl)?e.tagUrl:"https://go.aniview.com/api/adserver6/vast/?"+buildUrlParams({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}}]),Ads}(),parseVtt=function(e){var t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var i={};e.split(/\r\n|\n|\r/).forEach((function(e){if(is_number(i.startTime)){if(!is_empty(e.trim())&&is_empty(i.text)){var _t15,_t14$1$split,_t14=e.trim().split("#xywh=");_t15=_t14,i.text=_t15[0],_t14[1]&&(_t14$1$split=_t14[1].split(","),i.x=_t14$1$split[0],i.y=_t14$1$split[1],i.w=_t14$1$split[2],i.h=_t14$1$split[3])}}else{var _t16=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);_t16&&(i.startTime=60*Number(_t16[1]||0)*60+60*Number(_t16[2])+Number(_t16[3])+Number("0."+_t16[4]),i.endTime=60*Number(_t16[6]||0)*60+60*Number(_t16[7])+Number(_t16[8])+Number("0."+_t16[9]))}})),i.text&&t.push(i)})),t},fitRatio=function(e,t){var i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i},PreviewThumbnails=function(){function PreviewThumbnails(e){var _this32=this;_defineProperty$1(this,"load",(function(){_this32.player.elements.display.seekTooltip&&(_this32.player.elements.display.seekTooltip.hidden=_this32.enabled),_this32.enabled&&_this32.getThumbnails().then((function(){_this32.enabled&&(_this32.render(),_this32.determineContainerAutoSizing(),_this32.loaded=!0)}))})),_defineProperty$1(this,"getThumbnails",(function(){return new Promise((function(e){var t=_this32.player.config.previewThumbnails.src;if(is_empty(t))throw new Error("Missing previewThumbnails.src config attribute");var i=function(){_this32.thumbnails.sort((function(e,t){return e.height-t.height})),_this32.player.debug.log("Preview thumbnails",_this32.thumbnails),e()};if(is_function(t))t((function(e){_this32.thumbnails=e,i()}));else{var _e24=(is_string(t)?[t]:t).map((function(e){return _this32.getThumbnail(e)}));Promise.all(_e24).then(i)}}))})),_defineProperty$1(this,"getThumbnail",(function(e){return new Promise((function(t){fetch(e).then((function(i){var s={frames:parseVtt(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var n=new Image;n.onload=function(){s.height=n.naturalHeight,s.width=n.naturalWidth,_this32.thumbnails.push(s),t()},n.src=s.urlPrefix+s.frames[0].text}))}))})),_defineProperty$1(this,"startMove",(function(e){if(_this32.loaded&&is_event(e)&&["touchmove","mousemove"].includes(e.type)&&_this32.player.media.duration){if("touchmove"===e.type)_this32.seekTime=_this32.player.media.duration*(_this32.player.elements.inputs.seek.value/100);else{var t=_this32.player.elements.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);_this32.seekTime=_this32.player.media.duration*(i/100),_this32.seekTime<0&&(_this32.seekTime=0),_this32.seekTime>_this32.player.media.duration-1&&(_this32.seekTime=_this32.player.media.duration-1),_this32.mousePosX=e.pageX,_this32.elements.thumb.time.innerText=_formatTime(_this32.seekTime)}_this32.showImageAtCurrentTime()}})),_defineProperty$1(this,"endMove",(function(){_this32.toggleThumbContainer(!1,!0)})),_defineProperty$1(this,"startScrubbing",(function(e){(is_nullOrUndefined(e.button)||!1===e.button||0===e.button)&&(_this32.mouseDown=!0,_this32.player.media.duration&&(_this32.toggleScrubbingContainer(!0),_this32.toggleThumbContainer(!1,!0),_this32.showImageAtCurrentTime()))})),_defineProperty$1(this,"endScrubbing",(function(){_this32.mouseDown=!1,Math.ceil(_this32.lastTime)===Math.ceil(_this32.player.media.currentTime)?_this32.toggleScrubbingContainer(!1):once.call(_this32.player,_this32.player.media,"timeupdate",(function(){_this32.mouseDown||_this32.toggleScrubbingContainer(!1)}))})),_defineProperty$1(this,"listeners",(function(){_this32.player.on("play",(function(){_this32.toggleThumbContainer(!1,!0)})),_this32.player.on("seeked",(function(){_this32.toggleThumbContainer(!1)})),_this32.player.on("timeupdate",(function(){_this32.lastTime=_this32.player.media.currentTime}))})),_defineProperty$1(this,"render",(function(){_this32.elements.thumb.container=createElement("div",{class:_this32.player.config.classNames.previewThumbnails.thumbContainer}),_this32.elements.thumb.imageContainer=createElement("div",{class:_this32.player.config.classNames.previewThumbnails.imageContainer}),_this32.elements.thumb.container.appendChild(_this32.elements.thumb.imageContainer);var e=createElement("div",{class:_this32.player.config.classNames.previewThumbnails.timeContainer});_this32.elements.thumb.time=createElement("span",{},"00:00"),e.appendChild(_this32.elements.thumb.time),_this32.elements.thumb.container.appendChild(e),is_element(_this32.player.elements.progress)&&_this32.player.elements.progress.appendChild(_this32.elements.thumb.container),_this32.elements.scrubbing.container=createElement("div",{class:_this32.player.config.classNames.previewThumbnails.scrubbingContainer}),_this32.player.elements.wrapper.appendChild(_this32.elements.scrubbing.container)})),_defineProperty$1(this,"destroy",(function(){_this32.elements.thumb.container&&_this32.elements.thumb.container.remove(),_this32.elements.scrubbing.container&&_this32.elements.scrubbing.container.remove()})),_defineProperty$1(this,"showImageAtCurrentTime",(function(){_this32.mouseDown?_this32.setScrubbingContainerSize():_this32.setThumbContainerSizeAndPos();var e=_this32.thumbnails[0].frames.findIndex((function(e){return _this32.seekTime>=e.startTime&&_this32.seekTime<=e.endTime})),t=e>=0,i=0;_this32.mouseDown||_this32.toggleThumbContainer(t),t&&(_this32.thumbnails.forEach((function(t,s){_this32.loadedImages.includes(t.frames[e].text)&&(i=s)})),e!==_this32.showingThumb&&(_this32.showingThumb=e,_this32.loadImage(i)))})),_defineProperty$1(this,"loadImage",(function(e){void 0===e&&(e=0);var t=_this32.showingThumb,i=_this32.thumbnails[e],s=i.urlPrefix,n=i.frames[t],r=i.frames[t].text,a=s+r;if(_this32.currentImageElement&&_this32.currentImageElement.dataset.filename===r)_this32.showImage(_this32.currentImageElement,n,e,t,r,!1),_this32.currentImageElement.dataset.index=t,_this32.removeOldImages(_this32.currentImageElement);else{_this32.loadingImage&&_this32.usingSprites&&(_this32.loadingImage.onload=null);var _i7=new Image;_i7.src=a,_i7.dataset.index=t,_i7.dataset.filename=r,_this32.showingThumbFilename=r,_this32.player.debug.log("Loading image: "+a),_i7.onload=function(){return _this32.showImage(_i7,n,e,t,r,!0)},_this32.loadingImage=_i7,_this32.removeOldImages(_i7)}})),_defineProperty$1(this,"showImage",(function(e,t,i,s,n,r){void 0===r&&(r=!0),_this32.player.debug.log("Showing thumb: "+n+". num: "+s+". qual: "+i+". newimg: "+r),_this32.setImageSizeAndOffset(e,t),r&&(_this32.currentImageContainer.appendChild(e),_this32.currentImageElement=e,_this32.loadedImages.includes(n)||_this32.loadedImages.push(n)),_this32.preloadNearby(s,!0).then(_this32.preloadNearby(s,!1)).then(_this32.getHigherQuality(i,e,t,n))})),_defineProperty$1(this,"removeOldImages",(function(e){Array.from(_this32.currentImageContainer.children).forEach((function(t){if("img"===t.tagName.toLowerCase()){var i=_this32.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;var _e25=_this32.currentImageContainer;setTimeout((function(){_e25.removeChild(t),_this32.player.debug.log("Removing thumb: "+t.dataset.filename)}),i)}}}))})),_defineProperty$1(this,"preloadNearby",(function(e,t){return void 0===t&&(t=!0),new Promise((function(i){setTimeout((function(){var s=_this32.thumbnails[0].frames[e].text;if(_this32.showingThumbFilename===s){var n;n=t?_this32.thumbnails[0].frames.slice(e):_this32.thumbnails[0].frames.slice(0,e).reverse();var r=!1;n.forEach((function(e){var t=e.text;if(t!==s&&!_this32.loadedImages.includes(t)){r=!0,_this32.player.debug.log("Preloading thumb filename: "+t);var _s8=_this32.thumbnails[0].urlPrefix+t,_n5=new Image;_n5.src=_s8,_n5.onload=function(){_this32.player.debug.log("Preloaded thumb filename: "+t),_this32.loadedImages.includes(t)||_this32.loadedImages.push(t),i()}}})),r||i()}}),300)}))})),_defineProperty$1(this,"getHigherQuality",(function(e,t,i,s){if(e<_this32.thumbnails.length-1){var n=t.naturalHeight;_this32.usingSprites&&(n=i.h),n<_this32.thumbContainerHeight&&setTimeout((function(){_this32.showingThumbFilename===s&&(_this32.player.debug.log("Showing higher quality thumb for: "+s),_this32.loadImage(e+1))}),300)}})),_defineProperty$1(this,"toggleThumbContainer",(function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=_this32.player.config.classNames.previewThumbnails.thumbContainerShown;_this32.elements.thumb.container.classList.toggle(i,e),!e&&t&&(_this32.showingThumb=null,_this32.showingThumbFilename=null)})),_defineProperty$1(this,"toggleScrubbingContainer",(function(e){void 0===e&&(e=!1);var t=_this32.player.config.classNames.previewThumbnails.scrubbingContainerShown;_this32.elements.scrubbing.container.classList.toggle(t,e),e||(_this32.showingThumb=null,_this32.showingThumbFilename=null)})),_defineProperty$1(this,"determineContainerAutoSizing",(function(){(_this32.elements.thumb.imageContainer.clientHeight>20||_this32.elements.thumb.imageContainer.clientWidth>20)&&(_this32.sizeSpecifiedInCSS=!0)})),_defineProperty$1(this,"setThumbContainerSizeAndPos",(function(){if(_this32.sizeSpecifiedInCSS){if(_this32.elements.thumb.imageContainer.clientHeight>20&&_this32.elements.thumb.imageContainer.clientWidth<20){var _e27=Math.floor(_this32.elements.thumb.imageContainer.clientHeight*_this32.thumbAspectRatio);_this32.elements.thumb.imageContainer.style.width=_e27+"px"}else if(_this32.elements.thumb.imageContainer.clientHeight<20&&_this32.elements.thumb.imageContainer.clientWidth>20){var _e28=Math.floor(_this32.elements.thumb.imageContainer.clientWidth/_this32.thumbAspectRatio);_this32.elements.thumb.imageContainer.style.height=_e28+"px"}}else{var _e29=Math.floor(_this32.thumbContainerHeight*_this32.thumbAspectRatio);_this32.elements.thumb.imageContainer.style.height=_this32.thumbContainerHeight+"px",_this32.elements.thumb.imageContainer.style.width=_e29+"px"}_this32.setThumbContainerPos()})),_defineProperty$1(this,"setThumbContainerPos",(function(){var e=_this32.player.elements.progress.getBoundingClientRect(),t=_this32.player.elements.container.getBoundingClientRect(),i=_this32.elements.thumb.container,s=t.left-e.left+10,n=t.right-e.left-i.clientWidth-10,r=_this32.mousePosX-e.left-i.clientWidth/2;r<s&&(r=s),r>n&&(r=n),i.style.left=r+"px"})),_defineProperty$1(this,"setScrubbingContainerSize",(function(){var _fitRatio=fitRatio(_this32.thumbAspectRatio,{width:_this32.player.media.clientWidth,height:_this32.player.media.clientHeight}),e=_fitRatio.width,t=_fitRatio.height;_this32.elements.scrubbing.container.style.width=e+"px",_this32.elements.scrubbing.container.style.height=t+"px"})),_defineProperty$1(this,"setImageSizeAndOffset",(function(e,t){if(_this32.usingSprites){var i=_this32.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*i+"px",e.style.width=e.naturalWidth*i+"px",e.style.left="-"+t.x*i+"px",e.style.top="-"+t.y*i+"px"}})),this.player=e,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return _createClass2(PreviewThumbnails,[{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),PreviewThumbnails}(),source={insertElements:function(e,t){var _this33=this;is_string(t)?insertElement(e,this.media,{src:t}):is_array(t)&&t.forEach((function(t){insertElement(e,_this33.media,t)}))},change:function(e){var _this34=this;getDeep(e,"sources.length")?(html5.cancelRequests.call(this),this.destroy.call(this,(function(){_this34.options.quality=[],removeElement(_this34.media),_this34.media=null,is_element(_this34.elements.container)&&_this34.elements.container.removeAttribute("class");var t=e.sources,i=e.type,_t$=t[0],_t$$provider=_t$.provider,s=void 0===_t$$provider?providers.html5:_t$$provider,n=_t$.src,r="html5"===s?i:"div",a="html5"===s?{}:{src:n};_extends(_this34,{provider:s,type:i,supported:support.check(i,s,_this34.config.playsinline),media:createElement(r,a)}),_this34.elements.container.appendChild(_this34.media),is_boolean(e.autoplay)&&(_this34.config.autoplay=e.autoplay),_this34.isHTML5&&(_this34.config.crossorigin&&_this34.media.setAttribute("crossorigin",""),_this34.config.autoplay&&_this34.media.setAttribute("autoplay",""),is_empty(e.poster)||(_this34.poster=e.poster),_this34.config.loop.active&&_this34.media.setAttribute("loop",""),_this34.config.muted&&_this34.media.setAttribute("muted",""),_this34.config.playsinline&&_this34.media.setAttribute("playsinline","")),ui.addStyleHook.call(_this34),_this34.isHTML5&&source.insertElements.call(_this34,"source",t),_this34.config.title=e.title,media.setup.call(_this34),_this34.isHTML5&&Object.keys(e).includes("tracks")&&source.insertElements.call(_this34,"track",e.tracks),(_this34.isHTML5||_this34.isEmbed&&!_this34.supported.ui)&&ui.build.call(_this34),_this34.isHTML5&&_this34.media.load(),is_empty(e.previewThumbnails)||(_extends(_this34.config.previewThumbnails,e.previewThumbnails),_this34.previewThumbnails&&_this34.previewThumbnails.loaded&&(_this34.previewThumbnails.destroy(),_this34.previewThumbnails=null),_this34.config.previewThumbnails.enabled&&(_this34.previewThumbnails=new PreviewThumbnails(_this34))),_this34.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};var Plyr=function(){function Plyr(e,t){var _this35=this;if(_defineProperty$1(this,"play",(function(){return is_function(_this35.media.play)?(_this35.ads&&_this35.ads.enabled&&_this35.ads.managerPromise.then((function(){return _this35.ads.play()})).catch((function(){return silencePromise(_this35.media.play())})),_this35.media.play()):null})),_defineProperty$1(this,"pause",(function(){return _this35.playing&&is_function(_this35.media.pause)?_this35.media.pause():null})),_defineProperty$1(this,"togglePlay",(function(e){return(is_boolean(e)?e:!_this35.playing)?_this35.play():_this35.pause()})),_defineProperty$1(this,"stop",(function(){_this35.isHTML5?(_this35.pause(),_this35.restart()):is_function(_this35.media.stop)&&_this35.media.stop()})),_defineProperty$1(this,"restart",(function(){_this35.currentTime=0})),_defineProperty$1(this,"rewind",(function(e){_this35.currentTime-=is_number(e)?e:_this35.config.seekTime})),_defineProperty$1(this,"forward",(function(e){_this35.currentTime+=is_number(e)?e:_this35.config.seekTime})),_defineProperty$1(this,"increaseVolume",(function(e){var t=_this35.media.muted?0:_this35.volume;_this35.volume=t+(is_number(e)?e:0)})),_defineProperty$1(this,"decreaseVolume",(function(e){_this35.increaseVolume(-e)})),_defineProperty$1(this,"airplay",(function(){support.airplay&&_this35.media.webkitShowPlaybackTargetPicker()})),_defineProperty$1(this,"toggleControls",(function(e){if(_this35.supported.ui&&!_this35.isAudio){var _t17=hasClass(_this35.elements.container,_this35.config.classNames.hideControls),_i8=void 0===e?void 0:!e,_s9=toggleClass(_this35.elements.container,_this35.config.classNames.hideControls,_i8);if(_s9&&is_array(_this35.config.controls)&&_this35.config.controls.includes("settings")&&!is_empty(_this35.config.settings)&&controls.toggleMenu.call(_this35,!1),_s9!==_t17){var _e30=_s9?"controlshidden":"controlsshown";triggerEvent.call(_this35,_this35.media,_e30)}return!_s9}return!1})),_defineProperty$1(this,"on",(function(e,t){on.call(_this35,_this35.elements.container,e,t)})),_defineProperty$1(this,"once",(function(e,t){once.call(_this35,_this35.elements.container,e,t)})),_defineProperty$1(this,"off",(function(e,t){off(_this35.elements.container,e,t)})),_defineProperty$1(this,"destroy",(function(e,t){if(void 0===t&&(t=!1),_this35.ready){var i=function(){document.body.style.overflow="",_this35.embed=null,t?(Object.keys(_this35.elements).length&&(removeElement(_this35.elements.buttons.play),removeElement(_this35.elements.captions),removeElement(_this35.elements.controls),removeElement(_this35.elements.wrapper),_this35.elements.buttons.play=null,_this35.elements.captions=null,_this35.elements.controls=null,_this35.elements.wrapper=null),is_function(e)&&e()):(unbindListeners.call(_this35),html5.cancelRequests.call(_this35),replaceElement(_this35.elements.original,_this35.elements.container),triggerEvent.call(_this35,_this35.elements.original,"destroyed",!0),is_function(e)&&e.call(_this35.elements.original),_this35.ready=!1,setTimeout((function(){_this35.elements=null,_this35.media=null}),200))};_this35.stop(),clearTimeout(_this35.timers.loading),clearTimeout(_this35.timers.controls),clearTimeout(_this35.timers.resized),_this35.isHTML5?(ui.toggleNativeControls.call(_this35,!0),i()):_this35.isYouTube?(clearInterval(_this35.timers.buffering),clearInterval(_this35.timers.playing),null!==_this35.embed&&is_function(_this35.embed.destroy)&&_this35.embed.destroy(),i()):_this35.isVimeo&&(null!==_this35.embed&&_this35.embed.unload().then(i),setTimeout(i,200))}})),_defineProperty$1(this,"supports",(function(e){return support.mime.call(_this35,e)})),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=support.touch,this.media=e,is_string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||is_nodeList(this.media)||is_array(this.media))&&(this.media=this.media[0]),this.config=extend({},defaults,Plyr.defaults,t||{},function(){try{return JSON.parse(_this35.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Console(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",support),!is_nullOrUndefined(this.media)&&is_element(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(support.check().api){var i=this.media.cloneNode(!0);i.autoplay=!1,this.elements.original=i;var s=this.media.tagName.toLowerCase(),n=null,r=null;switch(s){case"div":if(n=this.media.querySelector("iframe"),is_element(n)){if(r=parseUrl(n.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?providers.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?providers.vimeo:null}(r.toString()),this.elements.container=this.media,this.media=n,this.elements.container.className="",r.search.length){var _e31=["1","true"];_e31.includes(r.searchParams.get("autoplay"))&&(this.config.autoplay=!0),_e31.includes(r.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=_e31.includes(r.searchParams.get("playsinline")),this.config.youtube.hl=r.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(is_empty(this.provider)||!Object.values(providers).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=types_video;break;case"video":case"audio":this.type=s,this.provider=providers.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=support.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new Listeners(this),this.storage=new Storage(this),this.media.plyr=this,is_element(this.elements.container)||(this.elements.container=createElement("div",{tabindex:0}),wrap(this.media,this.elements.container)),ui.migrateStyles.call(this),ui.addStyleHook.call(this),media.setup.call(this),this.config.debug&&on.call(this,this.elements.container,this.config.events.join(" "),(function(e){_this35.debug.log("event: "+e.type)})),this.fullscreen=new Fullscreen(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ui.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Ads(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return silencePromise(_this35.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return Plyr.prototype.toggleCaptions=function(e){captions.toggle.call(this,e,!1)},Plyr.supported=function(e,t,i){return support.check(e,t,i)},Plyr.loadSprite=function(e,t){return _loadSprite(e,t)},Plyr.setup=function(e,t){void 0===t&&(t={});var i=null;return is_string(e)?i=Array.from(document.querySelectorAll(e)):is_nodeList(e)?i=Array.from(e):is_array(e)&&(i=e.filter(is_element)),is_empty(i)?null:i.map((function(e){return new Plyr(e,t)}))},_createClass2(Plyr,[{key:"isHTML5",get:function(){return this.provider===providers.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===providers.youtube}},{key:"isVimeo",get:function(){return this.provider===providers.vimeo}},{key:"isVideo",get:function(){return this.type===types_video}},{key:"isAudio",get:function(){return this.type===types_audio}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",get:function(){return Number(this.media.currentTime)},set:function(e){if(this.duration){var t=is_number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to "+this.currentTime+" seconds")}}},{key:"buffered",get:function(){var e=this.media.buffered;return is_number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=is_number(t)&&t!==1/0?t:0;return e||i}},{key:"volume",get:function(){return Number(this.media.volume)},set:function(e){var t=e;is_string(t)&&(t=Number(t)),is_number(t)||(t=this.storage.get("volume")),is_number(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!is_empty(e)&&this.muted&&t>0&&(this.muted=!1)}},{key:"muted",get:function(){return Boolean(this.media.muted)},set:function(e){var t=e;is_boolean(t)||(t=this.storage.get("muted")),is_boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}},{key:"hasAudio",get:function(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}},{key:"speed",get:function(){return Number(this.media.playbackRate)},set:function(e){var _this36=this,t=null;is_number(e)&&(t=e),is_number(t)||(t=this.storage.get("speed")),is_number(t)||(t=this.config.speed.selected);var i=this.minimumSpeed,s=this.maximumSpeed;t=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=255),Math.min(Math.max(e,t),i)}(t,i,s),this.config.speed.selected=t,setTimeout((function(){_this36.media.playbackRate=t}),0)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,this.options.speed):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,this.options.speed):this.isVimeo?2:16}},{key:"quality",get:function(){return this.media.quality},set:function(e){var t=this.config.quality,i=this.options.quality;if(i.length){var s=[!is_empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(is_number),n=!0;if(!i.includes(s)){var _e32=function(e,t){return is_array(e)&&e.length?e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e})):null}(i,s);this.debug.warn("Unsupported quality option: "+s+", using "+_e32+" instead"),s=_e32,n=!1}t.selected=s,this.media.quality=s,n&&this.storage.set({quality:s})}}},{key:"loop",get:function(){return Boolean(this.media.loop)},set:function(e){var t=is_boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}},{key:"source",get:function(){return this.media.currentSrc},set:function(e){source.change.call(this,e)}},{key:"download",get:function(){var e=this.config.urls.download;return is_url(e)?e:this.source},set:function(e){is_url(e)&&(this.config.urls.download=e,controls.setDownloadUrl.call(this))}},{key:"poster",get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null},set:function(e){this.isVideo?ui.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=reduceAspectRatio(getAspectRatio.call(this));return is_array(e)?e.join(":"):e},set:function(e){this.isVideo?is_string(e)&&validateRatio(e)?(this.config.ratio=e,setAspectRatio.call(this)):this.debug.error("Invalid aspect ratio specified ("+e+")"):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",get:function(){return Boolean(this.config.autoplay)},set:function(e){var t=is_boolean(e)?e:this.config.autoplay;this.config.autoplay=t}},{key:"currentTrack",get:function(){var _this$captions2=this.captions,e=_this$captions2.toggled,t=_this$captions2.currentTrack;return e?t:-1},set:function(e){captions.set.call(this,e,!1)}},{key:"language",get:function(){return(captions.getCurrentTrack.call(this)||{}).language},set:function(e){captions.setLanguage.call(this,e,!1)}},{key:"pip",get:function(){return support.pip?is_empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===pip_active:null},set:function(e){if(support.pip){var t=is_boolean(e)?e:!this.pip;is_function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?pip_active:pip_inactive),is_function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}}}]),Plyr}();Plyr.defaults=function(e){return JSON.parse(JSON.stringify(e))}(defaults),__webpack_exports__.a=Plyr},B8jV:function(module,exports,__webpack_require__){"use strict";var validate,status,fn,set,isObject=__webpack_require__("V7B1"),value=__webpack_require__("EmFb"),objIsPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:!0,enumerable:!1,writable:!0,value:void 0};validate=function(obj,prototype){if(value(obj),null===prototype||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")},module.exports=(status=function(){var set,tmpObj1=Object.create(null),tmpObj2={},desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{(set=desc.set).call(tmpObj1,tmpObj2)}catch(ignore){}if(Object.getPrototypeOf(tmpObj1)===tmpObj2)return{set:set,level:2}}return tmpObj1.__proto__=tmpObj2,Object.getPrototypeOf(tmpObj1)===tmpObj2?{level:2}:((tmpObj1={}).__proto__=tmpObj2,Object.getPrototypeOf(tmpObj1)===tmpObj2&&{level:1})}(),status?(2===status.level?status.set?(set=status.set,fn=function(obj,prototype){return set.call(validate(obj,prototype),prototype),obj}):fn=function(obj,prototype){return validate(obj,prototype).__proto__=prototype,obj}:fn=function self(obj,prototype){var isNullBase;return validate(obj,prototype),(isNullBase=objIsPrototypeOf.call(self.nullPolyfill,obj))&&delete self.nullPolyfill.__proto__,null===prototype&&(prototype=self.nullPolyfill),obj.__proto__=prototype,isNullBase&&defineProperty(self.nullPolyfill,"__proto__",nullDesc),obj},Object.defineProperty(fn,"level",{configurable:!1,enumerable:!1,writable:!1,value:status.level})):null),__webpack_require__("/0SF")},BmSw:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineEntryView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_channels_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9fCi"),_stores_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("x3EI");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var TimelineEntryView=function(_Marionette$View){var subClass,superClass;function TimelineEntryView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=TimelineEntryView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=TimelineEntryView.prototype;return _proto.tagName=function(){return"li"},_proto.className=function(){return"player-row"},_proto.ui=function(){return{resize:".js-resize"}},_proto.modelEvents=function(){return{"timeline:show":"onShow","change:timeline_visibility":"onVisibilityChange"}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.ui.resize.css({height:0})},_proto.onVisibilityChange=function(){this.$el.toggle(this.model.get("timeline_visibility"))},_proto.beforeShow=function(){},_proto.onShow=function(){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.beforeShow();var css={},currentOffset=this.getChildViewOffset();if(null!=currentOffset){var offset=this.ui.resize.offset();currentOffset.top-offset.top!=0&&(css.translateY=[0,currentOffset.top-offset.top]),currentOffset.left-offset.left!=0&&(css.translateX=[0,currentOffset.left-offset.left])}css.height=this.getChildRegionHeight(),this.ui.resize.velocity(css,{easing:"linear",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration,complete:function(){_this.ui.resize.css({height:""}),_this.afterShow()}})},_proto.afterShow=function(){},_proto.getChildViewOffset=function(){return _channels_player__WEBPACK_IMPORTED_MODULE_1__.a.request("current:scene:offset")},TimelineEntryView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},Cqyb:function(module,exports,__webpack_require__){module.exports=function(graph,options){var oriented=(options=options||{}).oriented,heuristic=options.heuristic;heuristic||(heuristic=defaultSettings.heuristic);var distance=options.distance;distance||(distance=defaultSettings.distance);var pool=makeSearchStatePool();return{find:function(fromId,toId){var from=graph.getNode(fromId);if(!from)throw new Error("fromId is not defined in this graph: "+fromId);var to=graph.getNode(toId);if(!to)throw new Error("toId is not defined in this graph: "+toId);pool.reset();var cameFrom,nodeState=new Map,openSet=new NodeHeap({compare:defaultSettings.compareFScore,setNodeId:defaultSettings.setHeapIndex}),startNode=pool.createNewState(from);nodeState.set(fromId,startNode),startNode.fScore=heuristic(from,to),startNode.distanceToSource=0,openSet.push(startNode),startNode.open=1;for(;openSet.length>0;){if(goalReached(cameFrom=openSet.pop(),to))return reconstructPath(cameFrom);cameFrom.closed=!0,graph.forEachLinkedNode(cameFrom.node.id,visitNeighbour,oriented)}return NO_PATH;function visitNeighbour(otherNode,link){var otherSearchState=nodeState.get(otherNode.id);if(otherSearchState||(otherSearchState=pool.createNewState(otherNode),nodeState.set(otherNode.id,otherSearchState)),!otherSearchState.closed){0===otherSearchState.open&&(openSet.push(otherSearchState),otherSearchState.open=1);var tentativeDistance=cameFrom.distanceToSource+distance(otherNode,cameFrom.node,link);tentativeDistance>=otherSearchState.distanceToSource||(otherSearchState.parent=cameFrom,otherSearchState.distanceToSource=tentativeDistance,otherSearchState.fScore=tentativeDistance+heuristic(otherSearchState.node,to),openSet.updateItem(otherSearchState.heapIndex))}}}}};var NodeHeap=__webpack_require__("0I07"),makeSearchStatePool=__webpack_require__("ye8D"),heuristics=__webpack_require__("i4hu"),defaultSettings=__webpack_require__("l3Sp"),NO_PATH=defaultSettings.NO_PATH;function goalReached(searchState,targetNode){return searchState.node===targetNode}function reconstructPath(searchState){for(var path=[searchState.node],parent=searchState.parent;parent;)path.push(parent.node),parent=parent.parent;return path}module.exports.l2=heuristics.l2,module.exports.l1=heuristics.l1},DJTV:function(module,exports,__webpack_require__){"use strict";var objToString=Object.prototype.toString,isFunctionStringTag=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);module.exports=function(value){return"function"==typeof value&&isFunctionStringTag(objToString.call(value))}},DQdK:function(module,exports,__webpack_require__){"use strict";var SymbolPolyfill,HiddenSymbol,isNativeSafe,d=__webpack_require__("R5f6"),validateSymbol=__webpack_require__("4Z7C"),NativeSymbol=__webpack_require__("KjdW").Symbol,generateName=__webpack_require__("GPRz"),setupStandardSymbols=__webpack_require__("ftp1"),setupSymbolRegistry=__webpack_require__("rR11"),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty;if("function"==typeof NativeSymbol)try{String(NativeSymbol()),isNativeSafe=!0}catch(ignore){}else NativeSymbol=null;HiddenSymbol=function(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)},module.exports=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");return isNativeSafe?NativeSymbol(description):(symbol=create(HiddenSymbol.prototype),description=void 0===description?"":String(description),defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))}))},setupStandardSymbols(SymbolPolyfill),setupSymbolRegistry(SymbolPolyfill),defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",(function(){return this.__name__}))}),defineProperties(SymbolPolyfill.prototype,{toString:d((function(){return"Symbol ("+validateSymbol(this).__description__+")"})),valueOf:d((function(){return validateSymbol(this)}))}),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",(function(){var symbol=validateSymbol(this);return"symbol"==typeof symbol?symbol:symbol.toString()}))),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol")),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive]))},DWl2:function(module,exports,__webpack_require__){"use strict";var define,isValue=__webpack_require__("Fc97"),ensureValue=__webpack_require__("AuPL"),ensurePlainFunction=__webpack_require__("OHGP"),copy=__webpack_require__("qdkk"),normalizeOptions=__webpack_require__("NAcl"),map=__webpack_require__("S4vC"),bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty;define=function(name,desc,options){var dgs,value=ensureValue(desc)&&ensurePlainFunction(desc.value);return delete(dgs=copy(desc)).writable,delete dgs.value,dgs.get=function(){return!options.overwriteDefinition&&hasOwnProperty.call(this,name)?value:(desc.value=bind.call(value,options.resolveContext?options.resolveContext(this):this),defineProperty(this,name,desc),this[name])},dgs},module.exports=function(props){var options=normalizeOptions(arguments[1]);return isValue(options.resolveContext)&&ensurePlainFunction(options.resolveContext),map(props,(function(desc,name){return define(name,desc,options)}))}},DXlm:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'data-translation="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"translation")||(null!=depth0?lookupProperty(depth0,"translation"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"translation",hash:{},data:data,loc:{start:{line:1,column:126},end:{line:1,column:141}}}):helper)+'"'},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<a role="button"href="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"url")||(null!=depth0?lookupProperty(depth0,"url"):depth0))?helper:alias2)?helper.call(alias1,{name:"url",hash:{},data:data,loc:{start:{line:1,column:22},end:{line:1,column:29}}}):helper)+'"class="js-edge submit theme-highlight-bg-color"tabindex="0"'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"translation"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:89},end:{line:1,column:149}}}))?stack1:"")+">"+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:150},end:{line:1,column:163}}}):helper)?stack1:"")+"</a>"},useData:!0})},DazJ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Node}));__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug"),__webpack_require__("W1wS"),__webpack_require__("E03B"),__webpack_require__("921v"),__webpack_require__("exX3"),__webpack_require__("N6Ff"),__webpack_require__("hmwa"),__webpack_require__("Tzi+"),__webpack_require__("GAxB"),__webpack_require__("mbm0"),__webpack_require__("vpd+"),__webpack_require__("mejx"),__webpack_require__("ba7S"),__webpack_require__("8At4"),__webpack_require__("olot");var sprintf_js__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("+0G6"),loglevel__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_18__),constants_node__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("RIFn"),constants_edge__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("nj8K");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Node=function(_Backbone$Model){var subClass,superClass;function Node(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Node).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Node.prototype;return _proto.defaults=function(){return constants_node__WEBPACK_IMPORTED_MODULE_19__.b},_proto.initialize=function(attributes,options){void 0===options&&(options={}),this.project=options.project,attributes.index||loglevel__WEBPACK_IMPORTED_MODULE_18___default.a.error("Undefined attribute 'index' for Node"),this.on("change",this.afterChange,this),this.on("change:content check",this.check,this),this.on("change:video_id",this.updateEdgesDelay,this),this.listenTo(this.project,"init",this.updateEdgesPosition),this.project.nGraph.addNode(attributes.index)},_proto.url=function(){return this.project.url()+"/nodes"+(this.isNew()?"":"/"+this.id)},_proto.afterChange=function(model,options){void 0===options&&(options={}),_.chain(this.changedAttributes()).keys().any((function(key){return _(constants_node__WEBPACK_IMPORTED_MODULE_19__.e).indexOf(key)>-1})).value()&&this.trigger("sync:queue",this,options)},_proto.edges=function(filter){void 0===filter&&(filter="out");var index=this.get("index"),edges=[];switch(filter){case"all":edges=this.project.edges.filter((function(edge){return edge.get("to_node_index")===index||edge.get("from_node_index")===index}));break;case"in":edges=this.project.edges.where({to_node_index:index});break;default:edges=this.project.edges.where({from_node_index:index}),edges=_(edges).sortBy((function(edge){return edge.get("position")}))}return _(edges)},_proto.createEdge=function(attributes){return void 0===attributes&&(attributes={}),_extends(attributes,{position:this.edges().size()+1}),this.project.edges.create(attributes,{fromNode:this})},_proto.redrawEdges=function(){this.edges("all").forEach((function(edge){return edge.trigger("redraw")}))},_proto.updateEdgesPosition=function(){var position=1;this.edges().each((function(edge){return edge.set("position",position++)}))},_proto.updateEdgesDelay=function(value){var video=this.project.videos.get(this.get("video_id")),delay=null!=value?value:parseInt(this.get("show_edges_delay"),10);null!=video&&((isNaN(delay)||delay<0||delay>video.get("duration"))&&(delay=Math.floor(video.get("duration")/2)),this.set("show_edges_delay",delay))},_proto.useless=function(){return!this.get("content")&&0===this.edges().size()},_proto.delete=function(){this.set("deleted",!0),this.edges("out").each((function(edge){return edge.delete()})),this.edges("in").each((function(edge){return edge.linkTo(null)})),this.project.nodes.remove(this),this.off(),this.project.nGraph.removeNode(this.get("index"))},_proto.isInitial=function(){return this.get("index")===this.project.get("initial_node_index")},_proto.isFreetext=function(){return"freetext"===this.getKind()},_proto.check=function(){var errors=[];return this.get("content")||this.get("video_id")||errors.push("What does the character say?"),this.isInitial()||0!==this.edges("in").size()||errors.push("There are no links leading to this scene"),errors=_(errors).union(_.chain(this.edges()).map((function(edge){return edge.broken()})).flatten().compact().value()),this.trigger("broken",errors),!errors.length},_proto.serverAttributes=function(){return constants_node__WEBPACK_IMPORTED_MODULE_19__.e.concat(["id"])},_proto.toJSON=function(options){return void 0===options&&(options={}),options.server?this.pick(this.serverAttributes()):_.clone(this.attributes)},_proto.eventJSON=function(){return this.pick(["content","feedback","index","score","scores","emotion"])},_proto.filename=function(){return this.getIndexName().toUpperCase()},_proto.getIndexName=function(){return Object(sprintf_js__WEBPACK_IMPORTED_MODULE_17__.sprintf)("s%02d",this.get("index"))},_proto.parse=function(response){return null!=response.node?response.node:response},_proto.getKind=function(){return this.get("kind")||constants_node__WEBPACK_IMPORTED_MODULE_19__.b.kind},_proto.getContent=function(){return this.escape("content")||"Scene #"+this.get("index")},_proto.getFeedback=function(){return this.escape("feedback")},_proto.getEmotion=function(){return this.get("emotion")||constants_node__WEBPACK_IMPORTED_MODULE_19__.b.emotion},_proto.getCharacter=function(){return this.project.characters.get(this.get("character_id"))},_proto.getBackground=function(){return this.project.backgrounds.get(this.get("background_id"))},_proto.getAttachment=function(){return this.project.attachments.get(this.get("attachment_id"))},_proto.getVoiceURL=function(){var voice=this.project.voices.get(this.get("voice_id"));if(null!=voice)return voice.get("url")},_proto.getVideoURL=function(){var video=this.project.videos.get(this.get("video_id"));if(null!=video)return video.get("url")},_proto.getEdgesDelay=function(){var delay=parseInt(this.get("show_edges_delay"),10);if(!Number.isNaN(delay)){var mins=Math.floor(delay/60),secs=Math.round(delay%60);return(mins=mins<10?"0"+mins:mins)+":"+(secs=secs<10?"0"+secs:secs)}return""},_proto.getDefaultEdge=function(){if(this.get("default_edge_index"))return this.project.edges.findWhere({index:this.get("default_edge_index")})},_proto.getMaxAnswersCount=function(){return null==this.maxAnswersCount&&(this.maxAnswersCount=this.edges().max((function(edge){return edge.get("answers_count")})).get("answers_count")||0),this.maxAnswersCount},_proto.getTotalAnswersCount=function(){return null==this.totalAnswersCount&&(this.totalAnswersCount=this.edges().reduce((function(memo,edge){return memo+(edge.get("answers_count")||0)}),0)),this.totalAnswersCount},_proto.convertToFreetext=function(){if(this.edges().size()>1)return!1;var attr={kind:"freetext"};this.get("content")||(attr.content=constants_node__WEBPACK_IMPORTED_MODULE_19__.d),this.set(attr),0===this.edges().size()&&this.createEdge({content:constants_edge__WEBPACK_IMPORTED_MODULE_20__.e}),this.edges().each((function(edge){return edge.trigger("change:kind",edge)}))},_proto.convertToMultipleScores=function(uid,convert){void 0===uid&&(uid=null),void 0===convert&&(convert=!1);var score=this.get("score");null!=score&&(_(["+","-"]).includes(score[0])||convert?this.setScoreFor(uid,score):this.setScoreFor(uid,null))},_proto.convertToSingleScore=function(){null!=this.get("scores")&&this.set("scores",null)},_proto.scoreFor=function(uid,format){void 0===format&&(format=!1);var score=(this.get("scores")||{})[uid];return null!=score&&format&&(score=score>=0?"+"+score:score.toString()),score},_proto.setScoreFor=function(uid,score){var scores=this.get("scores")||{};null!=score?scores[uid]=parseInt(score,10):delete scores[uid],this.set("scores",_.isEmpty(scores)?null:scores),this.calculateScore()},_proto.deleteScoreFor=function(uid){var scores=this.get("scores");null!=scores&&(delete scores[uid],this.set("scores",scores),this.calculateScore())},_proto.calculateScore=function(){var uids=this.project.scores.uids(),scores=_.chain(this.get("scores")).pick(uids).values(),totalScore=null;scores.each((function(score){var value=parseInt(score,10);Number.isNaN(value)||(totalScore=(totalScore||0)+value)})),null!=totalScore&&(totalScore=totalScore>=0?"+"+totalScore:totalScore.toString()),this.set("score",totalScore)},_proto.getNodesTillFinish=function(){var _this=this,finishes=_.chain(this.project.nodes.getFinishNodes());if(finishes.size().value()>0){var paths=finishes.map((function(finish){return _this.project.nPath.find(_this.get("index"),finish.get("index")).length})).without(0);return Math.max.apply(null,paths.value())-1}return null},Node}(Backbone.Model)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},E1Dx:function(module,exports,__webpack_require__){"use strict";var MapPoly,clear=__webpack_require__("9v3Y"),eIndexOf=__webpack_require__("yHCd"),setPrototypeOf=__webpack_require__("uew1"),callable=__webpack_require__("q/aM"),validValue=__webpack_require__("EmFb"),d=__webpack_require__("R5f6"),ee=__webpack_require__("cdhd"),Symbol=__webpack_require__("gW10"),iterator=__webpack_require__("5JfI"),forOf=__webpack_require__("VdUP"),Iterator=__webpack_require__("Fs+H"),isNative=__webpack_require__("e9wZ"),call=Function.prototype.call,defineProperties=Object.defineProperties,getPrototypeOf=Object.getPrototypeOf;module.exports=MapPoly=function(){var keys,values,self,iterable=arguments[0];if(!(this instanceof MapPoly))throw new TypeError("Constructor requires 'new'");return self=isNative&&setPrototypeOf&&Map!==MapPoly?setPrototypeOf(new Map,getPrototypeOf(this)):this,null!=iterable&&iterator(iterable),defineProperties(self,{__mapKeysData__:d("c",keys=[]),__mapValuesData__:d("c",values=[])}),iterable?(forOf(iterable,(function(value){var key=validValue(value)[0];value=value[1],-1===eIndexOf.call(keys,key)&&(keys.push(key),values.push(value))}),self),self):self},isNative&&(setPrototypeOf&&setPrototypeOf(MapPoly,Map),MapPoly.prototype=Object.create(Map.prototype,{constructor:d(MapPoly)})),ee(defineProperties(MapPoly.prototype,{clear:d((function(){this.__mapKeysData__.length&&(clear.call(this.__mapKeysData__),clear.call(this.__mapValuesData__),this.emit("_clear"))})),delete:d((function(key){var index=eIndexOf.call(this.__mapKeysData__,key);return-1!==index&&(this.__mapKeysData__.splice(index,1),this.__mapValuesData__.splice(index,1),this.emit("_delete",index,key),!0)})),entries:d((function(){return new Iterator(this,"key+value")})),forEach:d((function(cb){var iterator,result,thisArg=arguments[1];for(callable(cb),result=(iterator=this.entries())._next();void 0!==result;)call.call(cb,thisArg,this.__mapValuesData__[result],this.__mapKeysData__[result],this),result=iterator._next()})),get:d((function(key){var index=eIndexOf.call(this.__mapKeysData__,key);if(-1!==index)return this.__mapValuesData__[index]})),has:d((function(key){return-1!==eIndexOf.call(this.__mapKeysData__,key)})),keys:d((function(){return new Iterator(this,"key")})),set:d((function(key,value){var emit,index=eIndexOf.call(this.__mapKeysData__,key);return-1===index&&(index=this.__mapKeysData__.push(key)-1,emit=!0),this.__mapValuesData__[index]=value,emit&&this.emit("_add",index,key),this})),size:d.gs((function(){return this.__mapKeysData__.length})),values:d((function(){return new Iterator(this,"value")})),toString:d((function(){return"[object Map]"}))})),Object.defineProperty(MapPoly.prototype,Symbol.iterator,d((function(){return this.entries()}))),Object.defineProperty(MapPoly.prototype,Symbol.toStringTag,d("c","Map"))},EPFB:function(module,exports,__webpack_require__){"use strict";var forEach=Array.prototype.forEach,create=Object.create;module.exports=function(arg){var set=create(null);return forEach.call(arguments,(function(name){set[name]=!0})),set}},ETNq:function(module,exports,__webpack_require__){(function(global){var Locale=__webpack_require__("acRa"),KeyCombo=__webpack_require__("f5ld");function Keyboard(targetWindow,targetElement,platform,userAgent){this._locale=null,this._currentContext=null,this._contexts={},this._listeners=[],this._appliedListeners=[],this._locales={},this._targetElement=null,this._targetWindow=null,this._targetPlatform="",this._targetUserAgent="",this._isModernBrowser=!1,this._targetKeyDownBinding=null,this._targetKeyUpBinding=null,this._targetResetBinding=null,this._paused=!1,this._callerHandler=null,this.setContext("global"),this.watch(targetWindow,targetElement,platform,userAgent)}Keyboard.prototype.setLocale=function(localeName,localeBuilder){var locale=null;"string"==typeof localeName?localeBuilder?localeBuilder(locale=new Locale(localeName),this._targetPlatform,this._targetUserAgent):locale=this._locales[localeName]||null:localeName=(locale=localeName)._localeName,this._locale=locale,this._locales[localeName]=locale,locale&&(this._locale.pressedKeys=locale.pressedKeys)},Keyboard.prototype.getLocale=function(localName){return localName||(localName=this._locale.localeName),this._locales[localName]||null},Keyboard.prototype.bind=function(keyComboStr,pressHandler,releaseHandler,preventRepeatByDefault){if(null!==keyComboStr&&"function"!=typeof keyComboStr||(preventRepeatByDefault=releaseHandler,releaseHandler=pressHandler,pressHandler=keyComboStr,keyComboStr=null),keyComboStr&&"object"==typeof keyComboStr&&"number"==typeof keyComboStr.length)for(var i=0;i<keyComboStr.length;i+=1)this.bind(keyComboStr[i],pressHandler,releaseHandler);else this._listeners.push({keyCombo:keyComboStr?new KeyCombo(keyComboStr):null,pressHandler:pressHandler||null,releaseHandler:releaseHandler||null,preventRepeat:preventRepeatByDefault||!1,preventRepeatByDefault:preventRepeatByDefault||!1})},Keyboard.prototype.addListener=Keyboard.prototype.bind,Keyboard.prototype.on=Keyboard.prototype.bind,Keyboard.prototype.unbind=function(keyComboStr,pressHandler,releaseHandler){if(null!==keyComboStr&&"function"!=typeof keyComboStr||(releaseHandler=pressHandler,pressHandler=keyComboStr,keyComboStr=null),keyComboStr&&"object"==typeof keyComboStr&&"number"==typeof keyComboStr.length)for(var i=0;i<keyComboStr.length;i+=1)this.unbind(keyComboStr[i],pressHandler,releaseHandler);else for(i=0;i<this._listeners.length;i+=1){var listener=this._listeners[i],comboMatches=!keyComboStr&&!listener.keyCombo||listener.keyCombo&&listener.keyCombo.isEqual(keyComboStr),pressHandlerMatches=!pressHandler&&!releaseHandler||!pressHandler&&!listener.pressHandler||pressHandler===listener.pressHandler,releaseHandlerMatches=!pressHandler&&!releaseHandler||!releaseHandler&&!listener.releaseHandler||releaseHandler===listener.releaseHandler;comboMatches&&pressHandlerMatches&&releaseHandlerMatches&&(this._listeners.splice(i,1),i-=1)}},Keyboard.prototype.removeListener=Keyboard.prototype.unbind,Keyboard.prototype.off=Keyboard.prototype.unbind,Keyboard.prototype.setContext=function(contextName){this._locale&&this.releaseAllKeys(),this._contexts[contextName]||(this._contexts[contextName]=[]),this._listeners=this._contexts[contextName],this._currentContext=contextName},Keyboard.prototype.getContext=function(){return this._currentContext},Keyboard.prototype.withContext=function(contextName,callback){var previousContextName=this.getContext();this.setContext(contextName),callback(),this.setContext(previousContextName)},Keyboard.prototype.watch=function(targetWindow,targetElement,targetPlatform,targetUserAgent){var _this=this;if(this.stop(),!targetWindow){if(!global.addEventListener&&!global.attachEvent)throw new Error("Cannot find global functions addEventListener or attachEvent.");targetWindow=global}if("number"==typeof targetWindow.nodeType&&(targetUserAgent=targetPlatform,targetPlatform=targetElement,targetElement=targetWindow,targetWindow=global),!targetWindow.addEventListener&&!targetWindow.attachEvent)throw new Error("Cannot find addEventListener or attachEvent methods on targetWindow.");this._isModernBrowser=!!targetWindow.addEventListener;var userAgent=targetWindow.navigator&&targetWindow.navigator.userAgent||"",platform=targetWindow.navigator&&targetWindow.navigator.platform||"";targetElement&&null!==targetElement||(targetElement=targetWindow.document),targetPlatform&&null!==targetPlatform||(targetPlatform=platform),targetUserAgent&&null!==targetUserAgent||(targetUserAgent=userAgent),this._targetKeyDownBinding=function(event){_this.pressKey(event.keyCode,event),_this._handleCommandBug(event,platform)},this._targetKeyUpBinding=function(event){_this.releaseKey(event.keyCode,event)},this._targetResetBinding=function(event){_this.releaseAllKeys(event)},this._bindEvent(targetElement,"keydown",this._targetKeyDownBinding),this._bindEvent(targetElement,"keyup",this._targetKeyUpBinding),this._bindEvent(targetWindow,"focus",this._targetResetBinding),this._bindEvent(targetWindow,"blur",this._targetResetBinding),this._targetElement=targetElement,this._targetWindow=targetWindow,this._targetPlatform=targetPlatform,this._targetUserAgent=targetUserAgent},Keyboard.prototype.stop=function(){this._targetElement&&this._targetWindow&&(this._unbindEvent(this._targetElement,"keydown",this._targetKeyDownBinding),this._unbindEvent(this._targetElement,"keyup",this._targetKeyUpBinding),this._unbindEvent(this._targetWindow,"focus",this._targetResetBinding),this._unbindEvent(this._targetWindow,"blur",this._targetResetBinding),this._targetWindow=null,this._targetElement=null)},Keyboard.prototype.pressKey=function(keyCode,event){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressKey(keyCode),this._applyBindings(event)}},Keyboard.prototype.releaseKey=function(keyCode,event){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.releaseKey(keyCode),this._clearBindings(event)}},Keyboard.prototype.releaseAllKeys=function(event){if(!this._paused){if(!this._locale)throw new Error("Locale not set");this._locale.pressedKeys.length=0,this._clearBindings(event)}},Keyboard.prototype.pause=function(){this._paused||(this._locale&&this.releaseAllKeys(),this._paused=!0)},Keyboard.prototype.resume=function(){this._paused=!1},Keyboard.prototype.reset=function(){this.releaseAllKeys(),this._listeners.length=0},Keyboard.prototype._bindEvent=function(targetElement,eventName,handler){return this._isModernBrowser?targetElement.addEventListener(eventName,handler,!1):targetElement.attachEvent("on"+eventName,handler)},Keyboard.prototype._unbindEvent=function(targetElement,eventName,handler){return this._isModernBrowser?targetElement.removeEventListener(eventName,handler,!1):targetElement.detachEvent("on"+eventName,handler)},Keyboard.prototype._getGroupedListeners=function(){var listenerGroups=[],listenerGroupMap=[],listeners=this._listeners;return"global"!==this._currentContext&&(listeners=[].concat(listeners,this._contexts.global)),listeners.sort((function(a,b){return(b.keyCombo?b.keyCombo.keyNames.length:0)-(a.keyCombo?a.keyCombo.keyNames.length:0)})).forEach((function(l){for(var mapIndex=-1,i=0;i<listenerGroupMap.length;i+=1)(null===listenerGroupMap[i]&&null===l.keyCombo||null!==listenerGroupMap[i]&&listenerGroupMap[i].isEqual(l.keyCombo))&&(mapIndex=i);-1===mapIndex&&(mapIndex=listenerGroupMap.length,listenerGroupMap.push(l.keyCombo)),listenerGroups[mapIndex]||(listenerGroups[mapIndex]=[]),listenerGroups[mapIndex].push(l)})),listenerGroups},Keyboard.prototype._applyBindings=function(event){var preventRepeat=!1;event||(event={}),event.preventRepeat=function(){preventRepeat=!0},event.pressedKeys=this._locale.pressedKeys.slice(0);for(var pressedKeys=this._locale.pressedKeys.slice(0),listenerGroups=this._getGroupedListeners(),i=0;i<listenerGroups.length;i+=1){var listeners=listenerGroups[i],keyCombo=listeners[0].keyCombo;if(null===keyCombo||keyCombo.check(pressedKeys)){for(var j=0;j<listeners.length;j+=1){var listener=listeners[j];null===keyCombo&&(listener={keyCombo:new KeyCombo(pressedKeys.join("+")),pressHandler:listener.pressHandler,releaseHandler:listener.releaseHandler,preventRepeat:listener.preventRepeat,preventRepeatByDefault:listener.preventRepeatByDefault}),listener.pressHandler&&!listener.preventRepeat&&(listener.pressHandler.call(this,event),preventRepeat&&(listener.preventRepeat=preventRepeat,preventRepeat=!1)),listener.releaseHandler&&-1===this._appliedListeners.indexOf(listener)&&this._appliedListeners.push(listener)}if(keyCombo)for(j=0;j<keyCombo.keyNames.length;j+=1){var index=pressedKeys.indexOf(keyCombo.keyNames[j]);-1!==index&&(pressedKeys.splice(index,1),j-=1)}}}},Keyboard.prototype._clearBindings=function(event){event||(event={});for(var i=0;i<this._appliedListeners.length;i+=1){var listener=this._appliedListeners[i],keyCombo=listener.keyCombo;if(null===keyCombo||!keyCombo.check(this._locale.pressedKeys)){if(this._callerHandler!==listener.releaseHandler){var oldCaller=this._callerHandler;this._callerHandler=listener.releaseHandler,listener.preventRepeat=listener.preventRepeatByDefault,listener.releaseHandler.call(this,event),this._callerHandler=oldCaller}this._appliedListeners.splice(i,1),i-=1}}},Keyboard.prototype._handleCommandBug=function(event,platform){platform.match("Mac")&&this._locale.pressedKeys.includes("command")&&!["shift","ctrl","alt","capslock","tab","command"].includes(this._locale.getKeyNames(event.keyCode)[0])&&this._targetKeyUpBinding(event)},module.exports=Keyboard}).call(this,__webpack_require__("SLQP"))},EmFb:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("sgFB");module.exports=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value}},EmxI:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="oval theme-highlight-bg-color"aria-live="off"><strong class="js-points">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"points")||(null!=depth0?lookupProperty(depth0,"points"):depth0))?helper:alias2)?helper.call(alias1,{name:"points",hash:{},data:data,loc:{start:{line:1,column:85},end:{line:1,column:95}}}):helper)+'</strong><em data-translation="pts">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"pts_text")||(null!=depth0?lookupProperty(depth0,"pts_text"):depth0))?helper:alias2)?helper.call(alias1,{name:"pts_text",hash:{},data:data,loc:{start:{line:1,column:131},end:{line:1,column:143}}}):helper)+"</em></span>"},useData:!0})},ExbZ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return ScoreDetailsView}));__webpack_require__("fAGv"),__webpack_require__("E03B"),__webpack_require__("921v"),__webpack_require__("sccJ"),__webpack_require__("8At4");var lib_tracer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ZypF"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("v53q"),_stores_player__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("x3EI"),_templates_score_details__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("eKUM"),_templates_score_details__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_templates_score_details__WEBPACK_IMPORTED_MODULE_9__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var ScoreDetailsView=function(_Marionette$View){var subClass,superClass;function ScoreDetailsView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=ScoreDetailsView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=ScoreDetailsView.prototype;return _proto.initialize=function(payload){void 0===payload&&(payload={}),this.scores=payload.scene?payload.scene.getScores():_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.timeline.getScores(),this.score=payload.scene?payload.scene.score():_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.timeline.score()},_proto.className=function(){return"player-score-details player-overlay"},_proto.events=function(){return{click:"onHide"}},_proto.keyboard=function(){return{keys:"esc",context:"score_details"}},_proto.getTemplate=function(){return _templates_score_details__WEBPACK_IMPORTED_MODULE_9___default.a},_proto.templateContext=function(){var bars=[],maxValue=0,minValue=0,count=this.scores.length,boxWidth=250/(3.5*count+1),padWidth=boxWidth/2.5;this.scores.forEach((function(score){var value=parseInt(score.total_score,10);maxValue=Math.max(value,maxValue),minValue=Math.min(value,minValue);var barClass="";barClass=0===value?"zero":value>0?"positive":"negative",bars.push({value:value,class:barClass,text:score.name,color:score.color})}));for(var range=maxValue-minValue,xoffset=range?100*maxValue/range:50,i=0;i<bars.length;i++)bars[i].relativeHeight=Math.abs(bars[i].value/range);return{boxWidth:boxWidth,padWidth:padWidth,bars:bars,xoffset:xoffset,maxWidth:30*(count+1)+36*count,score:this.score,translations:_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.project.translations()}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_5__.a)(this),this.$el.css({display:"none"})},_proto.show=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_5__.a)(this),this.$el.velocity("fadeIn",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration,complete:this.renderDiagram.bind(this)}),_lib_keyboard__WEBPACK_IMPORTED_MODULE_6__.a.on(this)},_proto.hide=function(){_lib_keyboard__WEBPACK_IMPORTED_MODULE_6__.a.off(this),this.$el.velocity("fadeOut",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration,complete:this.remove.bind(this)})},_proto.onHide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_5__.a)(this),this.hide()},_proto.renderDiagram=function(){var containerHeight=this.$el.find(".score-chart").height(),zeroOffsetRelative=this.$el.find(".xline").data("xoffset"),zeroOffset=containerHeight*zeroOffsetRelative/100;this.$el.find(".bars .spacer, .bars .bar").each((function(){var $this=$(this),$gauge=$this.find(".gauge"),$text=$gauge.find(".text");$this.height(containerHeight).css("top",-zeroOffset);var gaugeHeight=0,gaugeWidth=$gauge.width();$this.hasClass("zero")?(gaugeHeight=gaugeWidth,$gauge.css({lineHeight:gaugeHeight+"px",marginTop:zeroOffset-gaugeHeight/2}),$gauge.velocity({opacity:[1,0]},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration})):gaugeHeight=Math.max(36,$this.data("relative-height")*containerHeight),$this.hasClass("positive")&&$gauge.velocity({marginTop:[zeroOffset-gaugeHeight-1,zeroOffset-1],height:gaugeHeight,opacity:1},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration}),$this.hasClass("negative")&&$gauge.css("marginTop",zeroOffset).velocity({height:gaugeHeight,opacity:1},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration}),$text.css({height:gaugeWidth,lineHeight:gaugeWidth+"px"})}))},_proto.onShortcut=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_5__.a)(this),this.hide()},ScoreDetailsView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},FEYq:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULTS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ACCEPT_CONTENT_TYPE_REGEX}));var DEFAULTS={url:"",duration:0},ACCEPT_CONTENT_TYPE_REGEX=/(\.|\/)(mp4)$/i},Fc97:function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return null!=value}},"Fs+H":function(module,exports,__webpack_require__){"use strict";var MapIterator,setPrototypeOf=__webpack_require__("uew1"),d=__webpack_require__("R5f6"),Iterator=__webpack_require__("Vty4"),toStringTagSymbol=__webpack_require__("gW10").toStringTag,kinds=__webpack_require__("Qg0J"),defineProperties=Object.defineProperties,unBind=Iterator.prototype._unBind;MapIterator=module.exports=function(map,kind){if(!(this instanceof MapIterator))return new MapIterator(map,kind);Iterator.call(this,map.__mapKeysData__,map),kind&&kinds[kind]||(kind="key+value"),defineProperties(this,{__kind__:d("",kind),__values__:d("w",map.__mapValuesData__)})},setPrototypeOf&&setPrototypeOf(MapIterator,Iterator),MapIterator.prototype=Object.create(Iterator.prototype,{constructor:d(MapIterator),_resolve:d((function(i){return"value"===this.__kind__?this.__values__[i]:"key"===this.__kind__?this.__list__[i]:[this.__list__[i],this.__values__[i]]})),_unBind:d((function(){this.__values__=null,unBind.call(this)})),toString:d((function(){return"[object Map Iterator]"}))}),Object.defineProperty(MapIterator.prototype,toStringTagSymbol,d("c","Map Iterator"))},Ftsh:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Playlog}));__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug"),__webpack_require__("hmwa"),__webpack_require__("exX3"),__webpack_require__("OPuQ");var lib_loader__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("B9Pn"),constants_playlog__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("oj+x"),_actions_timeline__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("oOCt"),_collections_playlog_entries__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("teAV"),_scene__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("6nYy");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Playlog=function(_Backbone$Model){var subClass,superClass;function Playlog(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Playlog).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Playlog.prototype;return _proto.initialize=function(attributes,options){void 0===options&&(options={}),this.idAttribute="token",this.saving=!1,this.options=options,this.project=options.project,this.timeline=options.timeline,this.entries=new _collections_playlog_entries__WEBPACK_IMPORTED_MODULE_9__.a([]),this.queue=_.chain([]),this.listenTo(this,"request",this.onRequest),this.listenTo(this,"sync",this.onSaveSuccess),this.listenTo(this,"error",this.onSaveError),this.listenTo(this.timeline,"reset",this.onTimelineReset),this.listenTo(this.timeline,"start",this.onTimelineStart),this.listenTo(this.entries,"add",this.onEntryAdd)},_proto.urlRoot=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_6__.a.url.playlogs},_proto.defaults=function(){return constants_playlog__WEBPACK_IMPORTED_MODULE_7__.a},_proto.onTimelineReset=function(){this.unset("id"),this.set(this.defaults()).set(this.options.defaults||{}),this.entries.reset([])},_proto.onTimelineStart=function(){this.set("started_at",new Date)},_proto.createEntry=function(scene){var node=scene.node,choice=scene.choice,edge=choice&&choice.edge;0===node.edges().size()?this.set({finished_at:new Date,progress_pct:100}):this.set("progress_pct",scene.get("progress_pct")),this.entries.add({answered_at:scene.get("answered_at"),progress_pct:scene.get("progress_pct"),duration:choice&&choice.get("duration"),custom_content:choice&&choice.get("custom_content"),node_id:node.get("id"),node_content:node.get("content"),node_kind:node.get("kind"),node_index:node.get("index"),edge_id:edge&&edge.get("id"),edge_content:edge&&edge.get("content"),edge_position:edge&&edge.get("position")})},_proto.onTimelineAdd=function(scene){scene instanceof _scene__WEBPACK_IMPORTED_MODULE_10__.a&&this.createEntry(scene)},_proto.onEntryAdd=function(entry){this.queue.push(entry),this.entries.length>1&&this.save()},_proto.onRequest=function(_model,_xhr,_options){this.saving=!0},_proto.save=function(){this.saving||_Backbone$Model.prototype.save.call(this,null)},_proto.parse=function(response){return null!=response.playlog?response.playlog:response},_proto.toJSON=function(_options){void 0===_options&&(_options={});var json=this.pick("project_id","lesson_id","learner_id","instaplay_id");return json.playlog=this.pick(constants_playlog__WEBPACK_IMPORTED_MODULE_7__.b),json.entries=this.queue.map((function(entry){return entry.toJSON()})).value(),json.playlog.referrer_url=window.location!==window.parent.location?document.referrer:window.location.href,json},_proto.onSaveSuccess=function(model,response,_options){if(response.error)return this.queue.reject((function(_entry){return!0})),void _actions_timeline__WEBPACK_IMPORTED_MODULE_8__.a.playlogError({error:response.error,message:response.message});response.data&&(this.queue=this.queue.reject((function(entry){return response.data.indexOf(entry.get("index"))>-1}))),this.saving=!1,this.queue.size().value()>0?this.save():this.get("finished_at")&&this.trigger("server:finish")},_proto.onSaveError=function(_model,_response,_options){this.get("lesson_id")&&this.get("learner_id")&&_actions_timeline__WEBPACK_IMPORTED_MODULE_8__.a.playlogError({error:"connection",message:"Connection Error"}),this.saving=!1},Playlog}(Backbone.Model)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},G4Dd:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return SENSITIVE_ATTRIBUTES})),__webpack_require__.d(__webpack_exports__,"b",(function(){return PLAYER_V1_ONLY_TRANSLATIONS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULTS}));var _rails__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("mCzO"),SENSITIVE_ATTRIBUTES=["title","initial_node_index","theme_id","multiple_scoring","disable_emotion_meter","disable_copyright_logo","disable_player_animation","disable_choice_numbers","randomize_choices_order","disable_timeline_choice","timeline_score_preview","disable_replay_button","disable_progress_bar","workspace_top","workspace_left","live","private","translations"],PLAYER_V1_ONLY_TRANSLATIONS=_rails__WEBPACK_IMPORTED_MODULE_0__.a.PLAYER_V1_ONLY_TRANSLATIONS,DEFAULTS={title:"",center_left:0,center_top:0,workspace_width:0,workspace_height:0,workspace_top:0,workspace_left:0,initial_node_index:null,zoom:{index:0,value:1},next_node_index:1,next_edge_index:1,multiple_scoring:!1,disable_emotion_meter:!1,disable_copyright_logo:!1,disable_player_animation:!1,disable_choice_numbers:!1,randomize_choices_order:!1,disable_timeline_choice:!1,disable_replay_button:!1,disable_progress_bar:!1,live:!1,translations:_rails__WEBPACK_IMPORTED_MODULE_0__.a.PLAYER_TRANSLATIONS}},G5lL:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Background}));var constants_background__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("dT/v");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Background=function(_Backbone$Model){var subClass,superClass;function Background(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Background).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Background.prototype;return _proto.defaults=function(){return constants_background__WEBPACK_IMPORTED_MODULE_0__.a},_proto.imageURL=function(options){void 0===options&&(options={});var style=options.style||"small";return this.get(style+"_url")},_proto.parse=function(response){return null!=response.background?response.background:response},Background}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},GJgv:function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},GPRz:function(module,exports,__webpack_require__){"use strict";var d=__webpack_require__("R5f6"),create=Object.create,defineProperty=Object.defineProperty,objPrototype=Object.prototype,created=create(null);module.exports=function(desc){for(var name,ie11BugWorkaround,postfix=0;created[desc+(postfix||"")];)++postfix;return created[desc+=postfix||""]=!0,defineProperty(objPrototype,name="@@"+desc,d.gs(null,(function(value){ie11BugWorkaround||(ie11BugWorkaround=!0,defineProperty(this,name,d(value)),ie11BugWorkaround=!1)}))),name}},GQgX:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){return'<a href="javascript:;"class="media-icon js-video fa fa-video-camera"></a>'},3:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="wcag-only"aria-label="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"wcag_character_text")||(null!=depth0?lookupProperty(depth0,"wcag_character_text"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"wcag_character_text",hash:{},data:data,loc:{start:{line:1,column:234},end:{line:1,column:257}}}):helper)+'."></span>'},5:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return" "+(null!=(stack1=lookupProperty(helpers,"if").call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"show_emotion_meter"):depth0,{name:"if",hash:{},fn:container.program(6,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:276},end:{line:1,column:370}}}))?stack1:"")+" "},6:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="wcag-only"aria-label="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion_name")||(null!=depth0?lookupProperty(depth0,"emotion_name"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"emotion_name",hash:{},data:data,loc:{start:{line:1,column:337},end:{line:1,column:353}}}):helper)+'."></span>'},8:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return" "+(null!=(stack1=container.invokePartial(__webpack_require__("bYzE"),null!=depth0?lookupProperty(depth0,"attachment"):depth0,{name:"attachment",data:data,helpers:helpers,partials:partials,decorators:container.decorators}))?stack1:"")+" "},10:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="character js-character"><div class="avatar js-avatar"style="background-image:url('+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"avatar_url")||(null!=depth0?lookupProperty(depth0,"avatar_url"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"avatar_url",hash:{},data:data,loc:{start:{line:1,column:643},end:{line:1,column:657}}}):helper)+');"></div></div>'},12:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="emotion '+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion")||(null!=depth0?lookupProperty(depth0,"emotion"):depth0))?helper:alias2)?helper.call(alias1,{name:"emotion",hash:{},data:data,loc:{start:{line:1,column:727},end:{line:1,column:738}}}):helper)+'"><span class="bt-emotion '+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion")||(null!=depth0?lookupProperty(depth0,"emotion"):depth0))?helper:alias2)?helper.call(alias1,{name:"emotion",hash:{},data:data,loc:{start:{line:1,column:764},end:{line:1,column:775}}}):helper)+'"></span><small>'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion_name")||(null!=depth0?lookupProperty(depth0,"emotion_name"):depth0))?helper:alias2)?helper.call(alias1,{name:"emotion_name",hash:{},data:data,loc:{start:{line:1,column:791},end:{line:1,column:807}}}):helper)+"</small></div>"},14:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<footer class="timeline right"><a href="javascript:;"class="js-voice voice-icon theme-highlight-bg-color"title="'+container.escapeExpression(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"scene_play_voiceover"):stack1,depth0))+'"role="button"><span class="fa fa-volume-down"></span></a></footer>'},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="bubble scene js-bubble '+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"index_name")||(null!=depth0?lookupProperty(depth0,"index_name"):depth0))?helper:alias2)?helper.call(alias1,{name:"index_name",hash:{},data:data,loc:{start:{line:1,column:35},end:{line:1,column:49}}}):helper)+'"tabindex="0"notranslate>'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"video_url"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:74},end:{line:1,column:171}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"wcag_character_text"):depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.program(5,data,0),data:data,loc:{start:{line:1,column:172},end:{line:1,column:378}}}))?stack1:"")+'<div class="content js-content"dir="auto">'+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:420},end:{line:1,column:433}}}):helper)?stack1:"")+"</div>"+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"attachment"):depth0,{name:"if",hash:{},fn:container.program(8,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:439},end:{line:1,column:496}}}))?stack1:"")+'</div><footer class="timeline left">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"avatar_url"):depth0,{name:"if",hash:{},fn:container.program(10,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:532},end:{line:1,column:680}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"show_emotion_meter"):depth0,{name:"if",hash:{},fn:container.program(12,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:681},end:{line:1,column:828}}}))?stack1:"")+"</footer>"+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"voice"):depth0,{name:"if",hash:{},fn:container.program(14,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:837},end:{line:1,column:1073}}}))?stack1:"")},usePartial:!0,useData:!0})},"Gd/F":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineSceneView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_channels_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9fCi"),_templates_scenes_timeline__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("5aQi"),_templates_scenes_timeline__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_templates_scenes_timeline__WEBPACK_IMPORTED_MODULE_2__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var TimelineSceneView=function(_TimelineEntryView){var subClass,superClass;function TimelineSceneView(){return _TimelineEntryView.apply(this,arguments)||this}superClass=_TimelineEntryView,(subClass=TimelineSceneView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=TimelineSceneView.prototype;return _proto.className=function(){return"scene "+_TimelineEntryView.prototype.className.call(this)},_proto.getTemplate=function(){return _templates_scenes_timeline__WEBPACK_IMPORTED_MODULE_2___default.a},_proto.regions=function(){return{scene:"@ui.resize"}},_proto.beforeShow=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this);var view=_channels_player__WEBPACK_IMPORTED_MODULE_1__.a.request("current:entry:view");view.removeTabIndex(),this.showChildView("scene",view)},_proto.afterShow=function(){this.getChildView("scene").showCharacter()},_proto.getChildRegionHeight=function(){return this.getChildView("scene").getHeight()},TimelineSceneView}(__webpack_require__("BmSw").a)},GitV:function(module,__webpack_exports__,__webpack_require__){"use strict";var cache={};__webpack_exports__.a=function(params){void 0===params&&(params={});var _params=params,character=_params.character,emotion=_params.emotion,callback=_params.callback,scale=params.scale||.8,cacheID=character.cid+"-"+emotion+"-"+scale;if(cache[cacheID])return callback.call(null,cache[cacheID]);var face=character.getFace(emotion,!1);if(!face)return callback.call(null,{"background-size":"cover","background-position":"top center"});var margin=(1-scale)/2,scaledFace={},src=character.imageURL({emotion:emotion,style:"player"}),img=new Image;img.onload=function(){scaledFace.width=Math.round(img.width/face.width*100),scaledFace.height=Math.round(img.height/face.height*100),scaledFace.x=Math.round((face.x+face.width/2)/img.width*100),scaledFace.y=Math.round(face.y/img.height*100);var sizeCSS=scaledFace.width>scaledFace.height?scaledFace.width*scale+"% auto":"auto "+scaledFace.height*scale+"%";cache[cacheID]={"background-size":sizeCSS,"background-position":scaledFace.x*(1+margin)+"% "+scaledFace.y*(1-margin)+"%"},callback.call(null,cache[cacheID])},img.src=src}},Gn5B:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SCREENS}));var SCREENS={480:"sm",667:"md",960:"lg",1280:"hd",1440:"qhd",1920:"fhd"}},"Gy/D":function(module,exports,__webpack_require__){"use strict";var ArrayIterator,setPrototypeOf=__webpack_require__("uew1"),contains=__webpack_require__("wQ3O"),d=__webpack_require__("R5f6"),Symbol=__webpack_require__("gW10"),Iterator=__webpack_require__("Vty4"),defineProperty=Object.defineProperty;ArrayIterator=module.exports=function(arr,kind){if(!(this instanceof ArrayIterator))throw new TypeError("Constructor requires 'new'");Iterator.call(this,arr),kind=kind?contains.call(kind,"key+value")?"key+value":contains.call(kind,"key")?"key":"value":"value",defineProperty(this,"__kind__",d("",kind))},setPrototypeOf&&setPrototypeOf(ArrayIterator,Iterator),delete ArrayIterator.prototype.constructor,ArrayIterator.prototype=Object.create(Iterator.prototype,{_resolve:d((function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i}))}),defineProperty(ArrayIterator.prototype,Symbol.toStringTag,d("c","Array Iterator"))},"H+6F":function(module,exports,__webpack_require__){"use strict";module.exports=function(){}},HBI5:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="media-control"><audio class="mejs-bt"width="100%"height="20"preload="auto"></audio></div>'},useData:!0})},HL6H:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("921v");__webpack_exports__.a=function(value){var int=parseInt(value,10);return isNaN(int)?null:(int>=0?"+":"-")+Math.abs(int)}},I0Tq:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return VoiceView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),shims_mediaelementplayer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("t5dq"),_stores_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("x3EI"),_channels_player__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("9fCi"),_templates_voice__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("HBI5"),_templates_voice__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_templates_voice__WEBPACK_IMPORTED_MODULE_4__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var VoiceView=function(_Marionette$View){var subClass,superClass;function VoiceView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=VoiceView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=VoiceView.prototype;return _proto.initialize=function(options){this.initialized=!1,this.queue=null,this.container=options.container,this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_3__.a,"voice:play",this.onPlay),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_3__.a,"voice:stop media:stop",this.stop),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_3__.a,"voice:hide media:hide",this.stop),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_3__.a,"reset",this.onReset),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b,"change:voice_autoplay",this.onVoiceAutoplayChange)},_proto.className=function(){return"player-voice"},_proto.ui=function(){return{audio:"audio"}},_proto.getTemplate=function(){return _templates_voice__WEBPACK_IMPORTED_MODULE_4___default.a},_proto.onRender=function(){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.appendTo(this.container);var options=_.extend(shims_mediaelementplayer__WEBPACK_IMPORTED_MODULE_1__.a,{type:"audio/mpeg",success:function(mediaElement){_this.initialized=!0,mediaElement.addEventListener("playing",_this.onPlaying.bind(_this)),mediaElement.addEventListener("ended",_this.onEnded.bind(_this)),mediaElement.addEventListener("pause",_this.onPaused.bind(_this)),_this.queue&&(_this.onPlay(_this.queue),_this.queue=null)},error:function(){}});this.mediaElement=new shims_mediaelementplayer__WEBPACK_IMPORTED_MODULE_1__.b(this.ui.audio[0],options)},_proto.onReset=function(){this.stop()},_proto.onPlay=function(options){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),null==this.mediaElement&&this.render(),this.finish(options.model),this.initialized?_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.get("voice_autoplay")||options.force?null!=this.mediaElement&&(this.playing=!1,this.mediaElement.setSrc(options.model.getVoiceURL()),this.model=options.model,this.callback=options.callback,this.mediaElement.load(),this.mediaElement.play()):(this.model=options.model,this.callback=options.callback,this.onEnded()):(this.model=null,this.queue=options)},_proto.stop=function(){null!=this.mediaElement&&this.mediaElement.pause()},_proto.onPlaying=function(){null!=this.model&&(this.model.trigger("voice:playing"),this.playing=!0)},_proto.onEnded=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),null!=this.model&&(this.playing=!1,this.model.trigger("voice:ended"),this.model=null,this.callback&&(this.callback.call(),this.callback=null))},_proto.onPaused=function(){this.onEnded()},_proto.finish=function(newModel){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.model&&newModel!=this.model&&(this.stop(),this.onEnded())},_proto.onVoiceAutoplayChange=function(){!_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.get("voice_autoplay")&&this.playing&&this.stop()},VoiceView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},IseC:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return DEFAULTS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ACCEPT_CONTENT_TYPE_INPUT})),__webpack_require__.d(__webpack_exports__,"b",(function(){return ACCEPT_CONTENT_TYPE_REGEX})),__webpack_require__.d(__webpack_exports__,"e",(function(){return FA_ICONS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return DEFAULT_FA_ICON}));var DEFAULTS={},ACCEPT_CONTENT_TYPE_INPUT="image/*,application/pdf,video/mp4,video/webm,audio/mp3",ACCEPT_CONTENT_TYPE_REGEX=/^image\/.*|application\/pdf|video\/(mp4|webm)|audio\/(mp3|mpeg)$/i,FA_ICONS={pdf:"fa-file-pdf-o",jpeg:"fa-file-image-o",jpg:"fa-file-image-o",png:"fa-file-image-o",gif:"fa-file-image-o",mp4:"fa-file-video-o",mp3:"fa-file-audio-o"},DEFAULT_FA_ICON="fa-file-o"},IzKM:function(module,exports,__webpack_require__){"use strict";var sign=__webpack_require__("WKQi"),abs=Math.abs,floor=Math.floor;module.exports=function(value){return isNaN(value)?0:0!==(value=Number(value))&&isFinite(value)?sign(value)*floor(abs(value)):value}},Jalf:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("OS/U")()?Object.keys:__webpack_require__("nh5T")},JimX:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Videos}));var lib_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("B9Pn"),constants_video__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("FEYq"),_models_video__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("SCz9");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Videos=function(_Backbone$Collection){var subClass,superClass;function Videos(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Videos).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Videos.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_video__WEBPACK_IMPORTED_MODULE_2__.a(attributes,options)},_proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project},_proto.url=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_0__.a.url.project_videos},_proto.parse=function(response){return response.videos},_proto.deleteAll=function(){return this.trigger("deleting"),$.ajax({url:this.url(),method:"DELETE",error:this.deleteError.bind(this),success:this.deleteSuccess.bind(this),contentType:"application/json",dataType:"json"})},_proto.deleteSuccess=function(){this.project.nodes.each((function(node){return node.set("video_id",null)})),this.reset([]),this.trigger("deleting:success")},_proto.deleteError=function(){this.trigger("deleting:error")},_proto.getUploaderFileTypes=function(){return constants_video__WEBPACK_IMPORTED_MODULE_1__.a},Videos}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},JtJh:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="emotion '+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion")||(null!=depth0?lookupProperty(depth0,"emotion"):depth0))?helper:alias2)?helper.call(alias1,{name:"emotion",hash:{},data:data,loc:{start:{line:1,column:293},end:{line:1,column:304}}}):helper)+'"><span class="bt-emotion '+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion")||(null!=depth0?lookupProperty(depth0,"emotion"):depth0))?helper:alias2)?helper.call(alias1,{name:"emotion",hash:{},data:data,loc:{start:{line:1,column:330},end:{line:1,column:341}}}):helper)+'"></span><strong data-translation="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"emotion")||(null!=depth0?lookupProperty(depth0,"emotion"):depth0))?helper:alias2)?helper.call(alias1,{name:"emotion",hash:{},data:data,loc:{start:{line:1,column:376},end:{line:1,column:387}}}):helper)+'">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"name")||(null!=depth0?lookupProperty(depth0,"name"):depth0))?helper:alias2)?helper.call(alias1,{name:"name",hash:{},data:data,loc:{start:{line:1,column:389},end:{line:1,column:397}}}):helper)+"</strong></div>"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="player-row"><div class="player-md-5 player-md-offset-1 player-lg-4 player-lg-offset-0 player-fhd-3 player-xs-hidden player-md-block"><div class="emometer-wrapper"><div class="emometer-block"><div class="emometer js-emotion"><div class="names">'+(null!=(stack1=lookupProperty(helpers,"each").call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"emotions"):depth0,{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:255},end:{line:1,column:421}}}))?stack1:"")+'</div><div class="bar"><div class="track"><div class="thumb js-thumb"></div></div></div></div></div></div></div></div>'},useData:!0})},JvLR:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="user-avatar"style="background-image: url('+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"avatar")||(null!=depth0?lookupProperty(depth0,"avatar"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"avatar",hash:{},data:data,loc:{start:{line:1,column:68},end:{line:1,column:78}}}):helper)+');"></span>'},3:function(container,depth0,helpers,partials,data){var stack1;return" "+(null!=(stack1=container.invokePartial(__webpack_require__("Z0jf"),depth0,{name:"stack_avatar",data:data,helpers:helpers,partials:partials,decorators:container.decorators}))?stack1:"")+" "},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return null!=(stack1=lookupProperty(helpers,"if").call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"avatar"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.program(3,data,0),data:data,loc:{start:{line:1,column:0},end:{line:1,column:124}}}))?stack1:""},usePartial:!0,useData:!0})},"K/Oo":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Backgrounds}));var lib_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("B9Pn"),_models_background__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("G5lL");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Backgrounds=function(_Backbone$Collection){var subClass,superClass;function Backgrounds(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Backgrounds).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Backgrounds.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_background__WEBPACK_IMPORTED_MODULE_1__.a(attributes,options)},_proto.url=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_0__.a.url.backgrounds},_proto.parse=function(response){return response.backgrounds},Backgrounds}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},K4rQ:function(module,exports,__webpack_require__){"use strict";var isFunction=__webpack_require__("mkgK"),classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString;module.exports=function(value){return!!isFunction(value)&&!classRe.test(functionToString.call(value))}},"KUB/":function(module,exports,__webpack_require__){var Keyboard=__webpack_require__("ETNq"),Locale=__webpack_require__("acRa"),KeyCombo=__webpack_require__("f5ld"),keyboard=new Keyboard;keyboard.setLocale("us",__webpack_require__("OqKc")),(exports=module.exports=keyboard).Keyboard=Keyboard,exports.Locale=Locale,exports.KeyCombo=KeyCombo},KZP9:function(module,exports,__webpack_require__){module.exports=function(graph,options){var oriented=(options=options||{}).oriented,quitFast=options.quitFast,heuristic=options.heuristic;heuristic||(heuristic=defaultSettings.heuristic);var distance=options.distance;distance||(distance=defaultSettings.distance);var pool=makeNBASearchStatePool();return{find:function(fromId,toId){var from=graph.getNode(fromId);if(!from)throw new Error("fromId is not defined in this graph: "+fromId);var to=graph.getNode(toId);if(!to)throw new Error("toId is not defined in this graph: "+toId);pool.reset();var minNode,forwardVisitor=oriented?visitN1Oriented:visitN1,reverseVisitor=oriented?visitN2Oriented:visitN2,nodeState=new Map,open1Set=new NodeHeap({compare:defaultSettings.compareF1Score,setNodeId:defaultSettings.setH1}),open2Set=new NodeHeap({compare:defaultSettings.compareF2Score,setNodeId:defaultSettings.setH2}),lMin=Number.POSITIVE_INFINITY,startNode=pool.createNewState(from);nodeState.set(fromId,startNode),startNode.g1=0;var f1=heuristic(from,to);startNode.f1=f1,open1Set.push(startNode);var endNode=pool.createNewState(to);nodeState.set(toId,endNode),endNode.g2=0;var cameFrom,f2=f1;endNode.f2=f2,open2Set.push(endNode);for(;open2Set.length&&open1Set.length&&(open1Set.length<open2Set.length?forwardSearch():reverseSearch(),!quitFast||!minNode););return function(searchState){if(!searchState)return NO_PATH;var path=[searchState.node],parent=searchState.p1;for(;parent;)path.push(parent.node),parent=parent.p1;var child=searchState.p2;for(;child;)path.unshift(child.node),child=child.p2;return path}(minNode);function forwardSearch(){(cameFrom=open1Set.pop()).closed||(cameFrom.closed=!0,cameFrom.f1<lMin&&cameFrom.g1+f2-heuristic(from,cameFrom.node)<lMin&&graph.forEachLinkedNode(cameFrom.node.id,forwardVisitor),open1Set.length>0&&(f1=open1Set.peek().f1))}function reverseSearch(){(cameFrom=open2Set.pop()).closed||(cameFrom.closed=!0,cameFrom.f2<lMin&&cameFrom.g2+f1-heuristic(cameFrom.node,to)<lMin&&graph.forEachLinkedNode(cameFrom.node.id,reverseVisitor),open2Set.length>0&&(f2=open2Set.peek().f2))}function visitN1(otherNode,link){var otherSearchState=nodeState.get(otherNode.id);if(otherSearchState||(otherSearchState=pool.createNewState(otherNode),nodeState.set(otherNode.id,otherSearchState)),!otherSearchState.closed){var tentativeDistance=cameFrom.g1+distance(cameFrom.node,otherNode,link);tentativeDistance<otherSearchState.g1&&(otherSearchState.g1=tentativeDistance,otherSearchState.f1=tentativeDistance+heuristic(otherSearchState.node,to),otherSearchState.p1=cameFrom,otherSearchState.h1<0?open1Set.push(otherSearchState):open1Set.updateItem(otherSearchState.h1));var potentialMin=otherSearchState.g1+otherSearchState.g2;potentialMin<lMin&&(lMin=potentialMin,minNode=otherSearchState)}}function visitN2(otherNode,link){var otherSearchState=nodeState.get(otherNode.id);if(otherSearchState||(otherSearchState=pool.createNewState(otherNode),nodeState.set(otherNode.id,otherSearchState)),!otherSearchState.closed){var tentativeDistance=cameFrom.g2+distance(cameFrom.node,otherNode,link);tentativeDistance<otherSearchState.g2&&(otherSearchState.g2=tentativeDistance,otherSearchState.f2=tentativeDistance+heuristic(from,otherSearchState.node),otherSearchState.p2=cameFrom,otherSearchState.h2<0?open2Set.push(otherSearchState):open2Set.updateItem(otherSearchState.h2));var potentialMin=otherSearchState.g1+otherSearchState.g2;potentialMin<lMin&&(lMin=potentialMin,minNode=otherSearchState)}}function visitN2Oriented(otherNode,link){if(link.toId===cameFrom.node.id)return visitN2(otherNode,link)}function visitN1Oriented(otherNode,link){if(link.fromId===cameFrom.node.id)return visitN1(otherNode,link)}}}};var NodeHeap=__webpack_require__("0I07"),heuristics=__webpack_require__("i4hu"),defaultSettings=__webpack_require__("l3Sp"),makeNBASearchStatePool=__webpack_require__("+t7l"),NO_PATH=defaultSettings.NO_PATH;module.exports.l2=heuristics.l2,module.exports.l1=heuristics.l1},KjdW:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("/Vgd")()?globalThis:__webpack_require__("9ovB")},KuZa:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return AttachmentView}));var loglevel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__),lib_tracer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ZypF"),iv_viewer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("odEd"),iv_viewer__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(iv_viewer__WEBPACK_IMPORTED_MODULE_2__),plyr__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("B7eJ"),plyr_dist_plyr_svg__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("w5ZZ"),pdfobject__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ytaN"),pdfobject__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(pdfobject__WEBPACK_IMPORTED_MODULE_5__),_lib_keyboard__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("v53q"),_stores_settings__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("x3EI"),_templates_attachment__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("/buv"),_templates_attachment__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_templates_attachment__WEBPACK_IMPORTED_MODULE_8__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var AttachmentView=function(_Marionette$View){var subClass,superClass;function AttachmentView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=AttachmentView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=AttachmentView.prototype;return _proto.initialize=function(payload){this.model=payload.attachment,this.title=payload.title},_proto.className=function(){return"player-attachment player-overlay"},_proto.ui=function(){return{container:".js-type-container",player:".js-player"}},_proto.events=function(){return{"click .js-close":"onHide"}},_proto.keyboard=function(){return{keys:"esc",context:"attachment"}},_proto.getTemplate=function(){return _templates_attachment__WEBPACK_IMPORTED_MODULE_8___default.a},_proto.templateContext=function(){var context=this.model.templateContext();return context.content=this.title,context},_proto.onRender=function(){switch(Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.$el.css({visibility:"hidden"}),this.model.get("type")){case"image":this.viewer=new iv_viewer__WEBPACK_IMPORTED_MODULE_2___default.a(this.ui.container.get(0),{});break;case"pdf":case"video":case"youtube":case"vimeo":break;default:loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.error("[AttachmentView] Unsupported attachment type: "+this.model.get("type"))}},_proto.show=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.$el.velocity("fadeIn",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_7__.b.duration,complete:this.afterShow.bind(this),visibility:""}),_lib_keyboard__WEBPACK_IMPORTED_MODULE_6__.a.on(this)},_proto.hide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),_lib_keyboard__WEBPACK_IMPORTED_MODULE_6__.a.off(this),this.viewer&&(this.viewer=this.viewer.destroy()),this.player&&(this.player.stop(),this.player.destroy(),this.player=null),this.$el.velocity("fadeOut",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_7__.b.duration,complete:this.destroy.bind(this)})},_proto.afterShow=function(){switch(this.model.get("type")){case"image":this.showImage();break;case"pdf":this.showPDF();break;case"video":case"youtube":case"vimeo":this.showVideo()}},_proto.showImage=function(){this.viewer.load(this.model.get("url"))},_proto.showPDF=function(){pdfobject__WEBPACK_IMPORTED_MODULE_5___default.a.embed(this.model.get("url"),this.ui.container)},_proto.showVideo=function(){this.player=new plyr__WEBPACK_IMPORTED_MODULE_3__.a(this.ui.player.get(0),{iconUrl:plyr_dist_plyr_svg__WEBPACK_IMPORTED_MODULE_4__.a,autoplay:!0,ratio:"auto",vimeo:{sidedock:0,controls:0}})},_proto.onHide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.hide()},_proto.onShortcut=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.hide()},AttachmentView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},KzmK:function(module,exports){var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(error){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()},LGAl:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return FACE_DEFAULT_HEIGHT})),__webpack_require__.d(__webpack_exports__,"c",(function(){return LG_HEIGHT_RATIO})),__webpack_require__.d(__webpack_exports__,"e",(function(){return MD_HEIGHT})),__webpack_require__.d(__webpack_exports__,"f",(function(){return MD_HEIGHT_RATIO})),__webpack_require__.d(__webpack_exports__,"d",(function(){return MD_FACE_RATIO})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULTS}));var FACE_DEFAULT_HEIGHT=100,LG_HEIGHT_RATIO=.66,MD_HEIGHT=380,MD_HEIGHT_RATIO=.66,MD_FACE_RATIO=1.5,DEFAULTS={emotional:!1,emotions:{normal:{player_url:"",small_url:""}},private:!1,behavior:"selected"}},LLjI:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("Fc97"),isObject=__webpack_require__("tDQ5"),objectToString=Object.prototype.toString;module.exports=function(value){if(!isValue(value))return null;if(isObject(value)){var valueToString=value.toString;if("function"!=typeof valueToString)return null;if(valueToString===objectToString)return null}try{return""+value}catch(error){return null}}},MGtI:function(module,exports,__webpack_require__){module.exports=function(options){"uniqueLinkId"in(options=options||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),options.multigraph=options.uniqueLinkId);void 0===options.multigraph&&(options.multigraph=!1);if("function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var nodes=new Map,links=[],multiEdges={},suspendEvents=0,createLink=options.multigraph?function(fromId,toId,data){var linkId=makeLinkId(fromId,toId),isMultiEdge=multiEdges.hasOwnProperty(linkId);if(isMultiEdge||getLink(fromId,toId)){isMultiEdge||(multiEdges[linkId]=0);var suffix="@"+ ++multiEdges[linkId];linkId=makeLinkId(fromId+suffix,toId+suffix)}return new Link(fromId,toId,data,linkId)}:function(fromId,toId,data){var linkId=makeLinkId(fromId,toId);return new Link(fromId,toId,data,linkId)},changes=[],recordLinkChange=noop,recordNodeChange=noop,enterModification=noop,exitModification=noop,graphPart={addNode:addNode,addLink:function(fromId,toId,data){enterModification();var fromNode=getNode(fromId)||addNode(fromId),toNode=getNode(toId)||addNode(toId),link=createLink(fromId,toId,data);links.push(link),addLinkToNode(fromNode,link),fromId!==toId&&addLinkToNode(toNode,link);return recordLinkChange(link,"add"),exitModification(),link},removeLink:removeLink,removeNode:removeNode,getNode:getNode,getNodeCount:getNodeCount,getLinkCount:getLinkCount,getLinksCount:getLinkCount,getNodesCount:getNodeCount,getLinks:function(nodeId){var node=getNode(nodeId);return node?node.links:null},forEachNode:forEachNode,forEachLinkedNode:function(nodeId,callback,oriented){var node=getNode(nodeId);if(node&&node.links&&"function"==typeof callback)return oriented?function(links,nodeId,callback){for(var i=0;i<links.length;++i){var link=links[i];if(link.fromId===nodeId&&callback(nodes.get(link.toId),link))return!0}}(node.links,nodeId,callback):function(links,nodeId,callback){for(var i=0;i<links.length;++i){var link=links[i],linkedNodeId=link.fromId===nodeId?link.toId:link.fromId;if(callback(nodes.get(linkedNodeId),link))return!0}}(node.links,nodeId,callback)},forEachLink:function(callback){var i,length;if("function"==typeof callback)for(i=0,length=links.length;i<length;++i)callback(links[i])},beginUpdate:enterModification,endUpdate:exitModification,clear:function(){enterModification(),forEachNode((function(node){removeNode(node.id)})),exitModification()},hasLink:getLink,hasNode:getNode,getLink:getLink};return eventify(graphPart),function(){var realOn=graphPart.on;function on(){return graphPart.beginUpdate=enterModification=enterModificationReal,graphPart.endUpdate=exitModification=exitModificationReal,recordLinkChange=recordLinkChangeReal,recordNodeChange=recordNodeChangeReal,graphPart.on=realOn,realOn.apply(graphPart,arguments)}graphPart.on=on}(),graphPart;function recordLinkChangeReal(link,changeType){changes.push({link:link,changeType:changeType})}function recordNodeChangeReal(node,changeType){changes.push({node:node,changeType:changeType})}function addNode(nodeId,data){if(void 0===nodeId)throw new Error("Invalid node identifier");enterModification();var node=getNode(nodeId);return node?(node.data=data,recordNodeChange(node,"update")):(node=new Node(nodeId,data),recordNodeChange(node,"add")),nodes.set(nodeId,node),exitModification(),node}function getNode(nodeId){return nodes.get(nodeId)}function removeNode(nodeId){var node=getNode(nodeId);if(!node)return!1;enterModification();var prevLinks=node.links;if(prevLinks){node.links=null;for(var i=0;i<prevLinks.length;++i)removeLink(prevLinks[i])}return nodes.delete(nodeId),recordNodeChange(node,"remove"),exitModification(),!0}function getNodeCount(){return nodes.size}function getLinkCount(){return links.length}function removeLink(link){if(!link)return!1;var idx=indexOfElementInArray(link,links);if(idx<0)return!1;enterModification(),links.splice(idx,1);var fromNode=getNode(link.fromId),toNode=getNode(link.toId);return fromNode&&(idx=indexOfElementInArray(link,fromNode.links))>=0&&fromNode.links.splice(idx,1),toNode&&(idx=indexOfElementInArray(link,toNode.links))>=0&&toNode.links.splice(idx,1),recordLinkChange(link,"remove"),exitModification(),!0}function getLink(fromNodeId,toNodeId){var i,node=getNode(fromNodeId);if(!node||!node.links)return null;for(i=0;i<node.links.length;++i){var link=node.links[i];if(link.fromId===fromNodeId&&link.toId===toNodeId)return link}return null}function noop(){}function enterModificationReal(){suspendEvents+=1}function exitModificationReal(){0===(suspendEvents-=1)&&changes.length>0&&(graphPart.fire("changed",changes),changes.length=0)}function forEachNode(callback){if("function"!=typeof callback)throw new Error("Function is expected to iterate over graph nodes. You passed "+callback);for(var valuesIterator=nodes.values(),nextValue=valuesIterator.next();!nextValue.done;){if(callback(nextValue.value))return!0;nextValue=valuesIterator.next()}}};var eventify=__webpack_require__("2kBD");function indexOfElementInArray(element,array){if(!array)return-1;if(array.indexOf)return array.indexOf(element);var i,len=array.length;for(i=0;i<len;i+=1)if(array[i]===element)return i;return-1}function Node(id,data){this.id=id,this.links=null,this.data=data}function addLinkToNode(node,link){node.links?node.links.push(link):node.links=[link]}function Link(fromId,toId,data,id){this.fromId=fromId,this.toId=toId,this.data=data,this.id=id}function makeLinkId(fromId,toId){return fromId.toString()+"\ud83d\udc49 "+toId.toString()}},"MiS+":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_){__webpack_require__("v51e"),__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug");var partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("25es"),_timeline__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("oOCt"),_stores_player__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("x3EI"),_channels_player__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("9fCi"),NODE_CHANGES=["content","feedback","emotion","kind","character_id","character_behavior","background_id","background_behavior","attachment_id","voice_id"];__webpack_exports__.a={init:function(){partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:goto",this.onGoto,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:reset",this.onReset,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:start",this.onStart,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:reverse",this.onReverse,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:media:autoplay",this.onMediaAutoplay,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:media:stop",this.onMediaStop,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:resize",this.onResize,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:voice:play",this.onVoicePlay,this),partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.on("player:voice:stop",this.onVoiceStop,this),_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.project.on("change:disable_player_animation",this.onDisablePlayerAnimation,this),_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.project.on("change:disable_choice_numbers",this.onDisableChoiceNumbers,this),_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.project.on("change:randomize_choices_order",this.onRandomizeChoiceOrder,this),_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.project.nodes.on("change",this.onNodeChange,this),_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.project.edges.on("change:content",this.onEdgeChange,this)},onStart:function(){0===_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.scenes().size()&&_timeline__WEBPACK_IMPORTED_MODULE_5__.a.start()},onReset:function(){_timeline__WEBPACK_IMPORTED_MODULE_5__.a.reset()},onGoto:function(node){_timeline__WEBPACK_IMPORTED_MODULE_5__.a.goto({node:node})},onReverse:function(){_timeline__WEBPACK_IMPORTED_MODULE_5__.a.reverse()},onMediaAutoplay:function(state){_stores_settings__WEBPACK_IMPORTED_MODULE_7__.b.set("voice_autoplay",state)},onResize:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("resize")},onMediaStop:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("player:media:stop")},onNodeChange:function(node){return node===_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.lastNode()&&(0!==_.intersection(NODE_CHANGES,_.keys(node.changed)).length&&void(0===_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.length?(_timeline__WEBPACK_IMPORTED_MODULE_5__.a.reset(),_timeline__WEBPACK_IMPORTED_MODULE_5__.a.startTimeline({node:node})):(_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.back(0),_timeline__WEBPACK_IMPORTED_MODULE_5__.a.goto({node:node}))))},onEdgeChange:function(edge){this.onNodeChange(edge.fromNode)},changeCurrentNode:function(payload){partials_dispatcher__WEBPACK_IMPORTED_MODULE_4__.a.Events.trigger("player:current:node",payload.node)},onDisableChoiceNumbers:function(){_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.hasAnyScene()&&(_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges",_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.lastScene()),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges:show"))},onRandomizeChoiceOrder:function(){_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.hasAnyScene()&&(_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges",_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.lastScene()),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges:show"))},onDisablePlayerAnimation:function(){_stores_settings__WEBPACK_IMPORTED_MODULE_7__.b.set("duration",_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.project.get("disable_player_animation")?0:_stores_settings__WEBPACK_IMPORTED_MODULE_7__.a),_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.hasAnyScene()&&_timeline__WEBPACK_IMPORTED_MODULE_5__.a.goto({scene:_stores_player__WEBPACK_IMPORTED_MODULE_6__.a.timeline.lastScene()})},onVoicePlay:function(payload){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("voice:play",payload)},onVoiceStop:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("voice:stop")}}}).call(this,__webpack_require__("5VhH").default)},Mqk3:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_util=__webpack_require__("8Aw6"),_ImageViewer2=(obj=__webpack_require__("bE6X"))&&obj.__esModule?obj:{default:obj};function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_defineProperty(target,key,source[key])}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _get(target,property,receiver){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=function(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(receiver):desc.value}},_get(target,property,receiver||target)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var fullScreenHtml='\n  <div class="iv-fullscreen-container"></div>\n  <div class="iv-fullscreen-close"></div>\n',FullScreenViewer=function(_ImageViewer){function FullScreenViewer(){var _this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,FullScreenViewer);var fullScreenElem=(0,_util.createElement)({tagName:"div",className:"iv-fullscreen",html:fullScreenHtml,parent:document.body}),container=fullScreenElem.querySelector(".iv-fullscreen-container");return _defineProperty(_assertThisInitialized(_this=_possibleConstructorReturn(this,_getPrototypeOf(FullScreenViewer).call(this,container,_objectSpread({},options,{refreshOnResize:!1})))),"hide",(function(){(0,_util.css)(_this._elements.fullScreen,{display:"none"}),(0,_util.removeCss)(document.querySelector("html"),"overflow"),_this._events.onWindowResize()})),_this._elements.fullScreen=fullScreenElem,_this._initFullScreenEvents(),_this}var Constructor,protoProps,staticProps;return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(FullScreenViewer,_ImageViewer),Constructor=FullScreenViewer,(protoProps=[{key:"_initFullScreenEvents",value:function(){var closeBtn=this._elements.fullScreen.querySelector(".iv-fullscreen-close");this._events.onCloseBtnClick=(0,_util.assignEvent)(closeBtn,"click",this.hide)}},{key:"show",value:function(imageSrc,hiResImageSrc){(0,_util.css)(this._elements.fullScreen,{display:"block"}),imageSrc&&this.load(imageSrc,hiResImageSrc),this._events.onWindowResize=(0,_util.assignEvent)(window,"resize",this.refresh),(0,_util.css)(document.querySelector("html"),{overflow:"hidden"})}},{key:"destroy",value:function(){var fullScreen=this._elements.fullScreen;_get(_getPrototypeOf(FullScreenViewer.prototype),"destroy",this).call(this),(0,_util.remove)(fullScreen)}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),FullScreenViewer}(_ImageViewer2.default),_default=FullScreenViewer;exports.default=_default},NAUm:function(module,exports,__webpack_require__){"use strict";var iteratorSymbol=__webpack_require__("gW10").iterator,isArguments=__webpack_require__("5VZH"),isFunction=__webpack_require__("DJTV"),toPosInt=__webpack_require__("wbQR"),callable=__webpack_require__("q/aM"),validValue=__webpack_require__("EmFb"),isValue=__webpack_require__("sgFB"),isString=__webpack_require__("5ECE"),isArray=Array.isArray,call=Function.prototype.call,desc={configurable:!0,enumerable:!0,writable:!0,value:null},defineProperty=Object.defineProperty;module.exports=function(arrayLike){var Context,i,j,arr,length,code,iterator,result,getIterator,value,mapFn=arguments[1],thisArg=arguments[2];if(arrayLike=Object(validValue(arrayLike)),isValue(mapFn)&&callable(mapFn),this&&this!==Array&&isFunction(this))Context=this;else{if(!mapFn){if(isArguments(arrayLike))return 1!==(length=arrayLike.length)?Array.apply(null,arrayLike):((arr=new Array(1))[0]=arrayLike[0],arr);if(isArray(arrayLike)){for(arr=new Array(length=arrayLike.length),i=0;i<length;++i)arr[i]=arrayLike[i];return arr}}arr=[]}if(!isArray(arrayLike))if(void 0!==(getIterator=arrayLike[iteratorSymbol])){for(iterator=callable(getIterator).call(arrayLike),Context&&(arr=new Context),result=iterator.next(),i=0;!result.done;)value=mapFn?call.call(mapFn,thisArg,result.value,i):result.value,Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value,result=iterator.next(),++i;length=i}else if(isString(arrayLike)){for(length=arrayLike.length,Context&&(arr=new Context),i=0,j=0;i<length;++i)value=arrayLike[i],i+1<length&&(code=value.charCodeAt(0))>=55296&&code<=56319&&(value+=arrayLike[++i]),value=mapFn?call.call(mapFn,thisArg,value,j):value,Context?(desc.value=value,defineProperty(arr,j,desc)):arr[j]=value,++j;length=j}if(void 0===length)for(length=toPosInt(arrayLike.length),Context&&(arr=new Context(length)),i=0;i<length;++i)value=mapFn?call.call(mapFn,thisArg,arrayLike[i],i):arrayLike[i],Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value;return Context&&(desc.value=null,arr.length=length),arr}},NAcl:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("sgFB"),forEach=Array.prototype.forEach,create=Object.create,process=function(src,obj){var key;for(key in src)obj[key]=src[key]};module.exports=function(opts1){var result=create(null);return forEach.call(arguments,(function(options){isValue(options)&&process(Object(options),result)})),result}},NBzm:function(module,exports,__webpack_require__){__webpack_require__("oFX8")},NWl0:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Characters}));var lib_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("B9Pn"),_models_character__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("qtWV");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Characters=function(_Backbone$Collection){var subClass,superClass;function Characters(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Characters).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Characters.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_character__WEBPACK_IMPORTED_MODULE_1__.a(attributes,options)},_proto.url=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_0__.a.url.characters},_proto.parse=function(response){return response.characters},Characters}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},NX2P:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FEEDBACK_ICON})),__webpack_require__.d(__webpack_exports__,"b",(function(){return VOICE_ICON}));var FEEDBACK_ICON="fa fa-commenting-o",VOICE_ICON="fa fa-volume-up"},Nogj:function(module,exports){module.exports={NODE_EMOTIONS:["happy","normal","puzzled","unhappy","angry"],NODE_DEFAULT_EMOTION:"normal",NODE_COLORS:["#de2226","#cc3289","#a332cc","#5b32cc","#324ecc","#3295cc","#2ebaa1","#29a659","#d2b211","#d58317","#d56017"],SCORE_UNKNOWN_COLOR:"#cdcdcd",THEME_FONTS:["Arial","Comic Sans MS","Courier","Georgia","Helvetica","Open Sans","Times New Roman","Verdana"],THEME_COLORS:["#000000","#ffffff","#888888","#de2226","#cc3289","#a332cc","#5b32cc","#324ecc","#3295cc","#2ebaa1","#29a659","#d2b211","#d58317","#d56017","#ff4900"],THEME_PLAYER_ATTRIBUTES:{bg_color:[1],speech_bg_color:[1],speech_opacity:[1],answer_bg_color:[1],answer_opacity:[1],highlight_bg_color:[1,2],font_face:[1,2],font_color:[1],custom_css:[1,2]},PROJECT_EMBED_MAXWIDTH:800,PROJECT_EMBED_MAXHEIGHT:500,PROJECT_EMBED_MINWIDTH:440,PROJECT_EMBED_MINHEIGHT:370,PASSWORD_EXPIRATION_DAYS:60,PASSWORD_MIN_LENGTH:8,PLAYLOG_VERSION:4,REVIEWER_INVITE_TIMEOUT:600,SUPPORT_EMAIL:"support@branchtrack.com",VIDEO_FILE_SIZE_LIMIT:67108864,ATTACHMENT_FILE_SIZE_LIMIT:5242880,CLASSROOM_PRIVACY_ICONS:{public:"globe",protected:"lock",private:"lock-user"},PLAYER_TRANSLATIONS:{happy:"Happy",normal:"Normal",puzzled:"Puzzled",unhappy:"Unhappy",angry:"Angry",continue:"continue",score_top:"Points scored",score_bottom:"",show_details:"Show details",total_score_details:"Total score breakdown",interpolation_name:"Player",timeline_cumulative_score:"Score changed:",timeline_total_score:"Total score:",current_score:"Your current score",pts:"PTS",init_voice_content:"This simulation contains voiceover audio. Please choose how do you want to proceed\u2026",init_voice_yes:"Proceed with audio",init_voice_no:"Mute voiceover",menu_simulation_options:"Simulation options",menu_leave_simulation:"Leave simulation",menu_edit_simulation:"Edit simulation",menu_toggle_voiceover:"Toggle voiceover",menu_turn_on_voiceover:"Turn on voiceover",menu_turn_off_voiceover:"Turn off voiceover",menu_turn_on_animation:"Enable animations",menu_turn_off_animation:"Disable animations",menu_close_options:"Close options",menu_show_points_details:"Show points details",menu_close_points_details:"Close details",scene_play_voiceover:"Play voiceover",load_more:"Load more...",finish_replay_link:"Replay",finish_edit_link:"Edit this simulation",finish_projects_link:"Back to simulations",finish_classroom_link:"Back to class"},PLAYER_V1_ONLY_TRANSLATIONS:["score_top","score_bottom","show_details","total_score_details","timeline_cumulative_score","timeline_total_score"],RECAPTCHA_TAG_NAME:"g-recaptcha-response"}},O0Fy:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="audio-container js-type-container"><audio class="js-player"controls="true"><source src="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"url")||(null!=depth0?lookupProperty(depth0,"url"):depth0))?helper:alias2)?helper.call(alias1,{name:"url",hash:{},data:data,loc:{start:{line:1,column:100},end:{line:1,column:107}}}):helper)+'"type="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content_type")||(null!=depth0?lookupProperty(depth0,"content_type"):depth0))?helper:alias2)?helper.call(alias1,{name:"content_type",hash:{},data:data,loc:{start:{line:1,column:114},end:{line:1,column:130}}}):helper)+'"></audio></div>'},useData:!0})},OHGP:function(module,exports,__webpack_require__){"use strict";var resolveException=__webpack_require__("Tz7V"),is=__webpack_require__("K4rQ");module.exports=function(value){return is(value)?value:resolveException(value,"%v is not a plain function",arguments[1])}},"OS/U":function(module,exports,__webpack_require__){"use strict";module.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},OqKc:function(module,exports){module.exports=function(locale,platform,userAgent){locale.bindKeyCode(3,["cancel"]),locale.bindKeyCode(8,["backspace"]),locale.bindKeyCode(9,["tab"]),locale.bindKeyCode(12,["clear"]),locale.bindKeyCode(13,["enter"]),locale.bindKeyCode(16,["shift"]),locale.bindKeyCode(17,["ctrl"]),locale.bindKeyCode(18,["alt","menu"]),locale.bindKeyCode(19,["pause","break"]),locale.bindKeyCode(20,["capslock"]),locale.bindKeyCode(27,["escape","esc"]),locale.bindKeyCode(32,["space","spacebar"]),locale.bindKeyCode(33,["pageup"]),locale.bindKeyCode(34,["pagedown"]),locale.bindKeyCode(35,["end"]),locale.bindKeyCode(36,["home"]),locale.bindKeyCode(37,["left"]),locale.bindKeyCode(38,["up"]),locale.bindKeyCode(39,["right"]),locale.bindKeyCode(40,["down"]),locale.bindKeyCode(41,["select"]),locale.bindKeyCode(42,["printscreen"]),locale.bindKeyCode(43,["execute"]),locale.bindKeyCode(44,["snapshot"]),locale.bindKeyCode(45,["insert","ins"]),locale.bindKeyCode(46,["delete","del"]),locale.bindKeyCode(47,["help"]),locale.bindKeyCode(145,["scrolllock","scroll"]),locale.bindKeyCode(188,["comma",","]),locale.bindKeyCode(190,["period","."]),locale.bindKeyCode(191,["slash","forwardslash","/"]),locale.bindKeyCode(192,["graveaccent","`"]),locale.bindKeyCode(219,["openbracket","["]),locale.bindKeyCode(220,["backslash","\\"]),locale.bindKeyCode(221,["closebracket","]"]),locale.bindKeyCode(222,["apostrophe","'"]),locale.bindKeyCode(48,["zero","0"]),locale.bindKeyCode(49,["one","1"]),locale.bindKeyCode(50,["two","2"]),locale.bindKeyCode(51,["three","3"]),locale.bindKeyCode(52,["four","4"]),locale.bindKeyCode(53,["five","5"]),locale.bindKeyCode(54,["six","6"]),locale.bindKeyCode(55,["seven","7"]),locale.bindKeyCode(56,["eight","8"]),locale.bindKeyCode(57,["nine","9"]),locale.bindKeyCode(96,["numzero","num0"]),locale.bindKeyCode(97,["numone","num1"]),locale.bindKeyCode(98,["numtwo","num2"]),locale.bindKeyCode(99,["numthree","num3"]),locale.bindKeyCode(100,["numfour","num4"]),locale.bindKeyCode(101,["numfive","num5"]),locale.bindKeyCode(102,["numsix","num6"]),locale.bindKeyCode(103,["numseven","num7"]),locale.bindKeyCode(104,["numeight","num8"]),locale.bindKeyCode(105,["numnine","num9"]),locale.bindKeyCode(106,["nummultiply","num*"]),locale.bindKeyCode(107,["numadd","num+"]),locale.bindKeyCode(108,["numenter"]),locale.bindKeyCode(109,["numsubtract","num-"]),locale.bindKeyCode(110,["numdecimal","num."]),locale.bindKeyCode(111,["numdivide","num/"]),locale.bindKeyCode(144,["numlock","num"]),locale.bindKeyCode(112,["f1"]),locale.bindKeyCode(113,["f2"]),locale.bindKeyCode(114,["f3"]),locale.bindKeyCode(115,["f4"]),locale.bindKeyCode(116,["f5"]),locale.bindKeyCode(117,["f6"]),locale.bindKeyCode(118,["f7"]),locale.bindKeyCode(119,["f8"]),locale.bindKeyCode(120,["f9"]),locale.bindKeyCode(121,["f10"]),locale.bindKeyCode(122,["f11"]),locale.bindKeyCode(123,["f12"]),locale.bindMacro("shift + `",["tilde","~"]),locale.bindMacro("shift + 1",["exclamation","exclamationpoint","!"]),locale.bindMacro("shift + 2",["at","@"]),locale.bindMacro("shift + 3",["number","#"]),locale.bindMacro("shift + 4",["dollar","dollars","dollarsign","$"]),locale.bindMacro("shift + 5",["percent","%"]),locale.bindMacro("shift + 6",["caret","^"]),locale.bindMacro("shift + 7",["ampersand","and","&"]),locale.bindMacro("shift + 8",["asterisk","*"]),locale.bindMacro("shift + 9",["openparen","("]),locale.bindMacro("shift + 0",["closeparen",")"]),locale.bindMacro("shift + -",["underscore","_"]),locale.bindMacro("shift + =",["plus","+"]),locale.bindMacro("shift + [",["opencurlybrace","opencurlybracket","{"]),locale.bindMacro("shift + ]",["closecurlybrace","closecurlybracket","}"]),locale.bindMacro("shift + \\",["verticalbar","|"]),locale.bindMacro("shift + ;",["colon",":"]),locale.bindMacro("shift + '",["quotationmark","'"]),locale.bindMacro("shift + !,",["openanglebracket","<"]),locale.bindMacro("shift + .",["closeanglebracket",">"]),locale.bindMacro("shift + /",["questionmark","?"]),platform.match("Mac")?locale.bindMacro("command",["mod","modifier"]):locale.bindMacro("ctrl",["mod","modifier"]);for(var keyCode=65;keyCode<=90;keyCode+=1){var keyName=String.fromCharCode(keyCode+32),capitalKeyName=String.fromCharCode(keyCode);locale.bindKeyCode(keyCode,keyName),locale.bindMacro("shift + "+keyName,capitalKeyName),locale.bindMacro("capslock + "+keyName,capitalKeyName)}var leftCommandKeyCode,rightCommandKeyCode,semicolonKeyCode=userAgent.match("Firefox")?59:186,dashKeyCode=userAgent.match("Firefox")?173:189,equalKeyCode=userAgent.match("Firefox")?61:187;platform.match("Mac")&&(userAgent.match("Safari")||userAgent.match("Chrome"))?(leftCommandKeyCode=91,rightCommandKeyCode=93):platform.match("Mac")&&userAgent.match("Opera")?(leftCommandKeyCode=17,rightCommandKeyCode=17):platform.match("Mac")&&userAgent.match("Firefox")&&(leftCommandKeyCode=224,rightCommandKeyCode=224),locale.bindKeyCode(semicolonKeyCode,["semicolon",";"]),locale.bindKeyCode(dashKeyCode,["dash","-"]),locale.bindKeyCode(equalKeyCode,["equal","equalsign","="]),locale.bindKeyCode(leftCommandKeyCode,["command","windows","win","super","leftcommand","leftwindows","leftwin","leftsuper"]),locale.bindKeyCode(rightCommandKeyCode,["command","windows","win","super","rightcommand","rightwindows","rightwin","rightsuper"]),locale.setKillKey("command")}},Pnc7:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Project}));__webpack_require__("exX3"),__webpack_require__("N6Ff"),__webpack_require__("hmwa"),__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug"),__webpack_require__("921v"),__webpack_require__("olot");var lib_loader__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("B9Pn"),partials_dispatcher__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("25es"),constants_project__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("G4Dd"),ngraph_graph__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("MGtI"),ngraph_graph__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(ngraph_graph__WEBPACK_IMPORTED_MODULE_11__),ngraph_path__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("9QdE"),ngraph_path__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(ngraph_path__WEBPACK_IMPORTED_MODULE_12__),_collections_nodes__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("9seb"),_collections_edges__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("qpBm"),_collections_characters__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("NWl0"),_collections_backgrounds__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("K/Oo"),_collections_attachments__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("V36q"),_collections_voices__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("ASzZ"),_collections_videos__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("JimX"),_collections_scores__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("wK8y");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Project=function(_Backbone$Model){var subClass,superClass;function Project(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Project).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Project.prototype;return _proto.defaults=function(){return constants_project__WEBPACK_IMPORTED_MODULE_10__.a},_proto.urlRoot=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_8__.a.url.projects},_proto.initialize=function(){var _this=this;this.init=!1,this.idAttribute="token",this.nGraph=ngraph_graph__WEBPACK_IMPORTED_MODULE_11___default()(),this.nPath=ngraph_path__WEBPACK_IMPORTED_MODULE_12___default.a.aStar(this.nGraph,{oriented:!0}),this.nodes=new _collections_nodes__WEBPACK_IMPORTED_MODULE_13__.a(this.get("nodes"),{project:this}),this.edges=new _collections_edges__WEBPACK_IMPORTED_MODULE_14__.b(this.get("edges"),{project:this}),this.characters=new _collections_characters__WEBPACK_IMPORTED_MODULE_15__.a(this.get("characters"),{project:this}),this.backgrounds=new _collections_backgrounds__WEBPACK_IMPORTED_MODULE_16__.a(this.get("backgrounds"),{project:this}),this.voices=new _collections_voices__WEBPACK_IMPORTED_MODULE_18__.a(this.get("voices"),{project:this}),this.videos=new _collections_videos__WEBPACK_IMPORTED_MODULE_19__.a(this.get("videos"),{project:this}),this.scores=new _collections_scores__WEBPACK_IMPORTED_MODULE_20__.a(this.get("scores"),{project:this}),this.attachments=new _collections_attachments__WEBPACK_IMPORTED_MODULE_17__.a(this.get("attachments"),{project:this}),["nodes","edges","characters","backgrounds","attachments","voices","videos","scores"].map((function(key){return _this.unset(key)})),this.on("change",this.afterChange,this),this.nodes.on("add remove",this.checkInitialNode,this),this.nodes.on("initial",this.setInitialNode,this),this.init=!0},_proto.serverAttributes=function(){return constants_project__WEBPACK_IMPORTED_MODULE_10__.c.concat(["id","center_top","center_left","workspace_width","workspace_height","parent_id"])},_proto.toJSON=function(options){return void 0===options&&(options={}),options.server?this.pick(this.serverAttributes()):_.clone(this.attributes)},_proto.eventJSON=function(){return this.pick(["token","title","url"])},_proto.parse=function(response){return null!=response.project?response.project:response},_proto.afterChange=function(model,options){void 0===options&&(options={}),_.chain(this.changedAttributes()).keys().any((function(key){return _(constants_project__WEBPACK_IMPORTED_MODULE_10__.c).indexOf(key)>-1})).value()&&this.trigger("sync:queue",this,options)},_proto.setInitialNode=function(node){var old=this.nodes.findWhere({index:this.get("initial_node_index")}),index=node&&node.get("index")||null;this.set("initial_node_index",index),null!=old&&old.trigger("check"),null!=node&&node.trigger("check")},_proto.checkInitialNode=function(node){if(this.get("initial_node_index")){if(this.get("initial_node_index")===node.get("index")&&node.get("deleted")){var firstNode=this.nodes.first();this.set("initial_node_index",firstNode?firstNode.get("index"):0)}}else this.set("initial_node_index",node.get("index")),node.trigger("check")},_proto.reset=function(){this.set(this.defaults,{silent:!0}),this.nodes.reset([]),this.edges.reset([])},_proto.nextNodeIndex=function(){var index=parseInt(this.get("next_node_index"),10)||1;return this.set("next_node_index",index+1),index},_proto.nextEdgeIndex=function(){var index=parseInt(this.get("next_edge_index"),10)||1;return this.set("next_edge_index",index+1),index},_proto.getTitle=function(){return this.escape("title")||"Untitled simulation"},_proto.getCharacter=function(){return this.characters.get(this.get("character_id"))},_proto.getBackground=function(){return this.backgrounds.get(this.get("background_id"))},_proto.loadStats=function(){var _this2=this;return!!this.statsWasLoaded||(this.edges.fetch({url:this.url()+"/stats",complete:function(){_this2.statsWasLoaded=!0,partials_dispatcher__WEBPACK_IMPORTED_MODULE_9__.a.Events.trigger("editor:stats:loaded")}}),!1)},_proto.setTranslations=function(translations){this.translationsCache=null,this.set("translations",translations)},_proto.translations=function(key){return this.translationsCache||(this.translationsCache=_extends({},constants_project__WEBPACK_IMPORTED_MODULE_10__.a.translations,this.get("translations"))),key?this.translationsCache[key]:this.translationsCache},_proto.convertToMultipleScoring=function(convert){void 0===convert&&(convert=!1);var score=this.scores.create({name:"Score #1"});this.nodes.each((function(node){return node.convertToMultipleScores(score.get("uid"),convert)})),this.set("multiple_scoring",!0)},_proto.convertToSingleScoring=function(){this.scores.each((function(score){return score.set("deleted",!0)})),this.scores.remove(this.scores.models),this.nodes.each((function(node){return node.convertToSingleScore()})),this.set("multiple_scoring",!1)},_proto.hasMedia=function(){return!!(this.nodes.any((function(node){return node.getVoiceURL()}))||this.edges.any((function(edge){return edge.getVoiceURL()})))&&{voice:!0}},_proto.purgeNGraphLink=function(fromNodeIndex,toNodeIndex){if(!this.edges.findWhere({from_node_index:fromNodeIndex,to_node_index:toNodeIndex})){var link=this.nGraph.getLink(fromNodeIndex,toNodeIndex);this.nGraph.removeLink(link)}},Project}(Backbone.Model)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},PwMq:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Message}));__webpack_require__("exX3");var _edge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fXDG");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Message=function(_TimelineEntry){var subClass,superClass;function Message(){return _TimelineEntry.apply(this,arguments)||this}superClass=_TimelineEntry,(subClass=Message).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Message.prototype;return _proto.initialize=function(attributes,options){void 0===options&&(options={}),this.node=options.node,this.scene=options.scene},_proto.getContent=function(){return this.escape("content")||""},_proto.edges=function(){var edges=_(this.get("edges")).map((function(attributes){return new _edge__WEBPACK_IMPORTED_MODULE_1__.a(attributes)}));return _(edges)},Message}(__webpack_require__("2DHK").a)}).call(this,__webpack_require__("5VhH").default)},Q6K3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineChoiceView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_actions_timeline__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("oOCt"),_stores_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("x3EI"),_templates_choices_timeline__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("RzE1"),_templates_choices_timeline__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_templates_choices_timeline__WEBPACK_IMPORTED_MODULE_3__),_timeline_entry_view__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("BmSw"),_choice_view__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("R9S+");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var TimelineChoiceView=function(_TimelineEntryView){var subClass,superClass;function TimelineChoiceView(){return _TimelineEntryView.apply(this,arguments)||this}superClass=_TimelineEntryView,(subClass=TimelineChoiceView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=TimelineChoiceView.prototype;return _proto.className=function(){return"choice "+_TimelineEntryView.prototype.className.call(this)},_proto.getTemplate=function(){return _templates_choices_timeline__WEBPACK_IMPORTED_MODULE_3___default.a},_proto.regions=function(){return{choice:"@ui.resize"}},_proto.beforeShow=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.showChildView("choice",new _choice_view__WEBPACK_IMPORTED_MODULE_5__.a({model:this.model})),this.getChildView("choice").hideFooter(),this.getChildView("choice").showFooter(.7*_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration)},_proto.afterShow=function(){this.getChildView("choice").previewScores(),_actions_timeline__WEBPACK_IMPORTED_MODULE_1__.a.afterChoiceShow({choice:this.model})},_proto.getChildRegionHeight=function(){return this.getChildView("choice").getHeight()},_proto.getChildViewOffset=function(){return this.model.get("offset")},TimelineChoiceView}(_timeline_entry_view__WEBPACK_IMPORTED_MODULE_4__.a)},Qg0J:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("EPFB")("key","value","key+value")},R5f6:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("Fc97"),isPlainFunction=__webpack_require__("K4rQ"),assign=__webpack_require__("1G0L"),normalizeOpts=__webpack_require__("NAcl"),contains=__webpack_require__("wQ3O"),d=module.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||"string"!=typeof dscr?(options=value,value=dscr,dscr=null):options=arguments[2],isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e"),w=contains.call(dscr,"w")):(c=w=!0,e=!1),desc={value:value,configurable:c,enumerable:e,writable:w},options?assign(normalizeOpts(options),desc):desc};d.gs=function(dscr,get,set){var c,e,options,desc;return"string"!=typeof dscr?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],isValue(get)?isPlainFunction(get)?isValue(set)?isPlainFunction(set)||(options=set,set=void 0):set=void 0:(options=get,get=set=void 0):get=void 0,isValue(dscr)?(c=contains.call(dscr,"c"),e=contains.call(dscr,"e")):(c=!0,e=!1),desc={get:get,set:set,configurable:c,enumerable:e},options?assign(normalizeOpts(options),desc):desc}},"R9S+":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineChoiceView}));__webpack_require__("qoQZ"),__webpack_require__("V4Jz"),__webpack_require__("8At4"),__webpack_require__("fAGv");var lib_tracer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ZypF"),lib_autolink__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Z/ZA"),lib_interpolation__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("g86V"),_channels_player__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("9fCi"),_stores_player__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("x3EI"),_templates_choices_show__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("RojC"),_templates_choices_show__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_templates_choices_show__WEBPACK_IMPORTED_MODULE_10__),_templates_choices_scores__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("f/2M"),_templates_choices_scores__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_templates_choices_scores__WEBPACK_IMPORTED_MODULE_11__),_behaviors_autolink_clickable__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("kPJp");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var AUTOLINK_OPTIONS={target:"_blank",rel:"nofollow",class:"theme-highlight-font-color js-autolink"},TimelineChoiceView=function(_Marionette$View){var subClass,superClass;function TimelineChoiceView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=TimelineChoiceView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=TimelineChoiceView.prototype;return _proto.tagName=function(){return"div"},_proto.className=function(){return"timeline-choice"},_proto.ui=function(){return{content:".js-content",bubble:".js-bubble",avatar:".js-avatar",voice:".js-voice",footer:".js-footer",scores:"small.js-score",score:"strong.js-score",scoreSpacer:".js-score-spacer"}},_proto.events=function(){return{"click @ui.score":"onToggleScores","click @ui.voice":"onToggleVoice"}},_proto.behaviors=function(){return[_behaviors_autolink_clickable__WEBPACK_IMPORTED_MODULE_12__.a]},_proto.modelEvents=function(){return{"voice:playing":"onVoicePlaying","voice:paused voice:ended":"onVoiceStop"}},_proto.getTemplate=function(){return _templates_choices_show__WEBPACK_IMPORTED_MODULE_10___default.a},_proto.templateContext=function(){return{content:this.getContent(),voice:this.getVoiceURL(),order:this.model.get("order"),user:_.clone(_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.user.attributes),multiple:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.get("multiple_scoring"),score:this.model.get("score"),scores:this.model.getScores(),color:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.playlog?"":this.model.getColor(),enable_choice_numbers:!_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.get("disable_choice_numbers"),index_name:this.model.edge.getIndexName()}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_4__.a)(this),this.ui.footer.css({visibility:"hidden"})},_proto.getHeight=function(){return this.$el.outerHeight()},_proto.getContent=function(){var content=this.model.getContent();return content="<p>"+(content=Object(lib_interpolation__WEBPACK_IMPORTED_MODULE_6__.a)(content).replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"</p><p>"))+"</p>",Object(lib_autolink__WEBPACK_IMPORTED_MODULE_5__.a)(content,AUTOLINK_OPTIONS)},_proto.getVoiceURL=function(){return this.model.getVoiceURL()},_proto.onVoicePlaying=function(){this.voicing=!0,this.ui.voice.addClass("active")},_proto.onVoiceStop=function(){this.voicing=!1,this.ui.voice.removeClass("active")},_proto.onToggleVoice=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_4__.a)(this),this.voicing?_channels_player__WEBPACK_IMPORTED_MODULE_7__.a.trigger("voice:stop"):_channels_player__WEBPACK_IMPORTED_MODULE_7__.a.trigger("voice:play",{model:this.model,force:!0})},_proto.hideFooter=function(){this.ui.footer.css({visibility:"hidden"})},_proto.showFooter=function(delay){this.ui.footer.velocity({opacity:[1,0]},{visibility:"visible",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,delay:delay})},_proto.previewScores=function(){var scoreOffset=this.ui.score.offset();_.each(this.ui.scores,(function(el,index){var $el=$(el);$el.velocity({translateX:[scoreOffset.left-$el.offset().left,0]},{visibility:"hidden",delay:3e3-70*index,duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,easing:"ease-in"}),$el.velocity({opacity:0},{delay:3e3+_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration/2-70*index,duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration/2,queue:!1})}))},_proto.onToggleScores=function(){var _this=this;_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.get("multiple_scoring")&&(this.scoresTemplate||(this.scoresTemplate=_templates_choices_scores__WEBPACK_IMPORTED_MODULE_11___default()({scores:this.model.getScores()}),this.ui.score.parent().append(this.scoresTemplate),this.ui.scoresVertical=this.$el.find(".js-scores-vertical"),this.$scores=this.ui.scoresVertical.find(".js-score"),this.$scores.each((function(index,el){$(el).velocity({translateY:20*(_this.$scores.length-index),opacity:0},{duration:0})}))),this.scoreShown?this.hideScores():this.showScores())},_proto.hideScores=function(){var _this2=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_4__.a)(this),this.scoreShown=!1,this.stopListening(_channels_player__WEBPACK_IMPORTED_MODULE_7__.a,"current:unload"),this.ui.scoreSpacer.velocity({height:0},{delay:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration}),this.$scores.each((function(index,el){$(el).velocity({translateY:20*(_this2.$scores.length-index),opacity:0},{visibility:"hidden",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,delay:50*(_this2.$scores.length-index)}).siblings(".name").velocity({opacity:0},{visibility:"hidden",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,delay:50*(_this2.$scores.length-index)})}))},_proto.showScores=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_4__.a)(this),this.scoreShown=!0,this.listenToOnce(_channels_player__WEBPACK_IMPORTED_MODULE_7__.a,"current:unload",this.hideScores),this.ui.scoreSpacer.velocity({height:this.ui.scoresVertical.height()},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration}),this.$scores.each((function(index,el){$(el).velocity({translateY:0,opacity:1},{visibility:"visible",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,delay:50*index}).siblings(".name").velocity({opacity:1},{visibility:"visible",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration,delay:200+50*index})}))},TimelineChoiceView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},RIFn:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return SENSITIVE_ATTRIBUTES})),__webpack_require__.d(__webpack_exports__,"c",(function(){return EMOTIONS})),__webpack_require__.d(__webpack_exports__,"a",(function(){return COLORS})),__webpack_require__.d(__webpack_exports__,"d",(function(){return FREETEXT_DEFAULT_CONTENT})),__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULTS}));var SENSITIVE_ATTRIBUTES=["kind","index","deleted","content","top","left","emotion","feedback","wcag_character_text","score","scores","color","character_id","background_id","character_behavior","background_behavior","attachment_id","voice_id","video_id","default_edge_index","show_edges_delay","show_score_with_feedback"],EMOTIONS=["happy","normal","puzzled","unhappy","angry"],COLORS=["#cc3232","#cc3289","#a332cc","#5b32cc","#324ecc","#3295cc","#2ebaa1","#29a659","#d2b211","#d58317","#d56017"],FREETEXT_DEFAULT_CONTENT="Please enter your free text comment in the field below.",DEFAULTS={kind:"regular",index:0,content:"",top:0,left:0,score:null,scores:null,emotion:"normal",color:"",feedback:"",wcag_character_text:"",unresolved_comments_count:0,default_edge_index:null,show_edges_delay:null,character_behavior:null,background_behavior:null,show_score_with_feedback:!0,deleted:!1}},RJo4:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineFeedbackView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_channels_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9fCi"),_templates_feedbacks_timeline__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("uWKT"),_templates_feedbacks_timeline__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_templates_feedbacks_timeline__WEBPACK_IMPORTED_MODULE_2__),_actions_timeline__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("oOCt");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var TimelineFeedbackView=function(_TimelineEntryView){var subClass,superClass;function TimelineFeedbackView(){return _TimelineEntryView.apply(this,arguments)||this}superClass=_TimelineEntryView,(subClass=TimelineFeedbackView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=TimelineFeedbackView.prototype;return _proto.className=function(){return"scene "+_TimelineEntryView.prototype.className.call(this)},_proto.getTemplate=function(){return _templates_feedbacks_timeline__WEBPACK_IMPORTED_MODULE_2___default.a},_proto.regions=function(){return{feedback:"@ui.resize"}},_proto.beforeShow=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this);var view=_channels_player__WEBPACK_IMPORTED_MODULE_1__.a.request("current:entry:view");view.removeTabIndex(),this.showChildView("feedback",view)},_proto.afterShow=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_3__.a.afterFeedbackShown({model:this.model})},_proto.showScoreLayer=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_3__.a.showScoreDetails({scene:this.model.scene})},_proto.getChildRegionHeight=function(){return this.getChildView("feedback").getHeight()},TimelineFeedbackView}(__webpack_require__("BmSw").a)},"Rd/G":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return ScrollableView}));__webpack_require__("N6Ff");var lib_tracer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ZypF"),lib_browser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("W5ou"),constants_character__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("LGAl"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("v53q"),_channels_player__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOCt"),_templates_scrollable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("zNQj"),_templates_scrollable__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_templates_scrollable__WEBPACK_IMPORTED_MODULE_7__),_stores_player__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("x3EI"),_timeline_view__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("bm2U"),_current_view__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("sqH0"),_current_choice_view__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("WI2A"),_character_view__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("a0TI"),_userzone_view__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("UdPV"),_emotion_meter_view__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("/b8Q");function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var TRANSFORM_PROPERTY=Object(lib_browser__WEBPACK_IMPORTED_MODULE_2__.b)("<10")?"msTransform":Object(lib_browser__WEBPACK_IMPORTED_MODULE_2__.a)("<36")?"webkitTransform":"transform",ScrollableView=function(_Marionette$View){var subClass,superClass;function ScrollableView(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Marionette$View.call.apply(_Marionette$View,[this].concat(args))||this).onTouchMove=_this.onTouchMove.bind(_assertThisInitialized(_this)),_this.onTouchEnd=_this.onTouchEnd.bind(_assertThisInitialized(_this)),_this.onScrollbarMouseMove=_this.onScrollbarMouseMove.bind(_assertThisInitialized(_this)),_this.onScrollbarMouseStop=_this.onScrollbarMouseStop.bind(_assertThisInitialized(_this)),_this}superClass=_Marionette$View,(subClass=ScrollableView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=ScrollableView.prototype;return _proto.initialize=function(){this.bottom=0,this.scrollHeight=0,this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"reset",this.onReset),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"scroll:fix",this.onFix),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"scroll:top:check",this.onTopButtonCheck),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"scroll:top:hide",this.onTopButtonHide),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"timeline:entries:visibility_change",this.onTimelineEntriesVisibilityChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"scrollable:scroll",this.toggleScrollToBottom),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"current:scene",this.onModelChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"current:unload",this.onCurrentUnload),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b,"change:height change:screens",this.onHeightChange)},_proto.className=function(){return"player-scrollable"},_proto.ui=function(){return{content:".js-scrollable",top:".js-scroll-top",bottom:".js-scroll-bottom",scrollbar:".js-scrollbar",thumb:".js-scroll-thumb",track:".js-scroll-bg",loadMore:".js-load-more",current:".js-current",scene:".js-current-scene",character:".js-character-placeholder",bubbles:".js-bubbles",ovals:".js-bubbles span"}},_proto.keyboard=function(){return{keys:["pageup","pagedown","up","down"]}},_proto.regions=function(){return{timeline:".js-timeline",scene:"@ui.scene",character:".js-character",choice:".js-current-choice",userzone:".js-userzone",emotionMeter:".js-emotion-meter"}},_proto.events=function(){return{scroll:"onBrowserScroll",touchstart:"onTouchStart",mousewheel:"onWheel","click @ui.bottom":"onScrollToBottom","click @ui.top":"onScrollToTop","click @ui.loadMore":"onLoadMore","click @ui.scrollbar":"onScrollbarClick","mouseenter @ui.scrollbar":"onScrollbarFocus","mouseleave @ui.scrollbar":"onScrollbarBlur","mousedown @ui.thumb":"onScrollbarMouseStart"}},_proto.getTemplate=function(){return _templates_scrollable__WEBPACK_IMPORTED_MODULE_7___default.a},_proto.templateContext=function(){return{load_more_text:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.translations("load_more")}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.ui.ovals.css({display:"none"}),this.onReset(),this.setSceneMinHeight(),this.showChildView("timeline",new _timeline_view__WEBPACK_IMPORTED_MODULE_10__.a),this.showChildView("character",new _character_view__WEBPACK_IMPORTED_MODULE_13__.a),this.showChildView("scene",new _current_view__WEBPACK_IMPORTED_MODULE_11__.a),this.showChildView("choice",new _current_choice_view__WEBPACK_IMPORTED_MODULE_12__.a),this.showChildView("userzone",new _userzone_view__WEBPACK_IMPORTED_MODULE_14__.a),this.showChildView("emotionMeter",new _emotion_meter_view__WEBPACK_IMPORTED_MODULE_15__.a),_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__.a.on(this)},_proto.onAttach=function(){this.setScrollHeight()},_proto.onShortcut=function(event){var deltaY;switch(event.key){case"ArrowUp":if(this.desiredBottomForTop)return void this.onScrollToTop();deltaY=-.3;break;case"ArrowDown":deltaY=.3;break;case"PageUp":if(this.desiredBottomForTop)return void this.onScrollToTop();deltaY=-.9;break;case"PageDown":deltaY=.9;break;default:return}this.scroll({deltaY:deltaY*_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.get("height"),animate:!0})},_proto.onLoadMore=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.loadMoreTimelineEntries()},_proto.onTimelineEntriesVisibilityChange=function(payload){this.ui.loadMore.css({visibility:payload.show?"visible":"hidden"}),this.setContentHeight(),this.setScrollThumbPosition({animate:!1})},_proto.onFix=function(){0!==this.bottom&&this.onScrollToBottom()},_proto.onTopButtonCheck=function(){var bottom=this.ui.current.height()-this.$el.height();bottom>0&&this.showScrollToTop({bottom:bottom})},_proto.onTopButtonHide=function(){this.hideScrollToTop()},_proto.onTouchStart=function(event){this.touches=[],this.deltaY=null,this.velocity=null,this.acceleration=null,this.startClientY=this.findClientY(event),this.startBottom=this.bottom,this.$el.on("touchmove",this.onTouchMove).on("touchend",this.onTouchEnd)},_proto.onTouchMove=function(event){event.preventDefault();var clientY=this.findClientY(event);this.touches.push([clientY,event.timeStamp]),this.touches.length>3&&this.touches.shift(),this.scroll({bottom:this.startBottom+(clientY-this.startClientY)})},_proto.onTouchEnd=function(){this.$el.off("touchmove",this.onTouchMove).off("touchend",this.onTouchEnd),this.touches.length>1&&(this.deltaY=this.touches[this.touches.length-1][0]-this.touches[0][0],this.deltaTime=this.touches[this.touches.length-1][1]-this.touches[0][1],this.velocity=Math.abs(this.deltaY/this.deltaTime*10),this.acceleration=Math.sqrt(this.velocity),Math.abs(this.deltaY)>0&&this.momentum())},_proto.onWheel=function(event){0!==event.deltaY&&(this.scroll({deltaY:-event.deltaY*event.deltaFactor,event:event})&&(this.showScrollbar(),this.scrollbarFocus||this.setScrollbarTimer()))},_proto.scroll=function(payload){this.setContentHeight();var animate=payload.animate||!1,bottom=payload.deltaY?this.bottom-payload.deltaY:payload.bottom;return(bottom=Math.min(Math.max(bottom,0),Math.max(this.contentHeight-this.scrollHeight,0)))!==this.bottom&&(animate?this.ui.content.velocity({translateY:[bottom,this.bottom]},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration}):this.ui.content.get(0).style[TRANSFORM_PROPERTY]="translateY("+bottom+"px)",this.bottom=bottom,this.setScrollThumbPosition({animate:animate}),_channels_player__WEBPACK_IMPORTED_MODULE_5__.a.trigger("scrollable:scroll",{relative:this.bottom/this.scrollHeight,animate:animate}),this.desiredBottomForTop&&this.desiredBottomForTop<this.bottom&&this.hideScrollToTop(),payload.event&&payload.event.preventDefault(),!0)},_proto.setScrollThumbPosition=function(payload){var relative=0;this.bottom>0&&this.contentHeight>this.scrollHeight&&(relative=this.bottom/(this.contentHeight-this.scrollHeight));var bottom=.9*relative*100,opacity=Math.min(this.bottom/this.scrollHeight,1)/2,duration=payload.animate?_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration:0;this.ui.thumb.velocity("stop").velocity({bottom:bottom+"%"},{duration:duration}),this.ui.track.velocity("stop").velocity({opacity:opacity},{duration:duration})},_proto.onScrollToTop=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.scroll({bottom:this.ui.current.height()-this.scrollHeight+10,animate:!0})},_proto.onScrollToBottom=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.scroll({bottom:0,animate:!0})},_proto.showScrollToTop=function(payload){this.desiredBottomForTop=payload.bottom,this.ui.top.velocity({opacity:1},{display:"block",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration})},_proto.hideScrollToTop=function(){this.desiredBottomForTop=!1,this.ui.top.velocity({opacity:0},{display:"none",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration})},_proto.toggleScrollToBottom=function(payload){var opacity=Math.max(0,Math.min(1,3*payload.relative));opacity!==this.bottomButtonOpacity&&(this.bottomButtonOpacity=opacity,payload.animate?this.ui.bottom.velocity({opacity:opacity},{display:opacity>0?"block":"none",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration}):this.ui.bottom.css({opacity:opacity,display:opacity>0?"block":"none"}))},_proto.momentum=function(){Math.abs(this.velocity)>1&&(this.acceleration=Math.min(Math.sqrt(this.acceleration),1),this.velocity-=this.acceleration,this.scroll({deltaY:this.deltaY/Math.abs(this.deltaY)*-1*this.velocity}),setTimeout(this.momentum.bind(this),10))},_proto.findClientY=function(e){var event=e.originalEvent||e;return event.touches&&event.touches.length>0?event.touches[0].clientY:event.changedTouches&&event.changedTouches.length>0?event.changedTouches[0].clientY:event.clientY},_proto.setSceneMinHeight=function(){if(_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.screen("lg")){var height=_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.get("height")*constants_character__WEBPACK_IMPORTED_MODULE_3__.c;this.ui.scene.parent().css("min-height",height),this.ui.bubbles.css({bottom:height})}else this.ui.scene.parent().css("min-height",""),this.ui.bubbles.css({bottom:""})},_proto.onHeightChange=function(){this.setSceneMinHeight(),this.setScrollHeight(),this.setCharacterPlaceholderHeight()},_proto.onModelChange=function(model){model.getCharacter()&&(this.trigger("character:placeholder:show"),this.ui.ovals.each((function(index){$(this).velocity({scale:[1,0]},{display:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration/3,delay:index*_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration/6})})))},_proto.onCurrentUnload=function(){var length=this.ui.ovals.length;this.ui.ovals.each((function(index){$(this).velocity({scale:[0,1]},{display:"none",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration/3,delay:(length-index-1)*_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration/6})}))},_proto.onCharacterPlaceholderShow=function(){this.characterPlaceholderShown=!0,this.setCharacterPlaceholderHeight(0===_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.timeline.length?0:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.duration)},_proto.onReset=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.characterPlaceholderShown=!1,this.ui.character.css({height:0}),this.ui.loadMore.css({visibility:"hidden"}),this.hideScrollToTop(),this.toggleScrollToBottom({relative:0}),this.listenToOnce(this,"character:placeholder:show",this.onCharacterPlaceholderShow)},_proto.setScrollHeight=function(){this.scrollHeight=this.$el.height()},_proto.setContentHeight=function(){this.contentHeight=this.ui.content.height()},_proto.setCharacterPlaceholderHeight=function(duration){if(void 0===duration&&(duration=0),this.characterPlaceholderShown){var height=Math.min(_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.get("height")*constants_character__WEBPACK_IMPORTED_MODULE_3__.f,constants_character__WEBPACK_IMPORTED_MODULE_3__.e)-58;this.ui.character.velocity({height:height},{duration:duration})}},_proto.onScrollbarFocus=function(){this.scrollbarFocus=!0,this.setContentHeight(),this.showScrollbar()},_proto.onScrollbarBlur=function(){this.scrollbarFocus=!1,this.setScrollbarTimer()},_proto.setScrollbarTimer=function(){this.scrollbarTimer=setTimeout(this.hideScrollbar.bind(this),3e3)},_proto.showScrollbar=function(){clearTimeout(this.scrollbarTimer),this.scrollbarShown||this.contentHeight>this.scrollHeight&&(this.scrollbarShown=!0,this.ui.scrollbar.velocity("stop").velocity({opacity:1}))},_proto.hideScrollbar=function(){this.scrollbarShown&&(this.scrollbarShown=!1,this.ui.scrollbar.velocity("stop").velocity({opacity:0}))},_proto.onScrollbarClick=function(event){if(this.setContentHeight(),this.contentHeight>this.scrollHeight){var margin=.1*this.scrollHeight/2,relative=1-(event.clientY-margin)/(this.scrollHeight-2*margin);this.scroll({bottom:(this.contentHeight-this.scrollHeight)*relative})}},_proto.onScrollbarMouseStart=function(){this.$el.addClass("scrolling"),this.$el.on("mousemove",this.onScrollbarMouseMove),this.$el.one("mouseup",this.onScrollbarMouseStop)},_proto.onScrollbarMouseMove=function(event){this.onScrollbarClick(event)},_proto.onScrollbarMouseStop=function(){this.$el.removeClass("scrolling"),this.$el.off("mousemove",this.onScrollbarMouseMove)},_proto.onBrowserScroll=function(_event){var bottom=this.el.scrollTop;this.el.scrollTop=0,this.scroll({bottom:bottom,animate:!0})},ScrollableView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},RojC:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<footer class="timeline right js-footer"><div class="scoring">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"multiple"):depth0,{name:"if",hash:{},fn:container.program(2,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:75},end:{line:1,column:222}}}))?stack1:"")+'<div class="total-score"><strong class="score js-score'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"multiple"):depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:276},end:{line:1,column:309}}}))?stack1:"")+' theme-highlight-bg-color">'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"score")||(null!=depth0?lookupProperty(depth0,"score"):depth0))?helper:container.hooks.helperMissing)?helper.call(alias1,{name:"score",hash:{},data:data,loc:{start:{line:1,column:336},end:{line:1,column:345}}}):helper)+"</strong></div></div></footer>"},2:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return" "+(null!=(stack1=lookupProperty(helpers,"each").call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"scores"):depth0,{name:"each",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:92},end:{line:1,column:214}}}))?stack1:"")+" "},3:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<small class="score js-score"title="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"name")||(null!=depth0?lookupProperty(depth0,"name"):depth0))?helper:alias2)?helper.call(alias1,{name:"name",hash:{},data:data,loc:{start:{line:1,column:144},end:{line:1,column:152}}}):helper)+'"style="background-color:'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"color")||(null!=depth0?lookupProperty(depth0,"color"):depth0))?helper:alias2)?helper.call(alias1,{name:"color",hash:{},data:data,loc:{start:{line:1,column:177},end:{line:1,column:186}}}):helper)+'">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"score")||(null!=depth0?lookupProperty(depth0,"score"):depth0))?helper:alias2)?helper.call(alias1,{name:"score",hash:{},data:data,loc:{start:{line:1,column:188},end:{line:1,column:197}}}):helper)+"</small>"},5:function(container,depth0,helpers,partials,data){return" clickable"},7:function(container,depth0,helpers,partials,data){return'<footer class="timeline left"><a href="javascript:;"class="js-voice voice-icon theme-highlight-bg-color"><span class="fa fa-volume-down"></span></a></footer>'},9:function(container,depth0,helpers,partials,data){return" bottom-space"},11:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<strong class="edge-position theme-highlight-bg-color">'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"order")||(null!=depth0?lookupProperty(depth0,"order"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"order",hash:{},data:data,loc:{start:{line:1,column:769},end:{line:1,column:778}}}):helper)+"</strong>"},13:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="color"style="background-color:'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"color")||(null!=depth0?lookupProperty(depth0,"color"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"color",hash:{},data:data,loc:{start:{line:1,column:935},end:{line:1,column:944}}}):helper)+'"></span>'},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"score"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:0},end:{line:1,column:382}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"voice"):depth0,{name:"if",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:383},end:{line:1,column:560}}}))?stack1:"")+'<div class="bubble choice'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"enable_bottom_spacing"):depth0,{name:"if",hash:{},fn:container.program(9,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:585},end:{line:1,column:634}}}))?stack1:"")+" js-bubble "+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"index_name")||(null!=depth0?lookupProperty(depth0,"index_name"):depth0))?helper:alias2)?helper.call(alias1,{name:"index_name",hash:{},data:data,loc:{start:{line:1,column:645},end:{line:1,column:659}}}):helper)+'"tabindex="-1"notranslate>'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"enable_choice_numbers"):depth0,{name:"if",hash:{},fn:container.program(11,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:685},end:{line:1,column:794}}}))?stack1:"")+'<div class="content"dir="auto">'+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:825},end:{line:1,column:838}}}):helper)?stack1:"")+'</div><div class="js-score-spacer"></div>'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"color"):depth0,{name:"if",hash:{},fn:container.program(13,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:879},end:{line:1,column:960}}}))?stack1:"")+"</div>"},useData:!0})},RzE1:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="player-xs-11 player-xs-offset-1 player-md-5 player-md-offset-7 player-lg-4 player-lg-offset-8"><div class="js-resize"></div></div>'},useData:!0})},Rzmm:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("DDrh"),__webpack_require__("9wHH"),__webpack_require__("Cwug"),__webpack_require__("WIcX");__webpack_exports__.a=function(project){var url,assets={initial:new Set,rest:new Set},index=project.get("initial_node_index"),initial=project.nodes.findWhere({index:index});return project.nodes.each((function(node){node.get("background_id")&&(url=project.backgrounds.get(node.get("background_id")).imageURL({style:"fhd"}))&&assets[initial==node?"initial":"rest"].add(url),node.get("character_id")&&(url=project.characters.get(node.get("character_id")).imageURL({style:"player",emotion:node.getEmotion()}))&&assets[initial==node?"initial":"rest"].add(url),assets.rest.delete(Array.from(assets.initial))})),assets}},S4vC:function(module,exports,__webpack_require__){"use strict";var callable=__webpack_require__("q/aM"),forEach=__webpack_require__("XH3X"),call=Function.prototype.call;module.exports=function(obj,cb){var result={},thisArg=arguments[2];return callable(cb),forEach(obj,(function(value,key,targetObj,index){result[key]=call.call(cb,thisArg,value,key,targetObj,index)})),result}},SCz9:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Video}));var constants_video__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("FEYq");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Video=function(_Backbone$Model){var subClass,superClass;function Video(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Video).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Video.prototype;return _proto.defaults=function(){return constants_video__WEBPACK_IMPORTED_MODULE_0__.b},_proto.getDuration=function(){var duration=this.get("duration")||0,mins=Math.floor(duration/60),secs=Math.round(duration%60);return(mins=mins<10?"0"+mins:mins)+":"+(secs=secs<10?"0"+secs:secs)},_proto.parse=function(response){return null!=response.video?response.video:response},Video}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},TRXX:function(module,exports,__webpack_require__){"use strict";var StringIterator,setPrototypeOf=__webpack_require__("uew1"),d=__webpack_require__("R5f6"),Symbol=__webpack_require__("gW10"),Iterator=__webpack_require__("Vty4"),defineProperty=Object.defineProperty;StringIterator=module.exports=function(str){if(!(this instanceof StringIterator))throw new TypeError("Constructor requires 'new'");str=String(str),Iterator.call(this,str),defineProperty(this,"__length__",d("",str.length))},setPrototypeOf&&setPrototypeOf(StringIterator,Iterator),delete StringIterator.prototype.constructor,StringIterator.prototype=Object.create(Iterator.prototype,{_next:d((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:d((function(i){var code,char=this.__list__[i];return this.__nextIndex__===this.__length__?char:(code=char.charCodeAt(0))>=55296&&code<=56319?char+this.__list__[this.__nextIndex__++]:char}))}),defineProperty(StringIterator.prototype,Symbol.toStringTag,d("c","String Iterator"))},Tz7V:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("Fc97"),isObject=__webpack_require__("tDQ5"),stringCoerce=__webpack_require__("LLjI"),toShortString=__webpack_require__("ilcR"),resolveMessage=function(message,value){return message.replace("%v",toShortString(value))};module.exports=function(value,defaultMessage,inputOptions){if(!isObject(inputOptions))throw new TypeError(resolveMessage(defaultMessage,value));if(!isValue(value)){if("default"in inputOptions)return inputOptions.default;if(inputOptions.isOptional)return null}var errorMessage=stringCoerce(inputOptions.errorMessage);throw isValue(errorMessage)||(errorMessage=defaultMessage),new TypeError(resolveMessage(errorMessage,value))}},UdPV:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Userzone}));__webpack_require__("8At4"),__webpack_require__("fAGv");var lib_tracer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ZypF"),_channels_player__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("oOCt"),_stores_player__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("x3EI"),_templates_userzone__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5AVa"),_templates_userzone__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_templates_userzone__WEBPACK_IMPORTED_MODULE_7__),_templates_user_points__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("EmxI"),_templates_user_points__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_templates_user_points__WEBPACK_IMPORTED_MODULE_8__),_models_choice__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("cfm5");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Userzone=function(_Marionette$View){var subClass,superClass;function Userzone(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=Userzone).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Userzone.prototype;return _proto.initialize=function(){this.score=null,this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_3__.a,"current:scene",this.onSceneChange),this.listenTo(_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.timeline,"add",this.onTimelineAdd),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b,"change:voice_button",this.onVoiceButtonChange),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b,"change:voice_autoplay",this.onVoiceAutoplayChange)},_proto.className=function(){return"player-userzone"},_proto.ui=function(){return{voice:".js-voice",voiceIcon:".js-voice-icon",score:".js-score",points:".js-points",menu:".js-menu"}},_proto.events=function(){return{"click @ui.score":"showScoreLayer","click @ui.voice":"onVoiceToggle","click @ui.menu":"showMenu"}},_proto.getTemplate=function(){return _templates_userzone__WEBPACK_IMPORTED_MODULE_7___default.a},_proto.templateContext=function(){return _.extend(_.clone(_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.user.attributes),{multiple:_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.get("multiple_scoring"),voice_button:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_button"),voice_icon:this.getVoiceIcon(),translations:_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.translations()})},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.ui.score.css({display:"none",opacity:0})},_proto.onSceneChange=function(scene){this.renderScore(scene)},_proto.onTimelineAdd=function(model){model instanceof _models_choice__WEBPACK_IMPORTED_MODULE_9__.a&&this.renderScore(model)},_proto.renderScore=function(model){var score=model.get("total_score");if(this.score!=score){if(null!=score){this.ui.points.text(score);var html=_templates_user_points__WEBPACK_IMPORTED_MODULE_8___default()({points:score,pts_text:_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.translations("pts")});null==this.score?(this.ui.score.html(html),this.ui.score.velocity({opacity:1},{display:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration})):(this.ui.score.find("> span").css({position:"absolute",right:0}).velocity({scale:2,opacity:0},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration,complete:function(){$(this).remove()}}),this.ui.score.append(html))}else this.ui.score.velocity({opacity:0},{display:"none",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration});this.score=score}},_proto.showMenu=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_4__.a.showMenu()},_proto.showScoreLayer=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_4__.a.showScoreDetails()},_proto.getVoiceIcon=function(){return _stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_autoplay")?"fa-volume-up":"fa-volume-down"},_proto.onVoiceButtonChange=function(){var enable=_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.get("voice_button");this.ui.voice.velocity({opacity:enable?1:0},{display:enable?"":"none",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_6__.b.duration})},_proto.onVoiceAutoplayChange=function(){this.ui.voiceIcon.removeClass("fa-volume-up fa-volume-down").addClass(this.getVoiceIcon())},_proto.onVoiceToggle=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_4__.a.toggleVoiceAutoplay()},Userzone}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},V36q:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Attachments}));var lib_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("B9Pn"),constants_attachment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("IseC"),_models_attachment__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("2vyi");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Attachments=function(_Backbone$Collection){var subClass,superClass;function Attachments(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Attachments).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Attachments.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_attachment__WEBPACK_IMPORTED_MODULE_2__.a(attributes,options)},_proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project,this.listenTo(this.project.nodes,"change:attachment_id remove",this.onNodeAttachmentChange),this.listenTo(this,"remove",this.onAttachmentRemove)},_proto.url=function(){return lib_loader__WEBPACK_IMPORTED_MODULE_0__.a.url.project_attachments},_proto.parse=function(response){return response.attachments},_proto.onNodeAttachmentChange=function(node){var previousID=node.previous("attachment_id"),currentID=node.get("attachment_id");previousID&&this.get(previousID)&&this.get(previousID).trigger("change:node_ids"),currentID&&this.get(currentID).trigger("change:node_ids")},_proto.onAttachmentRemove=function(attachment){this.unlink(attachment)},_proto.getUploaderFileTypes=function(){return constants_attachment__WEBPACK_IMPORTED_MODULE_1__.b},_proto.unlink=function(attachment){var nodes=this.project.nodes.where({attachment_id:attachment.get("id")});_(nodes).each((function(node){node.set("attachment_id",null)}))},Attachments}(Backbone.Collection)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},V7B1:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("sgFB"),map={function:!0,object:!0};module.exports=function(value){return isValue(value)&&map[typeof value]||!1}},VLRA:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="js-progress theme-highlight-bg-color"></div>'},useData:!0})},VZh8:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return PlayerView}));__webpack_require__("li+S");var lib_tracer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ZypF"),constants_player__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("Gn5B"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("v53q"),_stores_player__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("unFh"),_channels_player__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOCt"),_stores_settings__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("x3EI"),_background_view__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("yb66"),_scrollable_view__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("Rd/G"),_score_details_view__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("ExbZ"),_shortcuts_view__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("ZyO1"),_progress_bar_view__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("9Cd6"),_voice_view__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("I0Tq"),_menu_view__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("5VcS"),_attachment_view__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("KuZa"),_notification_view__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("fgXJ");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var PlayerView=function(_Marionette$View){var subClass,superClass;function PlayerView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=PlayerView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=PlayerView.prototype;return _proto.initialize=function(){this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"resize",this.onResize),this.listenTo(_stores_player__WEBPACK_IMPORTED_MODULE_4__.a.project,"change:translations",this.onTranslationsChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"score_details:show",this.onRenderScoreDetails),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"shortcuts:show",this.onRenderShortcuts),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"menu:show",this.onRenderMenu),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"attachment:show",this.onRenderAttachment),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_5__.a,"notification:show",this.onRenderNotification),$(window).on("resize",_.throttle(this.onResize.bind(this),100,{leading:!1}))},_proto.className=function(){return"player"},_proto.ui=function(){return{preloader:".js-player-preloader"}},_proto.keyboard=function(){return{keys:["m","s","v","f","?"],global:!0}},_proto.getTemplate=function(){return _.noop},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.setDimensions(),this.hidePreloader(),(new _background_view__WEBPACK_IMPORTED_MODULE_8__.a).render().$el.appendTo(this.el),(new _progress_bar_view__WEBPACK_IMPORTED_MODULE_12__.a).render().$el.appendTo(this.el);var view=(new _scrollable_view__WEBPACK_IMPORTED_MODULE_9__.a).render();view.$el.appendTo(this.el),view.triggerMethod("attach"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_3__.a.on(this),new _voice_view__WEBPACK_IMPORTED_MODULE_13__.a({container:this.el,autoplay:!_stores_player__WEBPACK_IMPORTED_MODULE_4__.a.editor})},_proto.onResize=function(){this.setDimensions()},_proto.setDimensions=function(){var width=this.$el.width(),height=this.$el.height(),removeClass=[],addClass=["player-xs"],screens=[];_.each(constants_player__WEBPACK_IMPORTED_MODULE_2__.a,(function(v,k){width>=k?(screens.push(v),addClass.push("player-"+v)):removeClass.push("player-"+v)})),this.$el.addClass(addClass.join(" ")).removeClass(removeClass.join(" ")),_stores_settings__WEBPACK_IMPORTED_MODULE_7__.b.set({width:width,height:height,screens:screens,portrait:width<height,landscape:width>=height})},_proto.onRenderScoreDetails=function(payload){var view=new _score_details_view__WEBPACK_IMPORTED_MODULE_10__.a(payload).render();view.$el.appendTo(this.el),view.show()},_proto.onRenderShortcuts=function(){var view=(new _shortcuts_view__WEBPACK_IMPORTED_MODULE_11__.a).render();view.$el.appendTo(this.el),view.show()},_proto.onRenderMenu=function(){var view=(new _menu_view__WEBPACK_IMPORTED_MODULE_14__.a).render();view.$el.appendTo(this.el),view.show()},_proto.onRenderAttachment=function(payload){var view=new _attachment_view__WEBPACK_IMPORTED_MODULE_15__.a(payload).render();view.$el.appendTo(this.el),view.show()},_proto.onRenderNotification=function(model){var view=new _notification_view__WEBPACK_IMPORTED_MODULE_16__.a({model:model}).render();view.$el.appendTo(this.el),view.show()},_proto.hidePreloader=function(){var _this=this;this.ui.preloader.velocity({opacity:[0,1]},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_7__.b.duration,complete:function(){return _this.ui.preloader.remove()}})},_proto.onTranslationsChange=function(){var translations=_stores_player__WEBPACK_IMPORTED_MODULE_4__.a.project.translations();this.$("[data-translation]").each((function(){var $this=$(this),key=$this.data("translation");$this.html(_.escape(translations[key]))}))},_proto.onShortcut=function(event){if(_lib_keyboard__WEBPACK_IMPORTED_MODULE_3__.a.getContext())return!1;switch(event.key){case"m":return _actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.showMenu();case"s":return _actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.showScoreDetails();case"v":return _actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.toggleVoiceAutoplay();case"?":return _actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.showShorcuts();case"f":return _actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.toggleDebugFace()}},PlayerView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},VdUP:function(module,exports,__webpack_require__){"use strict";var isArguments=__webpack_require__("5VZH"),callable=__webpack_require__("q/aM"),isString=__webpack_require__("5ECE"),get=__webpack_require__("Zvox"),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;module.exports=function(iterable,cb){var mode,result,doBreak,broken,i,length,char,code,thisArg=arguments[2];if(isArray(iterable)||isArguments(iterable)?mode="array":isString(iterable)?mode="string":iterable=get(iterable),callable(cb),doBreak=function(){broken=!0},"array"!==mode)if("string"!==mode)for(result=iterable.next();!result.done;){if(call.call(cb,thisArg,result.value,doBreak),broken)return;result=iterable.next()}else for(length=iterable.length,i=0;i<length&&(char=iterable[i],i+1<length&&(code=char.charCodeAt(0))>=55296&&code<=56319&&(char+=iterable[++i]),call.call(cb,thisArg,char,doBreak),!broken);++i);else some.call(iterable,(function(value){return call.call(cb,thisArg,value,doBreak),broken}))}},Vty4:function(module,exports,__webpack_require__){"use strict";var Iterator,clear=__webpack_require__("9v3Y"),assign=__webpack_require__("1G0L"),callable=__webpack_require__("q/aM"),value=__webpack_require__("EmFb"),d=__webpack_require__("R5f6"),autoBind=__webpack_require__("DWl2"),Symbol=__webpack_require__("gW10"),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties;module.exports=Iterator=function(list,context){if(!(this instanceof Iterator))throw new TypeError("Constructor requires 'new'");defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)}),context&&(callable(context.on),context.on("_add",this._onAdd),context.on("_delete",this._onDelete),context.on("_clear",this._onClear))},delete Iterator.prototype.constructor,defineProperties(Iterator.prototype,assign({_next:d((function(){var i;if(this.__list__)return this.__redo__&&void 0!==(i=this.__redo__.shift())?i:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:d((function(){return this._createResult(this._next())})),_createResult:d((function(i){return void 0===i?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}})),_resolve:d((function(i){return this.__list__[i]})),_unBind:d((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:d((function(){return"[object "+(this[Symbol.toStringTag]||"Object")+"]"}))},autoBind({_onAdd:d((function(index){index>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(redo,i){redo>=index&&(this.__redo__[i]=++redo)}),this),this.__redo__.push(index)):defineProperty(this,"__redo__",d("c",[index])))})),_onDelete:d((function(index){var i;index>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(index))&&this.__redo__.splice(i,1),this.__redo__.forEach((function(redo,j){redo>index&&(this.__redo__[j]=--redo)}),this)))})),_onClear:d((function(){this.__redo__&&clear.call(this.__redo__),this.__nextIndex__=0}))}))),defineProperty(Iterator.prototype,Symbol.iterator,d((function(){return this})))},W5ou:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isIE})),__webpack_require__.d(__webpack_exports__,"a",(function(){return isChrome}));__webpack_require__("qoQZ"),__webpack_require__("8At4"),__webpack_require__("fAGv"),__webpack_require__("sccJ"),__webpack_require__("C9yj"),__webpack_require__("E03B"),__webpack_require__("/xhF"),__webpack_require__("BzOA"),__webpack_require__("exX3"),__webpack_require__("nPQI"),__webpack_require__("x8ax"),__webpack_require__("921v"),__webpack_require__("li+S"),__webpack_require__("v51e"),__webpack_require__("olot"),__webpack_require__("N6Ff");var BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var utils_Utils=function(){function Utils(){}return Utils.getFirstMatch=function(regexp,ua){var match=ua.match(regexp);return match&&match.length>0&&match[1]||""},Utils.getSecondMatch=function(regexp,ua){var match=ua.match(regexp);return match&&match.length>1&&match[2]||""},Utils.matchAndReturnConst=function(regexp,ua,_const){if(regexp.test(ua))return _const},Utils.getWindowsVersionName=function(version){switch(version){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},Utils.getMacOSVersionName=function(version){var v=version.split(".").splice(0,2).map((function(s){return parseInt(s,10)||0}));if(v.push(0),10===v[0])switch(v[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},Utils.getAndroidVersionName=function(version){var v=version.split(".").splice(0,2).map((function(s){return parseInt(s,10)||0}));if(v.push(0),!(1===v[0]&&v[1]<5))return 1===v[0]&&v[1]<6?"Cupcake":1===v[0]&&v[1]>=6?"Donut":2===v[0]&&v[1]<2?"Eclair":2===v[0]&&2===v[1]?"Froyo":2===v[0]&&v[1]>2?"Gingerbread":3===v[0]?"Honeycomb":4===v[0]&&v[1]<1?"Ice Cream Sandwich":4===v[0]&&v[1]<4?"Jelly Bean":4===v[0]&&v[1]>=4?"KitKat":5===v[0]?"Lollipop":6===v[0]?"Marshmallow":7===v[0]?"Nougat":8===v[0]?"Oreo":9===v[0]?"Pie":void 0},Utils.getVersionPrecision=function(version){return version.split(".").length},Utils.compareVersions=function(versionA,versionB,isLoose){void 0===isLoose&&(isLoose=!1);var versionAPrecision=Utils.getVersionPrecision(versionA),versionBPrecision=Utils.getVersionPrecision(versionB),precision=Math.max(versionAPrecision,versionBPrecision),lastPrecision=0,chunks=Utils.map([versionA,versionB],(function(version){var delta=precision-Utils.getVersionPrecision(version),_version=version+new Array(delta+1).join(".0");return Utils.map(_version.split("."),(function(chunk){return new Array(20-chunk.length).join("0")+chunk})).reverse()}));for(isLoose&&(lastPrecision=precision-Math.min(versionAPrecision,versionBPrecision)),precision-=1;precision>=lastPrecision;){if(chunks[0][precision]>chunks[1][precision])return 1;if(chunks[0][precision]===chunks[1][precision]){if(precision===lastPrecision)return 0;precision-=1}else if(chunks[0][precision]<chunks[1][precision])return-1}},Utils.map=function(arr,iterator){var i,result=[];if(Array.prototype.map)return Array.prototype.map.call(arr,iterator);for(i=0;i<arr.length;i+=1)result.push(iterator(arr[i]));return result},Utils.find=function(arr,predicate){var i,l;if(Array.prototype.find)return Array.prototype.find.call(arr,predicate);for(i=0,l=arr.length;i<l;i+=1){var value=arr[i];if(predicate(value,i))return value}},Utils.assign=function(obj){for(var i,l,result=obj,_len=arguments.length,assigners=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)assigners[_key-1]=arguments[_key];if(Object.assign)return _extends.apply(void 0,[obj].concat(assigners));var _loop=function(){var assigner=assigners[i];"object"==typeof assigner&&null!==assigner&&Object.keys(assigner).forEach((function(key){result[key]=assigner[key]}))};for(i=0,l=assigners.length;i<l;i+=1)_loop();return obj},Utils.getBrowserAlias=function(browserName){return BROWSER_ALIASES_MAP[browserName]},Utils.getBrowserTypeByAlias=function(browserAlias){return BROWSER_MAP[browserAlias]||""},Utils}(),commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe:function(ua){var browser={name:"Googlebot"},version=utils_Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/opera/i],describe:function(ua){var browser={name:"Opera"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/opr\/|opios/i],describe:function(ua){var browser={name:"Opera"},version=utils_Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/SamsungBrowser/i],describe:function(ua){var browser={name:"Samsung Internet for Android"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/Whale/i],describe:function(ua){var browser={name:"NAVER Whale Browser"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/MZBrowser/i],describe:function(ua){var browser={name:"MZ Browser"},version=utils_Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/focus/i],describe:function(ua){var browser={name:"Focus"},version=utils_Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/swing/i],describe:function(ua){var browser={name:"Swing"},version=utils_Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/coast/i],describe:function(ua){var browser={name:"Opera Coast"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(ua){var browser={name:"Opera Touch"},version=utils_Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/yabrowser/i],describe:function(ua){var browser={name:"Yandex Browser"},version=utils_Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/ucbrowser/i],describe:function(ua){var browser={name:"UC Browser"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/Maxthon|mxios/i],describe:function(ua){var browser={name:"Maxthon"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/epiphany/i],describe:function(ua){var browser={name:"Epiphany"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/puffin/i],describe:function(ua){var browser={name:"Puffin"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/sleipnir/i],describe:function(ua){var browser={name:"Sleipnir"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/k-meleon/i],describe:function(ua){var browser={name:"K-Meleon"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/micromessenger/i],describe:function(ua){var browser={name:"WeChat"},version=utils_Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/qqbrowser/i],describe:function(ua){var browser={name:/qqbrowserlite/i.test(ua)?"QQ Browser Lite":"QQ Browser"},version=utils_Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/msie|trident/i],describe:function(ua){var browser={name:"Internet Explorer"},version=utils_Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/\sedg\//i],describe:function(ua){var browser={name:"Microsoft Edge"},version=utils_Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/edg([ea]|ios)/i],describe:function(ua){var browser={name:"Microsoft Edge"},version=utils_Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/vivaldi/i],describe:function(ua){var browser={name:"Vivaldi"},version=utils_Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/seamonkey/i],describe:function(ua){var browser={name:"SeaMonkey"},version=utils_Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/sailfish/i],describe:function(ua){var browser={name:"Sailfish"},version=utils_Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,ua);return version&&(browser.version=version),browser}},{test:[/silk/i],describe:function(ua){var browser={name:"Amazon Silk"},version=utils_Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/phantom/i],describe:function(ua){var browser={name:"PhantomJS"},version=utils_Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/slimerjs/i],describe:function(ua){var browser={name:"SlimerJS"},version=utils_Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(ua){var browser={name:"BlackBerry"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/(web|hpw)[o0]s/i],describe:function(ua){var browser={name:"WebOS Browser"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua)||utils_Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/bada/i],describe:function(ua){var browser={name:"Bada"},version=utils_Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/tizen/i],describe:function(ua){var browser={name:"Tizen"},version=utils_Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/qupzilla/i],describe:function(ua){var browser={name:"QupZilla"},version=utils_Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/firefox|iceweasel|fxios/i],describe:function(ua){var browser={name:"Firefox"},version=utils_Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/electron/i],describe:function(ua){var browser={name:"Electron"},version=utils_Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/MiuiBrowser/i],describe:function(ua){var browser={name:"Miui"},version=utils_Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/chromium/i],describe:function(ua){var browser={name:"Chromium"},version=utils_Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,ua)||utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/chrome|crios|crmo/i],describe:function(ua){var browser={name:"Chrome"},version=utils_Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:[/GSA/i],describe:function(ua){var browser={name:"Google Search"},version=utils_Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,ua);return version&&(browser.version=version),browser}},{test:function(parser){var notLikeAndroid=!parser.test(/like android/i),butAndroid=parser.test(/android/i);return notLikeAndroid&&butAndroid},describe:function(ua){var browser={name:"Android Browser"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/playstation 4/i],describe:function(ua){var browser={name:"PlayStation 4"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/safari|applewebkit/i],describe:function(ua){var browser={name:"Safari"},version=utils_Utils.getFirstMatch(commonVersionIdentifier,ua);return version&&(browser.version=version),browser}},{test:[/.*/i],describe:function(ua){var regexp=-1!==ua.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:utils_Utils.getFirstMatch(regexp,ua),version:utils_Utils.getSecondMatch(regexp,ua)}}}],parser_browsers=browsersList,parser_os=(__webpack_require__("V4Jz"),[{test:[/Roku\/DVP/],describe:function(ua){var version=utils_Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,ua);return{name:OS_MAP.Roku,version:version}}},{test:[/windows phone/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,ua);return{name:OS_MAP.WindowsPhone,version:version}}},{test:[/windows /i],describe:function(ua){var version=utils_Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,ua),versionName=utils_Utils.getWindowsVersionName(version);return{name:OS_MAP.Windows,version:version,versionName:versionName}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(ua){var result={name:OS_MAP.iOS},version=utils_Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,ua);return version&&(result.version=version),result}},{test:[/macintosh/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,ua).replace(/[_\s]/g,"."),versionName=utils_Utils.getMacOSVersionName(version),os={name:OS_MAP.MacOS,version:version};return versionName&&(os.versionName=versionName),os}},{test:[/(ipod|iphone|ipad)/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,ua).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:version}}},{test:function(parser){var notLikeAndroid=!parser.test(/like android/i),butAndroid=parser.test(/android/i);return notLikeAndroid&&butAndroid},describe:function(ua){var version=utils_Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,ua),versionName=utils_Utils.getAndroidVersionName(version),os={name:OS_MAP.Android,version:version};return versionName&&(os.versionName=versionName),os}},{test:[/(web|hpw)[o0]s/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,ua),os={name:OS_MAP.WebOS};return version&&version.length&&(os.version=version),os}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,ua)||utils_Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,ua)||utils_Utils.getFirstMatch(/\bbb(\d+)/i,ua);return{name:OS_MAP.BlackBerry,version:version}}},{test:[/bada/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,ua);return{name:OS_MAP.Bada,version:version}}},{test:[/tizen/i],describe:function(ua){var version=utils_Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,ua);return{name:OS_MAP.Tizen,version:version}}},{test:[/linux/i],describe:function(){return{name:OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(ua){var version=utils_Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,ua);return{name:OS_MAP.PlayStation4,version:version}}}]),parser_platforms=(__webpack_require__("GAxB"),[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(ua){var model=utils_Utils.getFirstMatch(/(can-l01)/i,ua)&&"Nova",platform={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return model&&(platform.model=model),platform}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:PLATFORMS_MAP.tablet}}},{test:function(parser){var iDevice=parser.test(/ipod|iphone/i),likeIDevice=parser.test(/like (ipod|iphone)/i);return iDevice&&!likeIDevice},describe:function(ua){var model=utils_Utils.getFirstMatch(/(ipod|iphone)/i,ua);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:model}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:PLATFORMS_MAP.mobile}}},{test:function(parser){return"blackberry"===parser.getBrowserName(!0)},describe:function(){return{type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(parser){return"bada"===parser.getBrowserName(!0)},describe:function(){return{type:PLATFORMS_MAP.mobile}}},{test:function(parser){return"windows phone"===parser.getBrowserName()},describe:function(){return{type:PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(parser){var osMajorVersion=Number(String(parser.getOSVersion()).split(".")[0]);return"android"===parser.getOSName(!0)&&osMajorVersion>=3},describe:function(){return{type:PLATFORMS_MAP.tablet}}},{test:function(parser){return"android"===parser.getOSName(!0)},describe:function(){return{type:PLATFORMS_MAP.mobile}}},{test:function(parser){return"macos"===parser.getOSName(!0)},describe:function(){return{type:PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(parser){return"windows"===parser.getOSName(!0)},describe:function(){return{type:PLATFORMS_MAP.desktop}}},{test:function(parser){return"linux"===parser.getOSName(!0)},describe:function(){return{type:PLATFORMS_MAP.desktop}}},{test:function(parser){return"playstation 4"===parser.getOSName(!0)},describe:function(){return{type:PLATFORMS_MAP.tv}}},{test:function(parser){return"roku"===parser.getOSName(!0)},describe:function(){return{type:PLATFORMS_MAP.tv}}}]),parser_engines=[{test:function(parser){return"microsoft edge"===parser.getBrowserName(!0)},describe:function(ua){if(/\sedg\//i.test(ua))return{name:ENGINE_MAP.Blink};var version=utils_Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,ua);return{name:ENGINE_MAP.EdgeHTML,version:version}}},{test:[/trident/i],describe:function(ua){var engine={name:ENGINE_MAP.Trident},version=utils_Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,ua);return version&&(engine.version=version),engine}},{test:function(parser){return parser.test(/presto/i)},describe:function(ua){var engine={name:ENGINE_MAP.Presto},version=utils_Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,ua);return version&&(engine.version=version),engine}},{test:function(parser){var isGecko=parser.test(/gecko/i),likeGecko=parser.test(/like gecko/i);return isGecko&&!likeGecko},describe:function(ua){var engine={name:ENGINE_MAP.Gecko},version=utils_Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,ua);return version&&(engine.version=version),engine}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(ua){var engine={name:ENGINE_MAP.WebKit},version=utils_Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,ua);return version&&(engine.version=version),engine}}],parser=function(){function Parser(UA,skipParsing){if(void 0===skipParsing&&(skipParsing=!1),null==UA||""===UA)throw new Error("UserAgent parameter can't be empty");this._ua=UA,this.parsedResult={},!0!==skipParsing&&this.parse()}var _proto=Parser.prototype;return _proto.getUA=function(){return this._ua},_proto.test=function(regex){return regex.test(this._ua)},_proto.parseBrowser=function(){var _this=this;this.parsedResult.browser={};var browserDescriptor=utils_Utils.find(parser_browsers,(function(_browser){if("function"==typeof _browser.test)return _browser.test(_this);if(_browser.test instanceof Array)return _browser.test.some((function(condition){return _this.test(condition)}));throw new Error("Browser's test function is not valid")}));return browserDescriptor&&(this.parsedResult.browser=browserDescriptor.describe(this.getUA())),this.parsedResult.browser},_proto.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},_proto.getBrowserName=function(toLowerCase){return toLowerCase?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},_proto.getBrowserVersion=function(){return this.getBrowser().version},_proto.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},_proto.parseOS=function(){var _this2=this;this.parsedResult.os={};var os=utils_Utils.find(parser_os,(function(_os){if("function"==typeof _os.test)return _os.test(_this2);if(_os.test instanceof Array)return _os.test.some((function(condition){return _this2.test(condition)}));throw new Error("Browser's test function is not valid")}));return os&&(this.parsedResult.os=os.describe(this.getUA())),this.parsedResult.os},_proto.getOSName=function(toLowerCase){var name=this.getOS().name;return toLowerCase?String(name).toLowerCase()||"":name||""},_proto.getOSVersion=function(){return this.getOS().version},_proto.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},_proto.getPlatformType=function(toLowerCase){void 0===toLowerCase&&(toLowerCase=!1);var type=this.getPlatform().type;return toLowerCase?String(type).toLowerCase()||"":type||""},_proto.parsePlatform=function(){var _this3=this;this.parsedResult.platform={};var platform=utils_Utils.find(parser_platforms,(function(_platform){if("function"==typeof _platform.test)return _platform.test(_this3);if(_platform.test instanceof Array)return _platform.test.some((function(condition){return _this3.test(condition)}));throw new Error("Browser's test function is not valid")}));return platform&&(this.parsedResult.platform=platform.describe(this.getUA())),this.parsedResult.platform},_proto.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},_proto.getEngineName=function(toLowerCase){return toLowerCase?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},_proto.parseEngine=function(){var _this4=this;this.parsedResult.engine={};var engine=utils_Utils.find(parser_engines,(function(_engine){if("function"==typeof _engine.test)return _engine.test(_this4);if(_engine.test instanceof Array)return _engine.test.some((function(condition){return _this4.test(condition)}));throw new Error("Browser's test function is not valid")}));return engine&&(this.parsedResult.engine=engine.describe(this.getUA())),this.parsedResult.engine},_proto.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},_proto.getResult=function(){return utils_Utils.assign({},this.parsedResult)},_proto.satisfies=function(checkTree){var _this5=this,platformsAndOSes={},platformsAndOSCounter=0,browsers={},browsersCounter=0;if(Object.keys(checkTree).forEach((function(key){var currentDefinition=checkTree[key];"string"==typeof currentDefinition?(browsers[key]=currentDefinition,browsersCounter+=1):"object"==typeof currentDefinition&&(platformsAndOSes[key]=currentDefinition,platformsAndOSCounter+=1)})),platformsAndOSCounter>0){var platformsAndOSNames=Object.keys(platformsAndOSes),OSMatchingDefinition=utils_Utils.find(platformsAndOSNames,(function(name){return _this5.isOS(name)}));if(OSMatchingDefinition){var osResult=this.satisfies(platformsAndOSes[OSMatchingDefinition]);if(void 0!==osResult)return osResult}var platformMatchingDefinition=utils_Utils.find(platformsAndOSNames,(function(name){return _this5.isPlatform(name)}));if(platformMatchingDefinition){var platformResult=this.satisfies(platformsAndOSes[platformMatchingDefinition]);if(void 0!==platformResult)return platformResult}}if(browsersCounter>0){var browserNames=Object.keys(browsers),matchingDefinition=utils_Utils.find(browserNames,(function(name){return _this5.isBrowser(name,!0)}));if(void 0!==matchingDefinition)return this.compareVersion(browsers[matchingDefinition])}},_proto.isBrowser=function(browserName,includingAlias){void 0===includingAlias&&(includingAlias=!1);var defaultBrowserName=this.getBrowserName().toLowerCase(),browserNameLower=browserName.toLowerCase(),alias=utils_Utils.getBrowserTypeByAlias(browserNameLower);return includingAlias&&alias&&(browserNameLower=alias.toLowerCase()),browserNameLower===defaultBrowserName},_proto.compareVersion=function(version){var expectedResults=[0],comparableVersion=version,isLoose=!1,currentBrowserVersion=this.getBrowserVersion();if("string"==typeof currentBrowserVersion)return">"===version[0]||"<"===version[0]?(comparableVersion=version.substr(1),"="===version[1]?(isLoose=!0,comparableVersion=version.substr(2)):expectedResults=[],">"===version[0]?expectedResults.push(1):expectedResults.push(-1)):"="===version[0]?comparableVersion=version.substr(1):"~"===version[0]&&(isLoose=!0,comparableVersion=version.substr(1)),expectedResults.indexOf(utils_Utils.compareVersions(currentBrowserVersion,comparableVersion,isLoose))>-1},_proto.isOS=function(osName){return this.getOSName(!0)===String(osName).toLowerCase()},_proto.isPlatform=function(platformType){return this.getPlatformType(!0)===String(platformType).toLowerCase()},_proto.isEngine=function(engineName){return this.getEngineName(!0)===String(engineName).toLowerCase()},_proto.is=function(anything,includingAlias){return void 0===includingAlias&&(includingAlias=!1),this.isBrowser(anything,includingAlias)||this.isOS(anything)||this.isPlatform(anything)},_proto.some=function(anythings){var _this6=this;return void 0===anythings&&(anythings=[]),anythings.some((function(anything){return _this6.is(anything)}))},Parser}();function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}var browser_browser=function(){function Bowser(){}var Constructor,protoProps,staticProps;return Bowser.getParser=function(UA,skipParsing){if(void 0===skipParsing&&(skipParsing=!1),"string"!=typeof UA)throw new Error("UserAgent should be a string");return new parser(UA,skipParsing)},Bowser.parse=function(UA){return new parser(UA).getResult()},Constructor=Bowser,staticProps=[{key:"BROWSER_MAP",get:function(){return BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return ENGINE_MAP}},{key:"OS_MAP",get:function(){return OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return PLATFORMS_MAP}}],(protoProps=null)&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Bowser}().getParser(window.navigator.userAgent);function isIE(version){return null!=version?browser_browser.satisfies({ie:version}):browser_browser.is("ie",!0)}function isChrome(version){return null!=version?browser_browser.satisfies({chrome:version}):browser_browser.is("chrome",!0)}},WI2A:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return CurrentChoiceView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_channels_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("oOCt"),_stores_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("x3EI"),_current_edges_view__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("iB/i");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var CurrentChoiceView=function(_Marionette$View){var subClass,superClass;function CurrentChoiceView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=CurrentChoiceView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=CurrentChoiceView.prototype;return _proto.initialize=function(){this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_1__.a,"current:unload reset",this.onUnload),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_1__.a,"current:edges:load",this.onLoad)},_proto.className=function(){return"current-edges"},_proto.ui=function(){return{resize:".js-resize"}},_proto.regions=function(){return{resize:".js-resize"}},_proto.getTemplate=function(){return _.noop},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.css({height:0}),this.childView=(new _current_edges_view__WEBPACK_IMPORTED_MODULE_4__.a).render(),this.childView.$el.appendTo(this.el)},_proto.onUnload=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.velocity("stop",!0).velocity({height:0},{easing:"linear",display:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_3__.b.duration})},_proto.onLoad=function(){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.velocity("stop",!0).velocity({height:[this.childView.$el.height(),0]},{easing:"linear",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_3__.b.duration,complete:function(){_this.$el.css({height:""}),_actions_timeline__WEBPACK_IMPORTED_MODULE_2__.a.afterCurrentEdgesLoad()}})},CurrentChoiceView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},WKQi:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("8+v2")()?Math.sign:__webpack_require__("4VYz")},XH3X:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("42Pn")("forEach")},Xi0R:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return Score}));var Score=function(_Backbone$Model){var subClass,superClass;function Score(){return _Backbone$Model.apply(this,arguments)||this}return superClass=_Backbone$Model,(subClass=Score).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),Score.prototype.initialize=function(attributes,options){void 0===options&&(options={}),this.project=options.project},Score}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},"Z/ZA":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("Isy3"),__webpack_require__("C9yj");var autolinker__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ZSwd");__webpack_exports__.a=function(input,options){return void 0===options&&(options={}),autolinker__WEBPACK_IMPORTED_MODULE_2__.a.link(input,{truncate:options.truncate||{length:40,location:"smart"},replaceFn:function(match){var i,name,tag=match.buildTag(),keys=Object.keys(options);for(i=0;i<keys.length;i++)switch(name=keys[i]){case"class":tag.addClass(options[name]);break;case"truncate":break;default:tag.setAttr(name,options[name])}return tag}})}},Z0jf:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return" "+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"variant")||(null!=depth0?lookupProperty(depth0,"variant"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"variant",hash:{},data:data,loc:{start:{line:1,column:40},end:{line:1,column:51}}}):helper)},3:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return" bg bg-"+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"avatar_background")||(null!=depth0?lookupProperty(depth0,"avatar_background"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"avatar_background",hash:{},data:data,loc:{start:{line:1,column:90},end:{line:1,column:111}}}):helper)},5:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="icon bf-'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"avatar_icon")||(null!=depth0?lookupProperty(depth0,"avatar_icon"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"avatar_icon",hash:{},data:data,loc:{start:{line:1,column:160},end:{line:1,column:175}}}):helper)+'"></span>'},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,alias1=null!=depth0?depth0:container.nullContext||{},lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="user-avatar'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"variant"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:24},end:{line:1,column:58}}}))?stack1:"")+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"avatar_background"):depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:58},end:{line:1,column:118}}}))?stack1:"")+'">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"avatar_icon"):depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:120},end:{line:1,column:191}}}))?stack1:"")+"</span>"},useData:!0})},ZDcT:function(module,exports,__webpack_require__){"use strict";var create=Object.create,getPrototypeOf=Object.getPrototypeOf,plainObject={};module.exports=function(){var setPrototypeOf=Object.setPrototypeOf,customCreate=arguments[0]||create;return"function"==typeof setPrototypeOf&&getPrototypeOf(setPrototypeOf(customCreate(null),plainObject))===plainObject}},Zvox:function(module,exports,__webpack_require__){"use strict";var isArguments=__webpack_require__("5VZH"),isString=__webpack_require__("5ECE"),ArrayIterator=__webpack_require__("Gy/D"),StringIterator=__webpack_require__("TRXX"),iterable=__webpack_require__("5JfI"),iteratorSymbol=__webpack_require__("gW10").iterator;module.exports=function(obj){return"function"==typeof iterable(obj)[iteratorSymbol]?obj[iteratorSymbol]():isArguments(obj)?new ArrayIterator(obj):isString(obj)?new StringIterator(obj):new ArrayIterator(obj)}},Zwr1:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Timeline}));__webpack_require__("nPQI"),__webpack_require__("zj3r"),__webpack_require__("W1wS"),__webpack_require__("fAGv"),__webpack_require__("li+S"),__webpack_require__("exX3"),__webpack_require__("mbm0"),__webpack_require__("Ubn2"),__webpack_require__("Cwug"),__webpack_require__("vpd+"),__webpack_require__("mejx"),__webpack_require__("921v"),__webpack_require__("olot");var _models_scene__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("6nYy"),_models_choice__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("cfm5"),_models_message__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("PwMq"),_models_feedback__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("+rAh"),_actions_timeline__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("oOCt"),_channels_player__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("9fCi");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var _scenes=[],_choices=[],hidden=0,nodesTillFinish=null,Timeline=function(_Backbone$Collection){var subClass,superClass;function Timeline(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Timeline).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Timeline.prototype;return _proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project,this.on("add",this.onAddEntry,this),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_18__.a,"timeline:entries:load_more",this.onLoadMoreEntries)},_proto.model=function(attributes,options){return void 0===options&&(options={}),options.node?new _models_scene__WEBPACK_IMPORTED_MODULE_13__.a(attributes,options):options.edge?new _models_choice__WEBPACK_IMPORTED_MODULE_14__.a(attributes,options):void 0},_proto.start=function(node){return this.reset(),this.startedAt=new Date,this.trigger("start"),node||this.project.nodes.findWhere({index:this.project.get("initial_node_index")})},_proto.finish=function(){this.finishedAt=new Date},_proto.reset=function(models,options){_scenes.splice(0,_scenes.length),_choices.splice(0,_choices.length),hidden=0,nodesTillFinish=null,_Backbone$Collection.prototype.reset.call(this,models,options)},_proto.back=function(steps){void 0===steps&&(steps=1);var scene=_scenes[_scenes.length-steps-1];if(!scene)return!1;_scenes.pop();var index=this.indexOf(scene);return this.remove(this.slice(index)),this.last()instanceof _models_message__WEBPACK_IMPORTED_MODULE_15__.a&&this.remove(this.last()),scene},_proto.createScene=function(node,attributes){void 0===attributes&&(attributes={}),_extends(attributes,node.pick("background_id","character_id")),_extends(attributes,{index:this.scenes().size()+1,answered_at:new Date,progress_pct:this.calculateProgressPctWith(node)});var exist=this.filter((function(model){return model instanceof _models_scene__WEBPACK_IMPORTED_MODULE_13__.a&&model.node===node}));exist.length>0?_extends(attributes,{score:null,scores:null}):_extends(attributes,node.pick("score","scores"));var prevScene=this.lastScene();prevScene&&(_extends(attributes,{prev_total_score:prevScene.get("total_score"),prev_total_scores:_.clone(prevScene.get("total_scores"))}),"selected"!==node.get("background_behavior")&&_extends(attributes,{background_id:prevScene.get("background_id")}),"selected"!==node.get("character_behavior")&&_extends(attributes,{character_id:prevScene.get("character_id")}));var model=new _models_scene__WEBPACK_IMPORTED_MODULE_13__.a(attributes,{node:node,choice:this.lastChoice()});return this.calculateScoreFor(model),_scenes.push(model),model},_proto.createMessage=function(attributes,options){return void 0===attributes&&(attributes={}),void 0===options&&(options={}),new _models_message__WEBPACK_IMPORTED_MODULE_15__.a(attributes,options)},_proto.createFeedback=function(attributes,options){return void 0===attributes&&(attributes={}),void 0===options&&(options={}),new _models_feedback__WEBPACK_IMPORTED_MODULE_16__.a(attributes,options)},_proto.addScene=function(scene){return this.add(scene)},_proto.addEdge=function(edge,attributes){void 0===attributes&&(attributes={}),_extends(attributes,{index:this.choices().size()+1,duration:this.stopWaiting(),answered_at:new Date});var node=edge.toNode;if(node){var exist=this.filter((function(model){return model instanceof _models_scene__WEBPACK_IMPORTED_MODULE_13__.a&&model.node===node}));exist.length>0?_extends(attributes,{score:null,scores:null}):_extends(attributes,node.pick("score","scores"))}var prevScene=this.lastScene();prevScene&&_extends(attributes,{prev_total_score:prevScene.get("total_score"),prev_total_scores:_.clone(prevScene.get("total_scores"))});var model=new _models_choice__WEBPACK_IMPORTED_MODULE_14__.a(attributes,{edge:edge});return this.calculateScoreFor(model),_choices.push(model),this.add(model)},_proto.eventJSON=function(){return{started_at:this.startedAt,finished_at:this.finishedAt,score:this.score(),scores:this.scores(),path_indexes:":"+this.scenes().map((function(q){return q.node.get("index")})).join(":")+":"}},_proto.calculateScoreFor=function(entry){if(this.project.get("multiple_scoring")){var uids=this.project.scores.uids(),totalScores=_.clone(entry.get("prev_total_scores")||{});_(uids).each((function(uid){var value=entry.scoreFor(uid);null!=value&&(totalScores[uid]=(totalScores[uid]||0)+value)})),_.isEmpty(totalScores)||entry.set({total_scores:totalScores,total_score:_(totalScores).values().reduce((function(memo,value){return memo+value}),0)})}else{var nodeScore=entry.get("score"),totalScore=entry.get("prev_total_score");null!=nodeScore&&(_.includes(["-","+"],nodeScore[0])||(totalScore=0),totalScore=(totalScore||0)+parseInt(nodeScore,10)),null!=totalScore&&entry.set("total_score",totalScore)}},_proto.calculateProgressPctWith=function(node){var count=node.getNodesTillFinish();return null!=count&&null==nodesTillFinish&&(nodesTillFinish=count),null!=count&&null!=nodesTillFinish?count>=nodesTillFinish?0:(nodesTillFinish-count)/nodesTillFinish*100:null},_proto.scenes=function(){return _(_scenes)},_proto.choices=function(){return _(_choices)},_proto.hasAnyScene=function(){return 0!==_scenes.length},_proto.lastScene=function(){return this.scenes().last()},_proto.lastChoice=function(){return this.choices().last()},_proto.lastNode=function(){var lastScene=this.lastScene();return null!=lastScene?lastScene.node:null},_proto.scoreFor=function(uid){return(this.scores()||{})[uid]},_proto.score=function(){var scene=this.lastScene();return scene?scene.get("total_score"):null},_proto.scores=function(){return this.lastScene().get("total_scores")},_proto.getScores=function(){return this.lastScene().getScores()},_proto.startWaiting=function(){this.waitingDate=new Date},_proto.stopWaiting=function(){var time=this.waitingDate>0?new Date-this.waitingDate:null;return this.waitingDate=null,time/1e3},_proto.onLoadMoreEntries=function(){if(0!==hidden){for(var scene=_scenes[hidden-3]||_scenes[0],index=this.indexOf(scene),extra=this.at(index);extra&&!1===extra.get("timeline_visibility");)extra.set({timeline_visibility:!0}),extra instanceof _models_scene__WEBPACK_IMPORTED_MODULE_13__.a&&hidden--,index++,extra=this.at(index);_actions_timeline__WEBPACK_IMPORTED_MODULE_17__.a.afterTimelineEntriesVisibilityChange(hidden)}},_proto.onAddEntry=function(entry){if(entry instanceof _models_scene__WEBPACK_IMPORTED_MODULE_13__.a){var scene=_scenes[_scenes.length-5];if(scene){for(var index=this.indexOf(scene)-1,extra=this.at(index);index>=0&&extra.get("timeline_visibility");)extra.set({timeline_visibility:!1}),extra instanceof _models_scene__WEBPACK_IMPORTED_MODULE_13__.a&&hidden++,index--,extra=this.at(index);_actions_timeline__WEBPACK_IMPORTED_MODULE_17__.a.afterTimelineEntriesVisibilityChange(hidden)}}},Timeline}(Backbone.Collection)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},ZyO1:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return ShortcutsView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("v53q"),_stores_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("x3EI"),_templates_shortcuts__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("9fCi"),__webpack_require__("dTQE")),_templates_shortcuts__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_templates_shortcuts__WEBPACK_IMPORTED_MODULE_4__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var ShortcutsView=function(_Marionette$View){var subClass,superClass;function ShortcutsView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=ShortcutsView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=ShortcutsView.prototype;return _proto.className=function(){return"player-menu player-shortcuts player-container"},_proto.events=function(){return{click:"onHide"}},_proto.keyboard=function(){return{keys:"esc",context:"shortcuts"}},_proto.getTemplate=function(){return _templates_shortcuts__WEBPACK_IMPORTED_MODULE_4___default.a},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.css({display:"none"})},_proto.show=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.velocity("fadeIn",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration}),_lib_keyboard__WEBPACK_IMPORTED_MODULE_1__.a.on(this)},_proto.hide=function(){_lib_keyboard__WEBPACK_IMPORTED_MODULE_1__.a.off(this),this.$el.velocity("fadeOut",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration,complete:this.remove.bind(this)})},_proto.onHide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.hide()},_proto.onShortcut=function(){this.hide()},ShortcutsView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},ZypF:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("sccJ"),__webpack_require__("qoQZ"),__webpack_require__("V4Jz"),__webpack_require__("fAGv"),__webpack_require__("ba7S"),__webpack_require__("5v+e");var loglevel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_6__);__webpack_exports__.a=function(self){if(!(loglevel__WEBPACK_IMPORTED_MODULE_6___default.a.getLevel()>loglevel__WEBPACK_IMPORTED_MODULE_6___default.a.levels.TRACE)){var klass=self.constructor.name,error=new Error;if(null!=error.stack){var stack=error.stack.toString().replace(/\n/g,""),regex=new RegExp(klass+"\\.(\\w+)"),found=regex.exec(stack);if(found?loglevel__WEBPACK_IMPORTED_MODULE_6___default.a.trace("["+klass+"] "+found[1]):loglevel__WEBPACK_IMPORTED_MODULE_6___default.a.trace("["+klass+"]"),(arguments.length<=1?0:arguments.length-1)>0)for(var i=0;i<(arguments.length<=1?0:arguments.length-1);i++)loglevel__WEBPACK_IMPORTED_MODULE_6___default.a.trace(i+1<1||arguments.length<=i+1?void 0:arguments[i+1])}}}},a0TI:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return CharacterView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),constants_character__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("LGAl"),_channels_player__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("oOCt"),_stores_settings__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("x3EI");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var CharacterView=function(_Marionette$View){var subClass,superClass;function CharacterView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=CharacterView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=CharacterView.prototype;return _proto.initialize=function(){this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_2__.a,"reset",this.onReset),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_2__.a,"current:scene",this.onSceneChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_2__.a,"current:character:change",this.onChange),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b,"change:height change:screens",this.onHeightChange),this.listenTo(_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b,"change:debug_face",this.onDebugFaceChange)},_proto.className=function(){return"player-character"},_proto.getTemplate=function(){return _.noop},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.setHeight()},_proto.onSceneChange=function(scene){this.scene=scene,this.node=scene.node,this.character=this.scene.getCharacter(),this.emotion=this.node.getEmotion(),this.character?this.nextCharacterURL=this.character.imageURL({emotion:this.emotion,style:"player"}):(this.nextCharacterURL=null,this.renderFace(!1))},_proto.onChange=function(){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this);var $children=this.$el.children("div.character").not(".js-hidden");if(this.shownCharacterURL!==this.nextCharacterURL){this.shownCharacterURL=this.nextCharacterURL;var goNext=function(){_this.removeElements($children),_actions_timeline__WEBPACK_IMPORTED_MODULE_3__.a.afterCharacterChange()};if(this.nextCharacterURL){var $div=$('<div class="character">').css({opacity:0}).appendTo(this.$el),image=new Image;image.onload=function(){_this.removeElements($children);var options={duration:_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.duration,complete:function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_3__.a.afterCharacterChange()}},css={"background-image":'url("'+image.src+'")',"margin-left":_this.renderFace()||null};$div.css(css).velocity({opacity:1},options),_this.shown=!0},image.onerror=goNext,image.src=this.nextCharacterURL}else goNext()}else _actions_timeline__WEBPACK_IMPORTED_MODULE_3__.a.afterCharacterChange()},_proto.removeElements=function($elements){var options={duration:_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.duration,complete:function(){$(this).remove()}};$elements.addClass(".js-hidden").velocity("stop").velocity({opacity:0},options)},_proto.renderFace=function(){if(_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.get("debug_face")&&!this.$face&&(this.$face=$('<div class="face-debug">').appendTo(this.el)),!this.character)return _stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.get("debug_face")&&this.$face.hide(),!1;var face=this.character.getFace(this.emotion);if(!face)return!1;var ratio=this.height/(face.source_height||460);return _stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.screen("md")&&!_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.screen("lg")&&(ratio*=constants_character__WEBPACK_IMPORTED_MODULE_1__.d),_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.get("debug_face")&&this.$face.show().css({width:face.width*ratio,height:face.height*ratio}),-1*(face.width*ratio/2+face.normal_x*ratio)},_proto.setHeight=function(){this.height=null,_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.screen("lg")?(this.height=_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.get("height")*constants_character__WEBPACK_IMPORTED_MODULE_1__.c,this.$el.css("height",this.height)):_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.screen("md")?(this.height=Math.min(_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.get("height")*constants_character__WEBPACK_IMPORTED_MODULE_1__.f,constants_character__WEBPACK_IMPORTED_MODULE_1__.e),this.$el.css("height",this.height)):this.$el.css("height","")},_proto.setMargin=function(){this.$el.children("div.character").css("margin-left",this.renderFace()||null)},_proto.onHeightChange=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.setHeight(),this.setMargin()},_proto.onDebugFaceChange=function(){_stores_settings__WEBPACK_IMPORTED_MODULE_4__.b.get("debug_face")?this.renderFace():this.$face&&(this.$face.remove(),this.$face=null)},_proto.onReset=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.nextCharacterURL=null,this.shownCharacterURL=null,this.$el.children().remove()},CharacterView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},acRa:function(module,exports,__webpack_require__){var KeyCombo=__webpack_require__("f5ld");function Locale(name){this.localeName=name,this.pressedKeys=[],this._appliedMacros=[],this._keyMap={},this._killKeyCodes=[],this._macros=[]}Locale.prototype.bindKeyCode=function(keyCode,keyNames){"string"==typeof keyNames&&(keyNames=[keyNames]),this._keyMap[keyCode]=keyNames},Locale.prototype.bindMacro=function(keyComboStr,keyNames){"string"==typeof keyNames&&(keyNames=[keyNames]);var handler=null;"function"==typeof keyNames&&(handler=keyNames,keyNames=null);var macro={keyCombo:new KeyCombo(keyComboStr),keyNames:keyNames,handler:handler};this._macros.push(macro)},Locale.prototype.getKeyCodes=function(keyName){var keyCodes=[];for(var keyCode in this._keyMap){this._keyMap[keyCode].indexOf(keyName)>-1&&keyCodes.push(0|keyCode)}return keyCodes},Locale.prototype.getKeyNames=function(keyCode){return this._keyMap[keyCode]||[]},Locale.prototype.setKillKey=function(keyCode){if("string"!=typeof keyCode)this._killKeyCodes.push(keyCode);else for(var keyCodes=this.getKeyCodes(keyCode),i=0;i<keyCodes.length;i+=1)this.setKillKey(keyCodes[i])},Locale.prototype.pressKey=function(keyCode){if("string"!=typeof keyCode){var keyNames=this.getKeyNames(keyCode);for(i=0;i<keyNames.length;i+=1)-1===this.pressedKeys.indexOf(keyNames[i])&&this.pressedKeys.push(keyNames[i]);this._applyMacros()}else for(var keyCodes=this.getKeyCodes(keyCode),i=0;i<keyCodes.length;i+=1)this.pressKey(keyCodes[i])},Locale.prototype.releaseKey=function(keyCode){if("string"==typeof keyCode)for(var keyCodes=this.getKeyCodes(keyCode),i=0;i<keyCodes.length;i+=1)this.releaseKey(keyCodes[i]);else{var keyNames=this.getKeyNames(keyCode);if(this._killKeyCodes.indexOf(keyCode)>-1)this.pressedKeys.length=0;else for(i=0;i<keyNames.length;i+=1){var index=this.pressedKeys.indexOf(keyNames[i]);index>-1&&this.pressedKeys.splice(index,1)}this._clearMacros()}},Locale.prototype._applyMacros=function(){for(var macros=this._macros.slice(0),i=0;i<macros.length;i+=1){var macro=macros[i];if(macro.keyCombo.check(this.pressedKeys)){macro.handler&&(macro.keyNames=macro.handler(this.pressedKeys));for(var j=0;j<macro.keyNames.length;j+=1)-1===this.pressedKeys.indexOf(macro.keyNames[j])&&this.pressedKeys.push(macro.keyNames[j]);this._appliedMacros.push(macro)}}},Locale.prototype._clearMacros=function(){for(var i=0;i<this._appliedMacros.length;i+=1){var macro=this._appliedMacros[i];if(!macro.keyCombo.check(this.pressedKeys)){for(var j=0;j<macro.keyNames.length;j+=1){var index=this.pressedKeys.indexOf(macro.keyNames[j]);index>-1&&this.pressedKeys.splice(index,1)}macro.handler&&(macro.keyNames=null),this._appliedMacros.splice(i,1),i-=1}}},module.exports=Locale},"b/UN":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<a href="javascript:;"class="js-close close no-color"><span class="fa fa-close fa-2x fa-fw"></span></a><div class="text-center"><span class="icon bf-cardiovascular"></span><p>Oops, we could not save your choices to the server.<br>Please check your internet connection.<br>We will keep trying to save your data as you play.</p><a href="javascript:;"class="button js-close">Dismiss</a><div></div></div>'},useData:!0})},bBB2:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<li><a href="'+alias1("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"leave_url")||(null!=depth0?lookupProperty(depth0,"leave_url"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"leave_url",hash:{},data:data,loc:{start:{line:1,column:268},end:{line:1,column:281}}}):helper)+'"role="link"><span class="fa fa-sign-out"></span>'+alias1(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_leave_simulation"):stack1,depth0))+"</a></li>"},3:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<li><a href="'+alias1("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"edit_url")||(null!=depth0?lookupProperty(depth0,"edit_url"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"edit_url",hash:{},data:data,loc:{start:{line:1,column:414},end:{line:1,column:426}}}):helper)+'"role="link"><span class="fa fa-pencil-square-o"></span>'+alias1(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_edit_simulation"):stack1,depth0))+"</a></li>"},5:function(container,depth0,helpers,partials,data){return'style="display:none;"'},7:function(container,depth0,helpers,partials,data){return'style="display: none;"'},9:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="fa fa-volume-up"></span><span>'+container.escapeExpression(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_turn_off_voiceover"):stack1,depth0))+"</span>"},11:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<span class="fa fa-volume-down"></span><span>'+container.escapeExpression(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_turn_on_voiceover"):stack1,depth0))+"</span>"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,alias1=container.lambda,alias2=container.escapeExpression,alias3=null!=depth0?depth0:container.nullContext||{},lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="player-row"><div class="bg player-xs-12 player-md-5 player-md-offset-7 player-lg-4 player-lg-offset-8"><aside><div class="logo"></div><div class="bottom"><ul class="items"arial-label="'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_simulation_options"):stack1,depth0))+'">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias3,null!=depth0?lookupProperty(depth0,"leave_url"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:238},end:{line:1,column:384}}}))?stack1:"")+" "+(null!=(stack1=lookupProperty(helpers,"if").call(alias3,null!=depth0?lookupProperty(depth0,"edit_url"):depth0,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:385},end:{line:1,column:535}}}))?stack1:"")+'<li><a href="javascript:;"class="js-animation"role="switch"><span class="on"'+(null!=(stack1=lookupProperty(helpers,"unless").call(alias3,null!=depth0?lookupProperty(depth0,"animation"):depth0,{name:"unless",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:611},end:{line:1,column:664}}}))?stack1:"")+'><span class="fa fa-eye-slash"></span><span data-translation="menu_turn_off_animation">'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_turn_off_animation"):stack1,depth0))+'</span></span><span class="off"'+(null!=(stack1=lookupProperty(helpers,"if").call(alias3,null!=depth0?lookupProperty(depth0,"animation"):depth0,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:822},end:{line:1,column:867}}}))?stack1:"")+'><span class="fa fa-eye"></span><span data-translation="menu_turn_off_animation">'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_turn_on_animation"):stack1,depth0))+'</span></span></a></li><li class="js-voiceover"'+(null!=(stack1=lookupProperty(helpers,"unless").call(alias3,null!=depth0?lookupProperty(depth0,"voice_button"):depth0,{name:"unless",hash:{},fn:container.program(7,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:1034},end:{line:1,column:1091}}}))?stack1:"")+'><a href="javascript:;"role="switch">'+(null!=(stack1=lookupProperty(helpers,"if").call(alias3,null!=depth0?lookupProperty(depth0,"voice_autoplay"):depth0,{name:"if",hash:{},fn:container.program(9,data,0),inverse:container.program(11,data,0),data:data,loc:{start:{line:1,column:1128},end:{line:1,column:1346}}}))?stack1:"")+'</a></li></ul><a href="javascript:;"class="close js-hide"role="button"title="'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_close_options"):stack1,depth0))+'"><span class="fa fa-close"></span></a></div></aside><div class="bg-strip"></div><div class="bg-strip left player-md-hidden"></div></div></div>'},useData:!0})},bE6X:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var obj,_util=__webpack_require__("8Aw6"),_Slider=(obj=__webpack_require__("14L8"))&&obj.__esModule?obj:{default:obj};function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_defineProperty(target,key,source[key])}))}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ImageViewer=function(){function ImageViewer(element){var _this=this,options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,ImageViewer),_defineProperty(this,"zoom",(function(perc,point){var _options=_this._options,_elements=_this._elements,_state=_this._state,curPerc=_state.zoomValue,imageDim=_state.imageDim,containerDim=_state.containerDim,zoomSliderLength=_state.zoomSliderLength,image=_elements.image,zoomHandle=_elements.zoomHandle,maxZoom=_options.maxZoom;perc=Math.round(Math.max(100,perc)),perc=Math.min(maxZoom,perc),point=point||{x:containerDim.w/2,y:containerDim.h/2};var curLeft=parseFloat((0,_util.css)(image,"left")),curTop=parseFloat((0,_util.css)(image,"top"));_this._clearFrames();var step=0,baseLeft=(containerDim.w-imageDim.w)/2,baseTop=(containerDim.h-imageDim.h)/2,baseRight=containerDim.w-baseLeft,baseBottom=containerDim.h-baseTop;!function zoom(){++step<16&&(_this._frames.zoomFrame=requestAnimationFrame(zoom));var tickZoom=(0,_util.easeOutQuart)(step,curPerc,perc-curPerc,16),ratio=tickZoom/curPerc,imgWidth=imageDim.w*tickZoom/100,imgHeight=imageDim.h*tickZoom/100,newLeft=-((point.x-curLeft)*ratio-point.x),newTop=-((point.y-curTop)*ratio-point.y);newLeft=Math.min(newLeft,baseLeft),newTop=Math.min(newTop,baseTop),newLeft+imgWidth<baseRight&&(newLeft=baseRight-imgWidth),newTop+imgHeight<baseBottom&&(newTop=baseBottom-imgHeight),(0,_util.css)(image,{height:"".concat(imgHeight,"px"),width:"".concat(imgWidth,"px"),left:"".concat(newLeft,"px"),top:"".concat(newTop,"px")}),_this._state.zoomValue=tickZoom,_this._resizeSnapHandle(imgWidth,imgHeight,newLeft,newTop),(0,_util.css)(zoomHandle,{left:"".concat((tickZoom-100)*zoomSliderLength/(maxZoom-100),"px")})}()})),_defineProperty(this,"_clearFrames",(function(){var _this$_frames=_this._frames,slideMomentumCheck=_this$_frames.slideMomentumCheck,sliderMomentumFrame=_this$_frames.sliderMomentumFrame,zoomFrame=_this$_frames.zoomFrame;clearInterval(slideMomentumCheck),cancelAnimationFrame(sliderMomentumFrame),cancelAnimationFrame(zoomFrame)})),_defineProperty(this,"_resizeSnapHandle",(function(imgWidth,imgHeight,imgLeft,imgTop){var _elements=_this._elements,_state=_this._state,snapHandle=_elements.snapHandle,image=_elements.image,imageDim=_state.imageDim,containerDim=_state.containerDim,zoomValue=_state.zoomValue,snapImageDim=_state.snapImageDim,imageWidth=imgWidth||imageDim.w*zoomValue/100,imageHeight=imgHeight||imageDim.h*zoomValue/100,imageLeft=imgLeft||parseFloat((0,_util.css)(image,"left")),imageTop=imgTop||parseFloat((0,_util.css)(image,"top")),left=-imageLeft*snapImageDim.w/imageWidth,top=-imageTop*snapImageDim.h/imageHeight,handleWidth=containerDim.w*snapImageDim.w/imageWidth,handleHeight=containerDim.h*snapImageDim.h/imageHeight;(0,_util.css)(snapHandle,{top:"".concat(top,"px"),left:"".concat(left,"px"),width:"".concat(handleWidth,"px"),height:"".concat(handleHeight,"px")}),_this._state.snapHandleDim={w:handleWidth,h:handleHeight}})),_defineProperty(this,"showSnapView",(function(noTimeout){var _this$_state=_this._state,snapViewVisible=_this$_state.snapViewVisible,zoomValue=_this$_state.zoomValue,loaded=_this$_state.loaded,snapView=_this._elements.snapView;_this._options.snapView&&(snapViewVisible||zoomValue<=100||!loaded||(clearTimeout(_this._frames.snapViewTimeout),_this._state.snapViewVisible=!0,(0,_util.css)(snapView,{opacity:1,pointerEvents:"inherit"}),noTimeout||(_this._frames.snapViewTimeout=setTimeout(_this.hideSnapView,1500))))})),_defineProperty(this,"hideSnapView",(function(){var snapView=_this._elements.snapView;(0,_util.css)(snapView,{opacity:0,pointerEvents:"none"}),_this._state.snapViewVisible=!1})),_defineProperty(this,"refresh",(function(){_this._calculateDimensions(),_this.resetZoom()}));var _this$_findContainerA=this._findContainerAndImageSrc(element,options),container=_this$_findContainerA.container,domElement=_this$_findContainerA.domElement,imageSrc=_this$_findContainerA.imageSrc,hiResImageSrc=_this$_findContainerA.hiResImageSrc;this._elements={container:container,domElement:domElement},this._options=_objectSpread({},ImageViewer.defaults,options),this._events={},this._frames={},this._sliders={},this._state={zoomValue:this._options.zoomValue},this._images={imageSrc:imageSrc,hiResImageSrc:hiResImageSrc},this._init(),imageSrc&&this._loadImages(),domElement._imageViewer=this}var Constructor,protoProps,staticProps;return Constructor=ImageViewer,protoProps=[{key:"_findContainerAndImageSrc",value:function(element){var imageSrc,hiResImageSrc,domElement=element;if("string"==typeof element&&(domElement=document.querySelector(element)),domElement._imageViewer)throw new Error("An image viewer is already being initiated on the element.");var container=element;return"IMG"===domElement.tagName?(imageSrc=domElement.src,hiResImageSrc=domElement.getAttribute("high-res-src")||domElement.getAttribute("data-high-res-src"),container=(0,_util.wrap)(domElement,{className:"iv-container iv-image-mode",style:{display:"inline-block",overflow:"hidden"}}),(0,_util.css)(domElement,{opacity:0,position:"relative",zIndex:-1})):(imageSrc=domElement.getAttribute("src")||domElement.getAttribute("data-src"),hiResImageSrc=domElement.getAttribute("high-res-src")||domElement.getAttribute("data-high-res-src")),{container:container,domElement:domElement,imageSrc:imageSrc,hiResImageSrc:hiResImageSrc}}},{key:"_init",value:function(){this._initDom(),this._initImageSlider(),this._initSnapSlider(),this._initZoomSlider(),this._pinchAndZoom(),this._scrollZoom(),this._doubleTapToZoom(),this._initEvents()}},{key:"_initDom",value:function(){var container=this._elements.container;(0,_util.createElement)({tagName:"div",className:"iv-wrap",html:'\n  <div class="iv-loader"></div>\n  <div class="iv-snap-view">\n    <div class="iv-snap-image-wrap">\n      <div class="iv-snap-handle"></div>\n    </div>\n    <div class="iv-zoom-slider">\n      <div class="iv-zoom-handle"></div>\n    </div>\n  </div>\n  <div class="iv-image-view" >\n    <div class="iv-image-wrap" ></div>\n  </div>\n',parent:container}),(0,_util.addClass)(container,"iv-container"),"static"===(0,_util.css)(container,"position")&&(0,_util.css)(container,{position:"relative"}),this._elements=_objectSpread({},this._elements,{snapView:container.querySelector(".iv-snap-view"),snapImageWrap:container.querySelector(".iv-snap-image-wrap"),imageWrap:container.querySelector(".iv-image-wrap"),snapHandle:container.querySelector(".iv-snap-handle"),zoomHandle:container.querySelector(".iv-zoom-handle")})}},{key:"_initImageSlider",value:function(){var positions,currentPos,_this2=this,imageWrap=this._elements.imageWrap,imageSlider=new _Slider.default(imageWrap,{isSliderEnabled:function(){var _this2$_state=_this2._state,loaded=_this2$_state.loaded,zooming=_this2$_state.zooming,zoomValue=_this2$_state.zoomValue;return loaded&&!zooming&&zoomValue>100},onStart:function(e,position){var snapSlider=_this2._sliders.snapSlider;_this2._clearFrames(),snapSlider.onStart(),positions=[position,position],currentPos=void 0,_this2._frames.slideMomentumCheck=setInterval((function(){currentPos&&(positions.shift(),positions.push({x:currentPos.mx,y:currentPos.my}))}),50)},onMove:function(e,position){var snapImageDim=_this2._state.snapImageDim,snapSlider=_this2._sliders.snapSlider,imageCurrentDim=_this2._getImageCurrentDim();currentPos=position,snapSlider.onMove(e,{dx:-position.dx*snapImageDim.w/imageCurrentDim.w,dy:-position.dy*snapImageDim.h/imageCurrentDim.h})},onEnd:function(){var step,positionX,positionY,snapImageDim=_this2._state.snapImageDim,snapSlider=_this2._sliders.snapSlider,imageCurrentDim=_this2._getImageCurrentDim();_this2._clearFrames();var xDiff=positions[1].x-positions[0].x,yDiff=positions[1].y-positions[0].y;(Math.abs(xDiff)>30||Math.abs(yDiff)>30)&&(step=1,positionX=currentPos.dx,positionY=currentPos.dy,function momentum(){step<=60&&(_this2._frames.sliderMomentumFrame=requestAnimationFrame(momentum)),positionX+=(0,_util.easeOutQuart)(step,xDiff/3,-xDiff/3,60),positionY+=(0,_util.easeOutQuart)(step,yDiff/3,-yDiff/3,60),snapSlider.onMove(null,{dx:-positionX*snapImageDim.w/imageCurrentDim.w,dy:-positionY*snapImageDim.h/imageCurrentDim.h}),step++}())}});imageSlider.init(),this._sliders.imageSlider=imageSlider}},{key:"_initSnapSlider",value:function(){var startHandleTop,startHandleLeft,_this3=this,snapHandle=this._elements.snapHandle,snapSlider=new _Slider.default(snapHandle,{isSliderEnabled:function(){return _this3._state.loaded},onStart:function(){var _this3$_frames=_this3._frames,slideMomentumCheck=_this3$_frames.slideMomentumCheck,sliderMomentumFrame=_this3$_frames.sliderMomentumFrame;startHandleTop=parseFloat((0,_util.css)(snapHandle,"top")),startHandleLeft=parseFloat((0,_util.css)(snapHandle,"left")),clearInterval(slideMomentumCheck),cancelAnimationFrame(sliderMomentumFrame)},onMove:function(e,position){var _this3$_state=_this3._state,snapHandleDim=_this3$_state.snapHandleDim,snapImageDim=_this3$_state.snapImageDim,image=_this3._elements.image,imageCurrentDim=_this3._getImageCurrentDim(),maxLeft=Math.max(snapImageDim.w-snapHandleDim.w,startHandleLeft),maxTop=Math.max(snapImageDim.h-snapHandleDim.h,startHandleTop),minLeft=Math.min(0,startHandleLeft),minTop=Math.min(0,startHandleTop),left=(0,_util.clamp)(startHandleLeft+position.dx,minLeft,maxLeft),top=(0,_util.clamp)(startHandleTop+position.dy,minTop,maxTop),imgLeft=-left*imageCurrentDim.w/snapImageDim.w,imgTop=-top*imageCurrentDim.h/snapImageDim.h;(0,_util.css)(snapHandle,{left:"".concat(left,"px"),top:"".concat(top,"px")}),(0,_util.css)(image,{left:"".concat(imgLeft,"px"),top:"".concat(imgTop,"px")})}});snapSlider.init(),this._sliders.snapSlider=snapSlider}},{key:"_initZoomSlider",value:function(){var leftOffset,handleWidth,_this4=this,_this$_elements=this._elements,snapView=_this$_elements.snapView,zoomHandle=_this$_elements.zoomHandle,sliderElm=snapView.querySelector(".iv-zoom-slider"),zoomSlider=new _Slider.default(sliderElm,{isSliderEnabled:function(){return _this4._state.loaded},onStart:function(eStart){var slider=_this4._sliders.zoomSlider;leftOffset=sliderElm.getBoundingClientRect().left+document.body.scrollLeft,handleWidth=parseInt((0,_util.css)(zoomHandle,"width"),10),slider.onMove(eStart)},onMove:function(e){var maxZoom=_this4._options.maxZoom,zoomSliderLength=_this4._state.zoomSliderLength,pageX=void 0!==e.pageX?e.pageX:e.touches[0].pageX,zoomValue=100+(maxZoom-100)*(0,_util.clamp)(pageX-leftOffset-handleWidth/2,0,zoomSliderLength)/zoomSliderLength;_this4.zoom(zoomValue)}});zoomSlider.init(),this._sliders.zoomSlider=zoomSlider}},{key:"_initEvents",value:function(){this._snapViewEvents(),this._options.refreshOnResize&&(this._events.onWindowResize=(0,_util.assignEvent)(window,"resize",this.refresh))}},{key:"_snapViewEvents",value:function(){var _this5=this,_this$_elements2=this._elements,imageWrap=_this$_elements2.imageWrap,snapView=_this$_elements2.snapView;this._events.snapViewOnMouseMove=(0,_util.assignEvent)(imageWrap,["touchmove","mousemove"],(function(){_this5.showSnapView()})),this._events.mouseEnterSnapView=(0,_util.assignEvent)(snapView,["mouseenter","touchstart"],(function(){_this5._state.snapViewVisible=!1,_this5.showSnapView(!0)})),this._events.mouseLeaveSnapView=(0,_util.assignEvent)(snapView,["mouseleave","touchend"],(function(){_this5._state.snapViewVisible=!1,_this5.showSnapView()}))}},{key:"_pinchAndZoom",value:function(){var _this6=this,_this$_elements3=this._elements,imageWrap=_this$_elements3.imageWrap,container=_this$_elements3.container;this._events.pinchStart=(0,_util.assignEvent)(imageWrap,"touchstart",(function(eStart){var _this6$_state=_this6._state,loaded=_this6$_state.loaded,startZoomValue=_this6$_state.zoomValue,events=_this6._events;if(loaded){var touch0=eStart.touches[0],touch1=eStart.touches[1];if(touch0&&touch1){_this6._state.zooming=!0;var contOffset=container.getBoundingClientRect(),startDist=(0,_util.getTouchPointsDistance)(eStart.touches),center={x:(touch1.pageX+touch0.pageX)/2-(contOffset.left+document.body.scrollLeft),y:(touch1.pageY+touch0.pageY)/2-(contOffset.top+document.body.scrollTop)};events.pinchMove&&events.pinchMove(),events.pinchEnd&&events.pinchEnd(),events.pinchMove=(0,_util.assignEvent)(document,"touchmove",(function(eMove){var newDist=(0,_util.getTouchPointsDistance)(eMove.touches),zoomValue=startZoomValue+(newDist-startDist)/2;_this6.zoom(zoomValue,center)})),events.pinchEnd=(0,_util.assignEvent)(document,"touchend",(function(){events.pinchMove(),events.pinchEnd(),_this6._state.zooming=!1}))}}}))}},{key:"_scrollZoom",value:function(){var _this7=this,_options=this._options,_this$_elements4=this._elements,container=_this$_elements4.container,imageWrap=_this$_elements4.imageWrap,changedDelta=0;this._ev=(0,_util.assignEvent)(imageWrap,"wheel",(function(e){var _this7$_state=_this7._state,loaded=_this7$_state.loaded,zoomValue=_this7$_state.zoomValue;if(_options.zoomOnMouseWheel&&loaded){_this7._clearFrames();var delta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail||-e.deltaY)),newZoomValue=zoomValue*(100+delta*_util.ZOOM_CONSTANT)/100;if(newZoomValue>=100&&newZoomValue<=_options.maxZoom?changedDelta=0:changedDelta+=Math.abs(delta),e.preventDefault(),!(changedDelta>_util.MOUSE_WHEEL_COUNT)){var contOffset=container.getBoundingClientRect(),x=(e.pageX||e.pageX)-(contOffset.left+document.body.scrollLeft),y=(e.pageY||e.pageY)-(contOffset.top+document.body.scrollTop);_this7.zoom(newZoomValue,{x:x,y:y}),_this7.showSnapView()}}}))}},{key:"_doubleTapToZoom",value:function(){var point,_this8=this,imageWrap=this._elements.imageWrap,touchTime=0;(0,_util.assignEvent)(imageWrap,"click",(function(e){0===touchTime?(touchTime=Date.now(),point={x:e.pageX,y:e.pageY}):Date.now()-touchTime<500&&Math.abs(e.pageX-point.x)<50&&Math.abs(e.pageY-point.y)<50?(_this8._state.zoomValue===_this8._options.zoomValue?_this8.zoom(200):_this8.resetZoom(),touchTime=0):touchTime=0}))}},{key:"_getImageCurrentDim",value:function(){var _this$_state2=this._state,zoomValue=_this$_state2.zoomValue,imageDim=_this$_state2.imageDim;return{w:imageDim.w*(zoomValue/100),h:imageDim.h*(zoomValue/100)}}},{key:"_loadImages",value:function(){var _this9=this,_images=this._images,_elements=this._elements,imageSrc=_images.imageSrc,hiResImageSrc=_images.hiResImageSrc,container=_elements.container,snapImageWrap=_elements.snapImageWrap,imageWrap=_elements.imageWrap,ivLoader=container.querySelector(".iv-loader");(0,_util.remove)(container.querySelectorAll(".iv-snap-image, .iv-image"));var snapImage=(0,_util.createElement)({tagName:"img",className:"iv-snap-image",src:imageSrc,insertBefore:snapImageWrap.firstChild,parent:snapImageWrap}),image=(0,_util.createElement)({tagName:"img",className:"iv-image iv-small-image",src:imageSrc,parent:imageWrap});this._state.loaded=!1,this._elements.image=image,this._elements.snapImage=snapImage,(0,_util.css)(ivLoader,{display:"block"}),(0,_util.css)(image,{visibility:"hidden"}),this.hideSnapView();var onImageLoad=function(){(0,_util.css)(ivLoader,{display:"none"}),(0,_util.css)(image,{visibility:"visible"}),hiResImageSrc&&_this9._loadHighResImage(hiResImageSrc),_this9._state.loaded=!0,_this9._calculateDimensions(),_this9.resetZoom()};(0,_util.imageLoaded)(image)?onImageLoad():this._events.imageLoad=(0,_util.assignEvent)(image,"load",onImageLoad)}},{key:"_loadHighResImage",value:function(hiResImageSrc){var _this10=this,_this$_elements5=this._elements,imageWrap=_this$_elements5.imageWrap,container=_this$_elements5.container,lowResImg=this._elements.image,hiResImage=(0,_util.createElement)({tagName:"img",className:"iv-image iv-large-image",src:hiResImageSrc,parent:imageWrap,style:lowResImg.style.cssText});hiResImage.style.cssText=lowResImg.style.cssText,this._elements.image=container.querySelectorAll(".iv-image");var onHighResImageLoad=function(){(0,_util.remove)(lowResImg),_this10._elements.image=hiResImage};(0,_util.imageLoaded)(hiResImage)?onHighResImageLoad():this._events.hiResImageLoad=(0,_util.assignEvent)(hiResImage,"load",onHighResImageLoad)}},{key:"_calculateDimensions",value:function(){var imgWidth,imgHeight,_this$_elements6=this._elements,image=_this$_elements6.image,container=_this$_elements6.container,snapView=_this$_elements6.snapView,snapImage=_this$_elements6.snapImage,zoomHandle=_this$_elements6.zoomHandle,imageWidth=parseInt((0,_util.css)(image,"width"),10),imageHeight=parseInt((0,_util.css)(image,"height"),10),contWidth=parseInt((0,_util.css)(container,"width"),10),contHeight=parseInt((0,_util.css)(container,"height"),10),snapViewWidth=snapView.clientWidth,snapViewHeight=snapView.clientHeight;this._state.containerDim={w:contWidth,h:contHeight};var ratio=imageWidth/imageHeight;imgHeight=(imgWidth=imageWidth>imageHeight&&contHeight>=contWidth||ratio*contHeight>contWidth?contWidth:ratio*contHeight)/ratio,this._state.imageDim={w:imgWidth,h:imgHeight},(0,_util.css)(image,{width:"".concat(imgWidth,"px"),height:"".concat(imgHeight,"px"),left:"".concat((contWidth-imgWidth)/2,"px"),top:"".concat((contHeight-imgHeight)/2,"px"),maxWidth:"none",maxHeight:"none"});var snapWidth=imgWidth>imgHeight?snapViewWidth:imgWidth*snapViewHeight/imgHeight,snapHeight=imgHeight>imgWidth?snapViewHeight:imgHeight*snapViewWidth/imgWidth;this._state.snapImageDim={w:snapWidth,h:snapHeight},(0,_util.css)(snapImage,{width:"".concat(snapWidth,"px"),height:"".concat(snapHeight,"px")}),this._state.zoomSliderLength=snapViewWidth-zoomHandle.offsetWidth}},{key:"resetZoom",value:function(){var animate=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],zoomValue=this._options.zoomValue;animate||(this._state.zoomValue=zoomValue),this.zoom(zoomValue)}},{key:"load",value:function(imageSrc,hiResImageSrc){this._images={imageSrc:imageSrc,hiResImageSrc:hiResImageSrc},this._loadImages()}},{key:"destroy",value:function(){var _this$_elements7=this._elements,container=_this$_elements7.container,domElement=_this$_elements7.domElement;Object.entries(this._sliders).forEach((function(_ref){var _ref2=_slicedToArray(_ref,2);_ref2[0],_ref2[1].destroy()})),Object.entries(this._events).forEach((function(_ref3){var _ref4=_slicedToArray(_ref3,2);_ref4[0],(0,_ref4[1])()})),this._clearFrames(),(0,_util.remove)(container.querySelector(".iv-wrap")),(0,_util.removeClass)(container,"iv-container"),(0,_util.removeCss)(document.querySelector("html"),"relative"),domElement!==container&&(0,_util.unwrap)(domElement),domElement._imageViewer=null}}],protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),ImageViewer}();ImageViewer.defaults={zoomValue:100,snapView:!0,maxZoom:500,refreshOnResize:!0,zoomOnMouseWheel:!0};var _default=ImageViewer;exports.default=_default},bYzE:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");function __default(obj){return obj&&(obj.__esModule?obj.default:obj)}module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){return'<span class="fa fa-play-circle icon icon-play"></span>'},3:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return", "+container.escapeExpression(container.lambda(null!=(stack1=null!=depth0?lookupProperty(depth0,"meta"):depth0)?lookupProperty(stack1,"size"):stack1,depth0))},5:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return", "+container.escapeExpression(__default(__webpack_require__("oM/r")).call(null!=depth0?depth0:container.nullContext||{},null!=(stack1=null!=depth0?lookupProperty(depth0,"meta"):depth0)?lookupProperty(stack1,"duration"):stack1,{name:"format_time",hash:{},data:data,loc:{start:{line:1,column:373},end:{line:1,column:402}}}))},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<a class="scene-attachment js-attachment"href="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"url")||(null!=depth0?lookupProperty(depth0,"url"):depth0))?helper:alias2)?helper.call(alias1,{name:"url",hash:{},data:data,loc:{start:{line:1,column:47},end:{line:1,column:54}}}):helper)+'"><span class="fa '+alias4(__default(__webpack_require__("ksFZ")).call(alias1,null!=depth0?lookupProperty(depth0,"extension"):depth0,{name:"attachment_fa_icon",hash:{},data:data,loc:{start:{line:1,column:72},end:{line:1,column:104}}}))+' icon"></span>'+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"audio"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:118},end:{line:1,column:192}}}))?stack1:"")+'<span class="name">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"filename")||(null!=depth0?lookupProperty(depth0,"filename"):depth0))?helper:alias2)?helper.call(alias1,{name:"filename",hash:{},data:data,loc:{start:{line:1,column:211},end:{line:1,column:223}}}):helper)+'</span><br><small class="meta text-uppercase">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"extension")||(null!=depth0?lookupProperty(depth0,"extension"):depth0))?helper:alias2)?helper.call(alias1,{name:"extension",hash:{},data:data,loc:{start:{line:1,column:269},end:{line:1,column:282}}}):helper)+", "+alias4(__default(__webpack_require__("vy9o")).call(alias1,null!=depth0?lookupProperty(depth0,"size"):depth0,{name:"human_filesize",hash:{},data:data,loc:{start:{line:1,column:284},end:{line:1,column:307}}}))+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=(stack1=null!=depth0?lookupProperty(depth0,"meta"):depth0)?lookupProperty(stack1,"size"):stack1,{name:"if",hash:{},fn:container.program(3,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:308},end:{line:1,column:348}}}))?stack1:"")+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=(stack1=null!=depth0?lookupProperty(depth0,"meta"):depth0)?lookupProperty(stack1,"duration"):stack1,{name:"if",hash:{},fn:container.program(5,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:349},end:{line:1,column:409}}}))?stack1:"")+"</small></a>"},useData:!0})},bm2U:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return TimelineView}));var loglevel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__),_stores_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("unFh"),_models_scene__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6nYy"),_models_message__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("PwMq"),_models_feedback__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("+rAh"),_models_choice__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("cfm5"),_timeline_choice_view__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("Q6K3"),_timeline_scene_view__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("Gd/F"),_timeline_feedback_view__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("RJo4");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var TimelineView=function(_Marionette$Collectio){var subClass,superClass;function TimelineView(){return _Marionette$Collectio.apply(this,arguments)||this}superClass=_Marionette$Collectio,(subClass=TimelineView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=TimelineView.prototype;return _proto.initialize=function(){this.views={},this.collection=_stores_player__WEBPACK_IMPORTED_MODULE_1__.a.timeline},_proto.tagName=function(){return"ul"},_proto.className=function(){return"player-timeline player-container"},_proto.childView=function(child){switch(child.constructor){case _models_scene__WEBPACK_IMPORTED_MODULE_2__.a:return _timeline_scene_view__WEBPACK_IMPORTED_MODULE_7__.a;case _models_feedback__WEBPACK_IMPORTED_MODULE_4__.a:return _timeline_feedback_view__WEBPACK_IMPORTED_MODULE_8__.a;case _models_message__WEBPACK_IMPORTED_MODULE_3__.a:loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.error("Unknown Message kind in TimelineView");break;case _models_choice__WEBPACK_IMPORTED_MODULE_5__.a:return _timeline_choice_view__WEBPACK_IMPORTED_MODULE_6__.a;default:loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.error("Unknown child in TimelineView")}},TimelineView}(Marionette.CollectionView)}).call(this,__webpack_require__("6BNn"))},cdhd:function(module,exports,__webpack_require__){"use strict";var on,once,off,emit,methods,descriptors,base,d=__webpack_require__("R5f6"),callable=__webpack_require__("q/aM"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0};once=function(type,listener){var once,self;return callable(listener),self=this,on.call(this,type,once=function(){off.call(self,type,once),apply.call(listener,this,arguments)}),once.__eeOnceListener__=listener,this},emit=function(type){var i,l,listener,listeners,args;if(hasOwnProperty.call(this,"__ee__")&&(listeners=this.__ee__[type]))if("object"==typeof listeners){for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];apply.call(listeners,this,args)}},methods={on:on=function(type,listener){var data;return callable(listener),hasOwnProperty.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?"object"==typeof data[type]?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this},once:once,off:off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty.call(this,"__ee__"))return this;if(!(data=this.__ee__)[type])return this;if("object"==typeof(listeners=data[type]))for(i=0;candidate=listeners[i];++i)candidate!==listener&&candidate.__eeOnceListener__!==listener||(2===listeners.length?data[type]=listeners[i?0:1]:listeners.splice(i,1));else listeners!==listener&&listeners.__eeOnceListener__!==listener||delete data[type];return this},emit:emit},descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(o){return null==o?create(base):defineProperties(Object(o),descriptors)},exports.methods=methods},cfm5:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Choice}));__webpack_require__("fAGv"),__webpack_require__("ba7S");var lib_format_cumulative_score__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("HL6H");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Choice=function(_TimelineEntry){var subClass,superClass;function Choice(){return _TimelineEntry.apply(this,arguments)||this}superClass=_TimelineEntry,(subClass=Choice).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Choice.prototype;return _proto.initialize=function(attributes,options){void 0===options&&(options={}),this.edge=options.edge},_proto.getVoiceURL=function(){return this.edge.getVoiceURL()},_proto.eventJSON=function(){return _.extend(this.edge.eventJSON(),this.pick("answered_at","duration","custom_content"))},_proto.getContent=function(){return this.edge.isFreetext()?this.escape("custom_content"):this.edge.getContent()},_proto.getColor=function(){return this.edge.getColor()},_proto.getScores=function(){var _this=this,result=[];return this.edge.project.scores.each((function(projectScore){var uid=projectScore.get("uid"),score=_this.scoreFor(uid);null!=score&&result.push(_.extend(projectScore.attributes,{score:Object(lib_format_cumulative_score__WEBPACK_IMPORTED_MODULE_2__.a)(score),total_score:(_this.totalScoreFor(uid)||0).toString()}))})),result},_proto.score=function(){return this.get("total_score")},_proto.scoreFor=function(uid){return(this.get("scores")||{})[uid]},_proto.totalScoreFor=function(uid){return(this.get("total_scores")||{})[uid]},Choice}(__webpack_require__("2DHK").a)}).call(this,__webpack_require__("5VhH").default)},cz6k:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return init}));var lib_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("W5ou"),lib_iframe_shown__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fE8S"),player_v2_app__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("xggf");function init(){var text;Object(lib_browser__WEBPACK_IMPORTED_MODULE_0__.b)("<9")?$(".js-player-ie8").show():Object(lib_iframe_shown__WEBPACK_IMPORTED_MODULE_1__.a)()?new player_v2_app__WEBPACK_IMPORTED_MODULE_2__.a(this.context):(text&&$(".js-reload-text").html(text),$(".js-player-preloader").hide(),$(".js-player-reload").show())}},d9R5:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";module.exports?module.exports=factory():void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,(function(root){"use strict";var _IPv6=root&&root.IPv6;return{best:function(address){var pos,_segments,segments=address.toLowerCase().split(":"),length=segments.length,total=8;for(""===segments[0]&&""===segments[1]&&""===segments[2]?(segments.shift(),segments.shift()):""===segments[0]&&""===segments[1]?segments.shift():""===segments[length-1]&&""===segments[length-2]&&segments.pop(),-1!==segments[(length=segments.length)-1].indexOf(".")&&(total=7),pos=0;pos<length&&""!==segments[pos];pos++);if(pos<total)for(segments.splice(pos,1,"0000");segments.length<total;)segments.splice(pos,0,"0000");for(var i=0;i<total;i++){_segments=segments[i].split("");for(var j=0;j<3&&("0"===_segments[0]&&_segments.length>1);j++)_segments.splice(0,1);segments[i]=_segments.join("")}var best=-1,_best=0,_current=0,current=-1,inzeroes=!1;for(i=0;i<total;i++)inzeroes?"0"===segments[i]?_current+=1:(inzeroes=!1,_current>_best&&(best=current,_best=_current)):"0"===segments[i]&&(inzeroes=!0,current=i,_current=1);_current>_best&&(best=current,_best=_current),_best>1&&segments.splice(best,_best,""),length=segments.length;var result="";for(""===segments[0]&&(result=":"),i=0;i<length&&(result+=segments[i],i!==length-1);i++)result+=":";return""===segments[length-1]&&(result+=":"),result},noConflict:function(){return root.IPv6===this&&(root.IPv6=_IPv6),this}}}))},"dT/v":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULTS}));var DEFAULTS={player_url:"",small_url:"",behavior:"selected"}},dTQE:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="player-row"><div class="bg player-xs-12 player-md-5 player-md-offset-7 player-lg-4 player-lg-offset-8"><aside><div class="logo"></div><div class="bottom"><dl><dt><strong>1</strong>&nbsp;&ndash;&nbsp;<strong>9</strong></dt><dd>Choices</dd></dl><dl><dt><strong>S</strong></dt><dd>Show scores</dd></dl><dl><dt><strong>V</strong></dt><dd>Toggle voiceover</dd></dl><dl><dt><strong>M</strong></dt><dd>Show menu</dd></dl><dl><dt><strong>ESC</strong></dt><dd>Close this help</dd></dl><a href="javascript:;"class="close js-hide"><span class="fa fa-close fa-fw"></span></a></div></aside><div class="bg-strip"></div><div class="bg-strip left player-md-hidden"></div></div></div>'},useData:!0})},dwMK:function(module,exports,__webpack_require__){module.exports=function(){"use strict";var e=/^(b|B)$/,i={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},t={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},o={floor:Math.floor,ceil:Math.ceil};function n(n){var r,a,b,l,s,c,d,f,p,u,B,h,g,y,M,m,v,x,N,j,T,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},w=[],P=0;if(isNaN(n))throw new TypeError("Invalid number");if(b=!0===E.bits,M=!0===E.unix,h=!0===E.pad,a=E.base||2,g=void 0!==E.round?E.round:M?1:2,d=void 0!==E.locale?E.locale:"",f=E.localeOptions||{},m=void 0!==E.separator?E.separator:"",v=void 0!==E.spacer?E.spacer:M?"":" ",N=E.symbols||{},x=2===a&&E.standard||"jedec",B=E.output||"string",s=!0===E.fullform,c=E.fullforms instanceof Array?E.fullforms:[],r=void 0!==E.exponent?E.exponent:-1,j=o[E.roundingMethod]||Math.round,p=(u=Number(n))<0,l=a>2?1e3:1024,T=!1===isNaN(E.precision)?parseInt(E.precision,10):0,p&&(u=-u),(-1===r||isNaN(r))&&(r=Math.floor(Math.log(u)/Math.log(l)))<0&&(r=0),r>8&&(T>0&&(T+=8-r),r=8),"exponent"===B)return r;if(0===u)w[0]=0,y=w[1]=M?"":i[x][b?"bits":"bytes"][r];else{P=u/(2===a?Math.pow(2,10*r):Math.pow(1e3,r)),b&&(P*=8)>=l&&r<8&&(P/=l,r++);var k=Math.pow(10,r>0?g:0);w[0]=j(P*k)/k,w[0]===l&&r<8&&void 0===E.exponent&&(w[0]=1,r++),y=w[1]=10===a&&1===r?b?"kb":"kB":i[x][b?"bits":"bytes"][r],M&&(w[1]="jedec"===x?w[1].charAt(0):r>0?w[1].replace(/B$/,""):w[1],e.test(w[1])&&(w[0]=Math.floor(w[0]),w[1]=""))}if(p&&(w[0]=-w[0]),T>0&&(w[0]=w[0].toPrecision(T)),w[1]=N[w[1]]||w[1],!0===d?w[0]=w[0].toLocaleString():d.length>0?w[0]=w[0].toLocaleString(d,f):m.length>0&&(w[0]=w[0].toString().replace(".",m)),h&&!1===Number.isInteger(w[0])&&g>0){var G=m||".",K=w[0].toString().split(G),S=K[1]||"",Y=S.length,Z=g-Y;w[0]="".concat(K[0]).concat(G).concat(S.padEnd(Y+Z,"0"))}return s&&(w[1]=c[r]?c[r]:t[x][r]+(b?"bit":"byte")+(1===w[0]?"":"s")),"array"===B?w:"object"===B?{value:w[0],symbol:w[1],exponent:r,unit:y}:w.join(v)}return n.partial=function(e){return function(i){return n(i,e)}},n}()},e9wZ:function(module,exports,__webpack_require__){"use strict";module.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},eKUM:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data,blockParams,depths){var alias1=container.lambda,alias2=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="spacer"style="width: '+alias2(alias1(null!=depths[1]?lookupProperty(depths[1],"padWidth"):depths[1],depth0))+'%;"></div><div class="bar '+alias2(alias1(null!=depth0?lookupProperty(depth0,"class"):depth0,depth0))+'"style="width: '+alias2(alias1(null!=depths[1]?lookupProperty(depths[1],"boxWidth"):depths[1],depth0))+'%;"data-relative-height="'+alias2(alias1(null!=depth0?lookupProperty(depth0,"relativeHeight"):depth0,depth0))+'"><div class="gauge"style="background-color: '+alias2(alias1(null!=depth0?lookupProperty(depth0,"color"):depth0,depth0))+';"><div class="text">'+alias2(alias1(null!=depth0?lookupProperty(depth0,"text"):depth0,depth0))+'</div><div class="value">'+alias2(alias1(null!=depth0?lookupProperty(depth0,"value"):depth0,depth0))+"</div></div></div>"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data,blockParams,depths){var stack1,helper,alias1=container.lambda,alias2=container.escapeExpression,alias3=null!=depth0?depth0:container.nullContext||{},alias4=container.hooks.helperMissing,alias5="function",lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<a href="javascript:;"class="js-close close color-inherit"role="button"title="'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"menu_close_points_details"):stack1,depth0))+'"tabindex="0"><span class="fa fa-close fa-2x fa-fw"></span></a><div class="score-wrapper player-xs-12 player-md-8 player-md-offset-2 player-lg-6 player-lg-offset-3"><div class="score-chart"><div class="xline"style="top: '+alias2(typeof(helper=null!=(helper=lookupProperty(helpers,"xoffset")||(null!=depth0?lookupProperty(depth0,"xoffset"):depth0))?helper:alias4)===alias5?helper.call(alias3,{name:"xoffset",hash:{},data:data,loc:{start:{line:1,column:340},end:{line:1,column:351}}}):helper)+'%;"data-xoffset="'+alias2(typeof(helper=null!=(helper=lookupProperty(helpers,"xoffset")||(null!=depth0?lookupProperty(depth0,"xoffset"):depth0))?helper:alias4)===alias5?helper.call(alias3,{name:"xoffset",hash:{},data:data,loc:{start:{line:1,column:368},end:{line:1,column:379}}}):helper)+'"><div class="bars"style="max-width: '+alias2(typeof(helper=null!=(helper=lookupProperty(helpers,"maxWidth")||(null!=depth0?lookupProperty(depth0,"maxWidth"):depth0))?helper:alias4)===alias5?helper.call(alias3,{name:"maxWidth",hash:{},data:data,loc:{start:{line:1,column:416},end:{line:1,column:428}}}):helper)+'px;">'+(null!=(stack1=lookupProperty(helpers,"each").call(alias3,null!=depth0?lookupProperty(depth0,"bars"):depth0,{name:"each",hash:{},fn:container.program(1,data,0,blockParams,depths),inverse:container.noop,data:data,loc:{start:{line:1,column:433},end:{line:1,column:772}}}))?stack1:"")+'<div class="spacer"style="width: '+alias2(typeof(helper=null!=(helper=lookupProperty(helpers,"padWidth")||(null!=depth0?lookupProperty(depth0,"padWidth"):depth0))?helper:alias4)===alias5?helper.call(alias3,{name:"padWidth",hash:{},data:data,loc:{start:{line:1,column:805},end:{line:1,column:817}}}):helper)+'%;"></div></div></div></div><div class="score-button"><div class="score-button-body"><div class="text"data-translation="current_score">'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"current_score"):stack1,depth0))+'</div><div class="score">'+alias2(typeof(helper=null!=(helper=lookupProperty(helpers,"score")||(null!=depth0?lookupProperty(depth0,"score"):depth0))?helper:alias4)===alias5?helper.call(alias3,{name:"score",hash:{},data:data,loc:{start:{line:1,column:1007},end:{line:1,column:1016}}}):helper)+'&nbsp;<small data-translation="pts">'+alias2(alias1(null!=(stack1=null!=depth0?lookupProperty(depth0,"translations"):depth0)?lookupProperty(stack1,"pts"):stack1,depth0))+"</small></div></div></div></div>"},useData:!0,useDepths:!0})},eZ3C:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return MessageView}));var constants_message__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("NX2P"),_templates_messages_show__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("rFoI"),_templates_messages_show__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_templates_messages_show__WEBPACK_IMPORTED_MODULE_1__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var MessageView=function(_Marionette$View){var subClass,superClass;function MessageView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=MessageView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=MessageView.prototype;return _proto.className=function(){return"timeline-scene timeline-message"},_proto.ui=function(){return{bubble:".js-bubble"}},_proto.getTemplate=function(){return _templates_messages_show__WEBPACK_IMPORTED_MODULE_1___default.a},_proto.templateContext=function(){return{content:this.getContent(),icon:"init_voice"===this.model.get("kind")?constants_message__WEBPACK_IMPORTED_MODULE_0__.b:constants_message__WEBPACK_IMPORTED_MODULE_0__.a}},_proto.focus=function(){this.ui.bubble.focus()},_proto.removeTabIndex=function(){this.ui.bubble.removeAttr("tabindex")},_proto.getHeight=function(){return this.$el.outerHeight()},_proto.getWidth=function(){return this.$el.width()},_proto.getBubbleHeight=function(){return this.ui.bubble.outerHeight()},_proto.getBubbleBorderRadius=function(){return this.ui.bubble.css("border-radius")},_proto.getContent=function(){return this.model.getContent()},MessageView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},ebir:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var arr,result,from=Array.from;return"function"==typeof from&&(result=from(arr=["raz","dwa"]),Boolean(result&&result!==arr&&"dwa"===result[1]))}},"f+cg":function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return value!=value}},"f/2M":function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,alias4=container.escapeExpression,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div><span class="name">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"name")||(null!=depth0?lookupProperty(depth0,"name"):depth0))?helper:alias2)?helper.call(alias1,{name:"name",hash:{},data:data,loc:{start:{line:1,column:88},end:{line:1,column:96}}}):helper)+'</span><small class="score js-score"title="'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"name")||(null!=depth0?lookupProperty(depth0,"name"):depth0))?helper:alias2)?helper.call(alias1,{name:"name",hash:{},data:data,loc:{start:{line:1,column:139},end:{line:1,column:147}}}):helper)+'"style="background-color:'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"color")||(null!=depth0?lookupProperty(depth0,"color"):depth0))?helper:alias2)?helper.call(alias1,{name:"color",hash:{},data:data,loc:{start:{line:1,column:172},end:{line:1,column:181}}}):helper)+'">'+alias4("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"score")||(null!=depth0?lookupProperty(depth0,"score"):depth0))?helper:alias2)?helper.call(alias1,{name:"score",hash:{},data:data,loc:{start:{line:1,column:183},end:{line:1,column:192}}}):helper)+"</small></div>"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="scores-vertical js-scores-vertical">'+(null!=(stack1=lookupProperty(helpers,"each").call(null!=depth0?depth0:container.nullContext||{},null!=depth0?lookupProperty(depth0,"scores"):depth0,{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:48},end:{line:1,column:215}}}))?stack1:"")+"</div>"},useData:!0})},f5ld:function(module,exports){function KeyCombo(keyComboStr){this.sourceStr=keyComboStr,this.subCombos=KeyCombo.parseComboStr(keyComboStr),this.keyNames=this.subCombos.reduce((function(memo,nextSubCombo){return memo.concat(nextSubCombo)}),[])}KeyCombo.sequenceDeliminator=">>",KeyCombo.comboDeliminator=">",KeyCombo.keyDeliminator="+",KeyCombo.parseComboStr=function(keyComboStr){for(var subComboStrs=KeyCombo._splitStr(keyComboStr,KeyCombo.comboDeliminator),combo=[],i=0;i<subComboStrs.length;i+=1)combo.push(KeyCombo._splitStr(subComboStrs[i],KeyCombo.keyDeliminator));return combo},KeyCombo.prototype.check=function(pressedKeyNames){for(var startingKeyNameIndex=0,i=0;i<this.subCombos.length;i+=1)if(-1===(startingKeyNameIndex=this._checkSubCombo(this.subCombos[i],startingKeyNameIndex,pressedKeyNames)))return!1;return!0},KeyCombo.prototype.isEqual=function(otherKeyCombo){if(!otherKeyCombo||"string"!=typeof otherKeyCombo&&"object"!=typeof otherKeyCombo)return!1;if("string"==typeof otherKeyCombo&&(otherKeyCombo=new KeyCombo(otherKeyCombo)),this.subCombos.length!==otherKeyCombo.subCombos.length)return!1;for(var i=0;i<this.subCombos.length;i+=1)if(this.subCombos[i].length!==otherKeyCombo.subCombos[i].length)return!1;for(i=0;i<this.subCombos.length;i+=1){for(var subCombo=this.subCombos[i],otherSubCombo=otherKeyCombo.subCombos[i].slice(0),j=0;j<subCombo.length;j+=1){var keyName=subCombo[j],index=otherSubCombo.indexOf(keyName);index>-1&&otherSubCombo.splice(index,1)}if(0!==otherSubCombo.length)return!1}return!0},KeyCombo._splitStr=function(str,deliminator){for(var s=str,d=deliminator,c="",ca=[],ci=0;ci<s.length;ci+=1)ci>0&&s[ci]===d&&"\\"!==s[ci-1]&&(ca.push(c.trim()),c="",ci+=1),c+=s[ci];return c&&ca.push(c.trim()),ca},KeyCombo.prototype._checkSubCombo=function(subCombo,startingKeyNameIndex,pressedKeyNames){subCombo=subCombo.slice(0),pressedKeyNames=pressedKeyNames.slice(startingKeyNameIndex);for(var endIndex=startingKeyNameIndex,i=0;i<subCombo.length;i+=1){var keyName=subCombo[i];if("\\"===keyName[0]){var escapedKeyName=keyName.slice(1);escapedKeyName!==KeyCombo.comboDeliminator&&escapedKeyName!==KeyCombo.keyDeliminator||(keyName=escapedKeyName)}var index=pressedKeyNames.indexOf(keyName);if(index>-1&&(subCombo.splice(i,1),i-=1,index>endIndex&&(endIndex=index),0===subCombo.length))return endIndex}return-1},module.exports=KeyCombo},fE8S:function(module,__webpack_exports__,__webpack_require__){"use strict";function iFrameShown(){return!window.getComputedStyle||!!window.getComputedStyle($("body")[0],null)}__webpack_require__.d(__webpack_exports__,"a",(function(){return iFrameShown}))},fUZs:function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;!function(root){exports&&exports.nodeType,module&&module.nodeType;var freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal&&freeGlobal.self;var punycode,maxInt=2147483647,regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},floor=Math.floor,stringFromCharCode=String.fromCharCode;function error(type){throw new RangeError(errors[type])}function map(array,fn){for(var length=array.length,result=[];length--;)result[length]=fn(array[length]);return result}function mapDomain(string,fn){var parts=string.split("@"),result="";return parts.length>1&&(result=parts[0]+"@",string=parts[1]),result+map((string=string.replace(regexSeparators,".")).split("."),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,(function(value){var output="";return value>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)})).join("")}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/700):delta>>1,delta+=floor(delta/numPoints);delta>455;k+=36)delta=floor(delta/35);return floor(k+36*delta/(delta+38))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,codePoint,output=[],inputLength=input.length,i=0,n=128,bias=72;for((basic=input.lastIndexOf("-"))<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=36;index>=inputLength&&error("invalid-input"),((digit=(codePoint=input.charCodeAt(index++))-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:36)>=36||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,!(digit<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)w>floor(maxInt/(baseMinusT=36-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=128,delta=0,bias=72,j=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push("-");handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)(currentValue=input[j])>=n&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=36;!(q<(t=k<=bias?1:k>=bias+26?26:k-bias));k+=36)qMinusT=q-t,baseMinusT=36-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}punycode={version:"1.3.2",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))},toUnicode:function(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__("GJgv")(module),__webpack_require__("SLQP"))},fXDG:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return Edge}));__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug"),__webpack_require__("N6Ff"),__webpack_require__("hmwa");var sprintf_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("+0G6"),constants_edge__WEBPACK_IMPORTED_MODULE_7__=(__webpack_require__("OPuQ"),__webpack_require__("nj8K")),constants_node__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("RIFn");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Edge=function(_Backbone$Model){var subClass,superClass;function Edge(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Edge).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Edge.prototype;return _proto.defaults=function(){return constants_edge__WEBPACK_IMPORTED_MODULE_7__.c},_proto.initialize=function(attributes,options){void 0===options&&(options={}),this.project=options.project,options.fromNode?this.linkFrom(options.fromNode):attributes.from_node_index?this.linkFrom(this.project.nodes.findWhere({index:attributes.from_node_index})):attributes.from_node_id&&this.linkFrom(this.project.nodes.findWhere({id:attributes.from_node_id})),options.toNode?this.linkTo(options.toNode):attributes.to_node_index?this.linkTo(this.project.nodes.findWhere({index:attributes.to_node_index})):attributes.to_node_id&&this.linkTo(this.project.nodes.findWhere({id:attributes.to_node_id})),this.on("change",this.afterChange,this),this.on("change:content",this.checkParentNode,this)},_proto.url=function(){return this.project.url()+"/edges"+(this.isNew()?"":"/"+this.id)},_proto.afterChange=function(model,options){void 0===options&&(options={}),_.chain(this.changedAttributes()).keys().any((function(key){return _(constants_edge__WEBPACK_IMPORTED_MODULE_7__.f).indexOf(key)>-1})).value()&&this.trigger("sync:queue",this,options)},_proto.linkFrom=function(node){return node===this.fromNode||(this.previousFromNode=this.fromNode,this.listenOff(this.fromNode),this.fromNode=node,this.listenOn(this.fromNode),this.set("from_node_index",node?node.get("index"):-1),this.project.init&&(null!=this.previousFromNode&&(this.previousFromNode.trigger("check"),this.previousFromNode.updateEdgesPosition()),null!=this.fromNode&&(this.fromNode.trigger("check"),this.fromNode.updateEdgesPosition()))),this},_proto.linkTo=function(node){if(node===this.fromNode||node===this.toNode)return this;var previous=this.toNode;return this.listenOff(this.toNode),this.toNode=node,this.listenOn(this.toNode),this.set("to_node_index",node?node.get("index"):-1),this.project.init&&(this.fromNode.trigger("check"),null!=previous&&previous.trigger("check"),null!=node&&node.trigger("check")),null!=previous&&this.project.purgeNGraphLink(this.fromNode.get("index"),previous.get("index")),this.toNode&&this.project.nGraph.addLink(this.fromNode.get("index"),this.toNode.get("index")),this},_proto.canLinkTo=function(node){return node!=this.fromNode},_proto.listenOn=function(node){null!=node&&(this.listenTo(node,"change:top change:left",this.redraw),this.listenTo(node,"saved",this.save))},_proto.listenOff=function(node){null!=node&&this.stopListening(node)},_proto.useless=function(){return!this.get("content")&&!this.get("to_node_index")&&!this.isFreetext()},_proto.redraw=function(){this.trigger("redraw")},_proto.checkParentNode=function(){this.fromNode.trigger("check")},_proto.broken=function(){var errors=[];return this.get("content")||errors.push("There is an empty reply option"),this.toNode||errors.push("One of the reply options leads nowhere"),errors},_proto.serverAttributes=function(){return constants_edge__WEBPACK_IMPORTED_MODULE_7__.f.concat(["id"])},_proto.toJSON=function(options){return void 0===options&&(options={}),options.server?this.pick(this.serverAttributes()):_.clone(this.attributes)},_proto.eventJSON=function(){return this.pick(["content","from_node_index","to_node_index","index","position"])},_proto.filename=function(){var index=this.get("index");return this.fromNode.filename()+"E"+(index<10?"0"+index:index)},_proto.getIndexName=function(){return this.get("index")?Object(sprintf_js__WEBPACK_IMPORTED_MODULE_5__.sprintf)("e%02d",this.get("index")):null},_proto.parse=function(response){return null!=response.edge?response.edge:response},_proto.delete=function(){this.set("deleted",!0),this.project.edges.remove(this),this.off(),this.fromNode.get("deleted")||this.fromNode.updateEdgesPosition(),this.toNode&&this.project.purgeNGraphLink(this.fromNode.get("index"),this.toNode.get("index"))},_proto.getContent=function(){return this.escape("content")||"..."},_proto.getVoiceURL=function(){var voice=this.project.voices.get(this.get("voice_id"));if(null!=voice)return voice.get("url")},_proto.getColor=function(){return this.toNode&&this.toNode.get("color")||null},_proto.getKind=function(){return this.get("kind")||this.fromNode&&this.fromNode.getKind()||constants_node__WEBPACK_IMPORTED_MODULE_8__.b.kind},_proto.isFreetext=function(){return"freetext"===this.getKind()},Edge}(Backbone.Model)}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},faqT:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}__webpack_require__.d(__webpack_exports__,"a",(function(){return PlaylogEntry}));var PlaylogEntry=function(_Backbone$Model){var subClass,superClass;function PlaylogEntry(){return _Backbone$Model.apply(this,arguments)||this}return superClass=_Backbone$Model,(subClass=PlaylogEntry).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),PlaylogEntry.prototype.initialize=function(){this.set("index",this.collection.length+1)},PlaylogEntry}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},fgXJ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return NotificationsView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),lib_loader__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("B9Pn"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("v53q"),_stores_settings__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("x3EI"),_templates_notifications_lesson_locked__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("wAjX"),_templates_notifications_lesson_locked__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_templates_notifications_lesson_locked__WEBPACK_IMPORTED_MODULE_4__),_templates_notifications_connection__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b/UN"),_templates_notifications_connection__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_templates_notifications_connection__WEBPACK_IMPORTED_MODULE_5__),_templates_notifications_default__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("lM0x"),_templates_notifications_default__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_templates_notifications_default__WEBPACK_IMPORTED_MODULE_6__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var NotificationsView=function(_Marionette$Collectio){var subClass,superClass;function NotificationsView(){return _Marionette$Collectio.apply(this,arguments)||this}superClass=_Marionette$Collectio,(subClass=NotificationsView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=NotificationsView.prototype;return _proto.className=function(){return"player-notification player-overlay"},_proto.events=function(){return{"click .js-close":"onHide"}},_proto.keyboard=function(){return{keys:"esc",context:"attachment"}},_proto.getTemplate=function(){switch(this.model.get("type")){case"lesson_locked":return _templates_notifications_lesson_locked__WEBPACK_IMPORTED_MODULE_4___default.a;case"connection":return _templates_notifications_connection__WEBPACK_IMPORTED_MODULE_5___default.a;default:return _templates_notifications_default__WEBPACK_IMPORTED_MODULE_6___default.a}},_proto.templateContext=function(){return{classroom_url:lib_loader__WEBPACK_IMPORTED_MODULE_1__.a.url.classroom}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.css({display:"none"})},_proto.show=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.$el.velocity("fadeIn",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_3__.b.duration,display:"flex"}),_lib_keyboard__WEBPACK_IMPORTED_MODULE_2__.a.on(this)},_proto.hide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),_lib_keyboard__WEBPACK_IMPORTED_MODULE_2__.a.off(this),this.$el.velocity("fadeOut",{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_3__.b.duration,complete:this.destroy.bind(this)})},_proto.onHide=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),this.hide()},_proto.onShortcut=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this),"lesson_locked"!==this.model.get("type")&&this.hide()},NotificationsView}(Marionette.CollectionView)}).call(this,__webpack_require__("6BNn"))},ftp1:function(module,exports,__webpack_require__){"use strict";var d=__webpack_require__("R5f6"),NativeSymbol=__webpack_require__("KjdW").Symbol;module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))})}},g86V:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("qoQZ"),__webpack_require__("BzOA"),__webpack_require__("fAGv"),__webpack_require__("E03B"),__webpack_require__("V4Jz");var lib_loader__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("B9Pn"),constants_project__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("G4Dd"),INTERPOLATION_REGEX=/%(\w+)%/g;__webpack_exports__.a=function(original){var text=original;if(lib_loader__WEBPACK_IMPORTED_MODULE_5__.a.interpolation){var niddle,replacement,matches=text.match(INTERPOLATION_REGEX);if(matches)matches.forEach((function(match){niddle=match.replace(/^%(.*)%$/,"$1"),(replacement=lib_loader__WEBPACK_IMPORTED_MODULE_5__.a.interpolation[niddle]||constants_project__WEBPACK_IMPORTED_MODULE_6__.a.translations["interpolation_"+niddle])&&(text=text.replace(match,replacement))}))}return text}},gW10:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("hc7u")()?__webpack_require__("KjdW").Symbol:__webpack_require__("DQdK")},gZsQ:function(module,exports,__webpack_require__){"use strict";var str="razdwatrzy";module.exports=function(){return"function"==typeof str.contains&&(!0===str.contains("dwa")&&!1===str.contains("foo"))}},ggrQ:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Voice}));var constants_voice__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("lYBc");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Voice=function(_Backbone$Model){var subClass,superClass;function Voice(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Voice).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Voice.prototype;return _proto.defaults=function(){return constants_voice__WEBPACK_IMPORTED_MODULE_0__.c},_proto.parse=function(response){return null!=response.voice?response.voice:response},Voice}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},gs0Z:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return EdgeView}));__webpack_require__("qoQZ"),__webpack_require__("V4Jz");var trim__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("mZf2"),trim__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(trim__WEBPACK_IMPORTED_MODULE_2__),lib_tracer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ZypF"),constants_edge__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("nj8K"),lib_interpolation__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("g86V"),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOCt"),_stores_player__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("x3EI"),_templates_edges_freetext__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("6Gvz"),_templates_edges_freetext__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_templates_edges_freetext__WEBPACK_IMPORTED_MODULE_9__),_templates_edges_finish__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("DXlm"),_templates_edges_finish__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_templates_edges_finish__WEBPACK_IMPORTED_MODULE_10__),_templates_edges_regular__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("2kaT"),_templates_edges_regular__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_templates_edges_regular__WEBPACK_IMPORTED_MODULE_11__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var EdgeView=function(_Marionette$View){var subClass,superClass;function EdgeView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=EdgeView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=EdgeView.prototype;return _proto.initialize=function(options){this.order=options.order,this.current=options.current,this.isFreetext=this.model.isFreetext()},_proto.tagName=function(){return"li"},_proto.className=function(){return"current-edge"},_proto.ui=function(){return{content:".content",order:".edge-position",bubble:".js-edge",textarea:"textarea",counter:".counter"}},_proto.events=function(){return{"click @ui.bubble":"onClick","keydown @ui.bubble":"onKeyDown","keyup @ui.textarea":"updateCounter"}},_proto.getTemplate=function(){switch(this.model.getKind()){case"freetext":return _templates_edges_freetext__WEBPACK_IMPORTED_MODULE_9___default.a;case"feedback":case"finish":return _templates_edges_finish__WEBPACK_IMPORTED_MODULE_10___default.a;default:return _templates_edges_regular__WEBPACK_IMPORTED_MODULE_11___default.a}},_proto.templateContext=function(){return{content:this.getContent(),order:this.order,color:_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.playlog?"":this.model.getColor(),enable_choice_numbers:!_stores_player__WEBPACK_IMPORTED_MODULE_7__.a.project.get("disable_choice_numbers"),index_name:this.model.getIndexName()}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this),this.isFreetext&&this.renderLimit(),this.$el.css({visibility:"hidden"})},_proto.getContent=function(){var content=this.model.getContent();return"<p>"+(content=Object(lib_interpolation__WEBPACK_IMPORTED_MODULE_5__.a)(content).replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"</p><p>"))+"</p>"},_proto.show=function(delay){void 0===delay&&(delay=0);var options={visibility:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration,delay:delay};this.$el.velocity("stop",!0).velocity({opacity:[1,0],translateY:[0,10]},options),this.visible=!0},_proto.hide=function(delay){void 0===delay&&(delay=0);var options={visibility:"hidden",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration,delay:delay};this.$el.velocity("stop",!0).velocity({opacity:[0,1],translateY:[10,0]},options),this.visible=!1},_proto.onClick=function(event){event.preventDefault(),event.stopPropagation(),event.currentTarget.blur(),this.navigateNext()},_proto.onKeyDown=function(event){[13,32].indexOf(event.which)<0||this.navigateNext()},_proto.navigateNext=function(){return Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this),this.isFreetext&&0===trim__WEBPACK_IMPORTED_MODULE_2___default()(this.ui.textarea.val()).length?(this.ui.textarea.addClass("has-error"),!1):(_actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.edgeIsChosen({current:this.current,edge:this.model,attributes:{offset:this.ui.bubble.offset(),order:this.order,custom_content:this.isFreetext?trim__WEBPACK_IMPORTED_MODULE_2___default()(this.ui.textarea.val()):null}}),!0)},_proto.renderLimit=function(){this.ui.counter.html('<span class="length">0</span> / '+constants_edge__WEBPACK_IMPORTED_MODULE_4__.d)},_proto.updateCounter=function(){var length=this.ui.textarea.val().length;this.ui.textarea.toggleClass("has-error",0===length),this.$(".length").text(length).toggleClass("text-red",length>constants_edge__WEBPACK_IMPORTED_MODULE_4__.d)},EdgeView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},hc7u:function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__("KjdW"),validTypes={object:!0,symbol:!0};module.exports=function(){var symbol,Symbol=global.Symbol;if("function"!=typeof Symbol)return!1;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return!1}return!!validTypes[typeof Symbol.iterator]&&(!!validTypes[typeof Symbol.toPrimitive]&&!!validTypes[typeof Symbol.toStringTag])}},i4hu:function(module,exports){module.exports={l2:function(a,b){var dx=a.x-b.x,dy=a.y-b.y;return Math.sqrt(dx*dx+dy*dy)},l1:function(a,b){var dx=a.x-b.x,dy=a.y-b.y;return Math.abs(dx)+Math.abs(dy)}}},"iB/i":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return CurrentEdgesView}));__webpack_require__("qoQZ"),__webpack_require__("x8ax"),__webpack_require__("921v");var lib_tracer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ZypF"),_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("v53q"),_stores_player__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("unFh"),_channels_player__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("oOCt"),_models_scene__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("6nYy"),_collections_edges__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("qpBm"),_edge_view__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("gs0Z");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var CurrentEdgesView=function(_Marionette$Collectio){var subClass,superClass;function CurrentEdgesView(){return _Marionette$Collectio.apply(this,arguments)||this}superClass=_Marionette$Collectio,(subClass=CurrentEdgesView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=CurrentEdgesView.prototype;return _proto.initialize=function(){this.collection=new _collections_edges__WEBPACK_IMPORTED_MODULE_9__.a,this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_6__.a,"current:scene current:message current:edges",this.onModelChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_6__.a,"current:unload reset",this.onUnload),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_6__.a,"current:edges:show",this.onShow)},_proto.tagName=function(){return"ol"},_proto.childView=function(){return _edge_view__WEBPACK_IMPORTED_MODULE_10__.a},_proto.ui=function(){return{resize:".js-resize",edges:".js-edges"}},_proto.keyboard=function(){return{keys:"123456789".split("")}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this)},_proto.buildCollection=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this);var edges=this.model.edges();this.model instanceof _models_scene__WEBPACK_IMPORTED_MODULE_8__.a&&_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.get("randomize_choices_order")&&(edges=_(edges.shuffle())),this.collection.reset(edges.value())},_proto.childViewOptions=function(model){return{current:this.model,order:this.collection.indexOf(model)+1}},_proto.onModelChange=function(model){this.model=model,this.buildCollection()},_proto.onUnload=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this),_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__.a.off(this),this.$el.css({visibility:"hidden"})},_proto.onShow=function(){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this),this.$el.css({visibility:""}),this.children.each((function(view,index){return view.show(100*index)})),setTimeout((function(){_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__.a.on(_this)}),100*this.children.length),_actions_timeline__WEBPACK_IMPORTED_MODULE_7__.a.afterCurrentEdgesShow()},_proto.onShortcut=function(event){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_3__.a)(this);var digit=parseInt(event.key,10),view=this.children.findByIndex(digit-1);view&&view.navigateNext()&&_lib_keyboard__WEBPACK_IMPORTED_MODULE_4__.a.off(this)},CurrentEdgesView}(Marionette.CollectionView)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},ilcR:function(module,exports,__webpack_require__){"use strict";var safeToString=__webpack_require__("5Kdd"),reNewLine=/[\n\r\u2028\u2029]/g;module.exports=function(value){var string=safeToString(value);return null===string?"<Non-coercible to string value>":(string.length>100&&(string=string.slice(0,99)+"\u2026"),string=string.replace(reNewLine,(function(char){switch(char){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))}},kPJp:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return AutolinkClickable}));var urijs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2jbP"),urijs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(urijs__WEBPACK_IMPORTED_MODULE_0__),_models_attachment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("2vyi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("oOCt");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var IMAGE_EXTENSIONS=["jpg","jpeg","png","gif","bmp","svg","webp"],AutolinkClickable=function(_Marionette$Behavior){var subClass,superClass;function AutolinkClickable(){return _Marionette$Behavior.apply(this,arguments)||this}superClass=_Marionette$Behavior,(subClass=AutolinkClickable).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=AutolinkClickable.prototype;return _proto.events=function(){return{"click .js-autolink":"onAutolinkClick"}},_proto.onAutolinkClick=function(event){var anchor=event.target;if(anchor&&anchor.href){var attachment,videoId,uri=new urijs__WEBPACK_IMPORTED_MODULE_0___default.a(anchor.href);if(["youtube.com","youtu.be","vimeo.com"].indexOf(uri.domain())>=0){var type;switch(uri.host()){case"youtu.be":videoId=uri.segment()[0],type="youtube";break;case"youtube.com":case"www.youtube.com":videoId=uri.query(!0).v,type="youtube";break;case"player.vimeo.com":videoId=uri.segment()[1],type="vimeo";break;case"vimeo.com":videoId=uri.segment()[0],type="vimeo"}null!=videoId&&(attachment=new _models_attachment__WEBPACK_IMPORTED_MODULE_1__.a({type:type,url:anchor.href,video_id:videoId}))}else IMAGE_EXTENSIONS.indexOf(uri.suffix())>=0&&(attachment=new _models_attachment__WEBPACK_IMPORTED_MODULE_1__.a({type:"image",url:anchor.href})),"pdf"===uri.suffix()&&(attachment=new _models_attachment__WEBPACK_IMPORTED_MODULE_1__.a({type:"pdf",url:anchor.href}));attachment&&(event.preventDefault(),_actions_timeline__WEBPACK_IMPORTED_MODULE_2__.a.showAttachment({attachment:attachment,title:this.view.model.getContent()}))}},AutolinkClickable}(Marionette.Behavior)}).call(this,__webpack_require__("6BNn"))},ksFZ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var constants_attachment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("IseC");__webpack_exports__.default=function(extension){return constants_attachment__WEBPACK_IMPORTED_MODULE_0__.e[extension]||constants_attachment__WEBPACK_IMPORTED_MODULE_0__.d}},l3Sp:function(module,exports){var NO_PATH=[];"function"==typeof Object.freeze&&Object.freeze(NO_PATH),module.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(a,b){return a.fScore-b.fScore},NO_PATH:NO_PATH,setHeapIndex:function(nodeSearchState,heapIndex){nodeSearchState.heapIndex=heapIndex},setH1:function(node,heapIndex){node.h1=heapIndex},setH2:function(node,heapIndex){node.h2=heapIndex},compareF1Score:function(a,b){return a.f1-b.f1},compareF2Score:function(a,b){return a.f2-b.f2}}},lM0x:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<a href="javascript:;"class="js-close close no-color"><span class="fa fa-close fa-2x fa-fw"></span></a><div class="text-center"><span class="icon bf-idea"></span><p>'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"message")||(null!=depth0?lookupProperty(depth0,"message"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"message",hash:{},data:data,loc:{start:{line:1,column:165},end:{line:1,column:176}}}):helper)+'</p><a href="javascript:;"class="button js-close">Close</a><div></div></div>'},useData:!0})},lYBc:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return DEFAULTS})),__webpack_require__.d(__webpack_exports__,"b",(function(){return BLANK_DATA})),__webpack_require__.d(__webpack_exports__,"a",(function(){return ACCEPT_CONTENT_TYPE_REGEX}));var DEFAULTS={url:""},BLANK_DATA="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU2LjM2LjEwMAAAAAAAAAAAAAAA/+PgwAAAAAAAAAAAAEluZm8AAAAPAAAABAAACpsAiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJsbGxsbGxsbGxsbGxsbGxsbGxsbGxsbGxsdjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2Nj/////////////////////////////////AAAAAExhdmYAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAqbBxKpmAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/+OAxAAAAANIAAAAAExBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+OCxAAAAANIAAAAAExBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/jgsQAAAADSAAAAABMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVX/44LEAAAAA0gAAAAATEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",ACCEPT_CONTENT_TYPE_REGEX=/(\.|\/)(mp3)$/i},mCzO:function(module,__webpack_exports__,__webpack_require__){"use strict";var constants_yml__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("Nogj"),constants_yml__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(constants_yml__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.a=constants_yml__WEBPACK_IMPORTED_MODULE_0___default.a},mZf2:function(module,exports){(exports=module.exports=function(str){return str.trim?str.trim():exports.right(exports.left(str))}).left=function(str){return str.trimLeft?str.trimLeft():str.replace(/^\s\s*/,"")},exports.right=function(str){if(str.trimRight)return str.trimRight();for(var whitespace_pattern=/\s/,i=str.length;whitespace_pattern.test(str.charAt(--i)););return str.slice(0,i+1)}},mkgK:function(module,exports,__webpack_require__){"use strict";var isPrototype=__webpack_require__("rstW");module.exports=function(value){if("function"!=typeof value)return!1;if(!hasOwnProperty.call(value,"length"))return!1;try{if("number"!=typeof value.length)return!1;if("function"!=typeof value.call)return!1;if("function"!=typeof value.apply)return!1}catch(error){return!1}return!isPrototype(value)}},mp0L:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var numberIsNaN=Number.isNaN;return"function"==typeof numberIsNaN&&(!numberIsNaN({})&&numberIsNaN(NaN)&&!numberIsNaN(34))}},mqLf:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("ebir")()?Array.from:__webpack_require__("NAUm")},n1Yi:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="typing js-typing"><div class="dots"><span></span><span></span><span></span></div></div><div class="placeholder js-placeholder"><div class="bubble scene js-bubble"></div></div><div class="entry-wrapper js-entry-wrapper"></div>'},useData:!0})},nh5T:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("sgFB"),keys=Object.keys;module.exports=function(object){return keys(isValue(object)?Object(object):object)}},nj8K:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"f",(function(){return SENSITIVE_ATTRIBUTES})),__webpack_require__.d(__webpack_exports__,"e",(function(){return FREETEXT_DEFAULT_CONTENT})),__webpack_require__.d(__webpack_exports__,"d",(function(){return FREETEXT_CONTENT_LIMIT})),__webpack_require__.d(__webpack_exports__,"a",(function(){return COLOR_BLUE})),__webpack_require__.d(__webpack_exports__,"b",(function(){return COLOR_GREEN})),__webpack_require__.d(__webpack_exports__,"c",(function(){return DEFAULTS}));var SENSITIVE_ATTRIBUTES=["index","deleted","content","from_node_index","to_node_index","position","voice_id"],FREETEXT_DEFAULT_CONTENT="Submit and continue",FREETEXT_CONTENT_LIMIT=500,COLOR_BLUE="#008aff",COLOR_GREEN="#8dc63f",DEFAULTS={index:0,position:1,content:"",deleted:!1}},"oM/r":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("li+S"),__webpack_require__("W1wS"),__webpack_require__("fAGv");__webpack_exports__.default=function(seconds,leadingZeroHour){void 0===leadingZeroHour&&(leadingZeroHour=!1);var h=Math.floor(seconds/3600),m=Math.floor(seconds%3600/60),s=Math.floor(seconds%60);return[h>9&&leadingZeroHour?h:"0"+h,m>9?m:"0"+m,s>9?s:"0"+s].filter((function(n){return n})).join(":")}},oOCt:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone,_){__webpack_require__("olot");var loglevel__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_1__),lib_loader__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("B9Pn"),pdfobject__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ytaN"),pdfobject__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(pdfobject__WEBPACK_IMPORTED_MODULE_3__),constants_message__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("NX2P"),constants_voice__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lYBc"),partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("25es"),_editor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("MiS+"),_channels_player__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("9fCi"),_stores_player__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("x3EI"),_models_message__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("PwMq");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var PDF_SUPPORT=null;__webpack_exports__.a={init:function(){partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__.a.postMessage("player:init",{project:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.eventJSON()})},start:function(){var media=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.hasMedia();media?(media.voice&&_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.set("voice_button",!0),this.initMedia(media)):this.startTimeline()},finish:function(payload){_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.addScene(payload.current),_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.finish(),partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__.a.postMessage("player:finish",{project:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.eventJSON(),playlog:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.eventJSON(),results:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.eventJSON()}),setTimeout(this.createFinishEdges.bind(this),2e3)},reset:function(){_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.reset([]),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("reset")},startTimeline:function(payload){void 0===payload&&(payload={}),partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__.a.postMessage("player:start",{project:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.eventJSON()});var node=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.start(payload.node);node&&this.changeCurrent({node:node})},reverse:function(){var scene=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.back();if(!scene)return!1;_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:unload"),this.changeCurrent({node:scene.node})},goto:function(payload){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:unload"),this.changeCurrent(payload)},changeCurrent:function(payload){var node;payload.scene?(node=payload.scene.node,this.changeCurrentScene(payload)):(node=payload.node,payload.node.get("feedback")?this.changeCurrentFeedback(payload):this.changeCurrentScene(payload)),_editor__WEBPACK_IMPORTED_MODULE_7__.a.changeCurrentNode({node:node})},changeCurrentScene:function(payload){var scene=payload.scene||_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.createScene(payload.node);_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:scene",scene),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("scroll:fix"),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:character:change"),_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.playlog&&_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.playlog.createEntry(scene),_extends(payload,{scene:scene})},changeCurrentMessage:function(attributes,options){var message=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.createMessage(attributes,options);_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:message",message),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("scroll:fix"),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:scene:load")},changeCurrentFeedback:function(payload){var scene=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.createScene(payload.node),attributes={kind:"feedback",content:payload.node.get("feedback"),icon:constants_message__WEBPACK_IMPORTED_MODULE_4__.a,edges:[{index:1,kind:"feedback",translation:"continue",content:payload.node.project.translations("continue"),callback:this.afterFeedbackContinue}]},message=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.createFeedback(attributes,{node:payload.node,scene:scene});_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:message",message),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("scroll:fix"),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:scene:load")},loadMoreTimelineEntries:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("timeline:entries:load_more")},afterTimelineEntriesVisibilityChange:function(hiddenEntryCount){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("timeline:entries:visibility_change",{show:hiddenEntryCount>0})},afterCharacterChange:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:scene:typing")},edgeIsChosen:function(payload){if(_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("scroll:top:hide"),payload.edge&&"finish"===payload.edge.get("kind")||_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:unload"),payload.current instanceof _models_message__WEBPACK_IMPORTED_MODULE_11__.a){var callback=payload.edge.get("callback");callback?callback.call(this,payload):loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.error("no callback on message: "+payload.current.get("content"))}else{var scene=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.addScene(payload.current),choice=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.addEdge(payload.edge,payload.attributes);partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__.a.postMessage("player:choice",{project:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.eventJSON(),choice:choice.eventJSON()}),scene.trigger("timeline:show"),choice.trigger("timeline:show")}},afterFeedbackContinue:function(payload){_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.add(payload.current).trigger("timeline:show")},afterCurrentSceneShow:function(payload){var _this=this;_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("scroll:top:check"),payload.current instanceof _models_message__WEBPACK_IMPORTED_MODULE_11__.a?_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges:load"):(partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__.a.postMessage("player:scene",{project:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.eventJSON(),playlog:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.eventJSON(),results:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.eventJSON(),scene:payload.current.eventJSON()}),_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.get("voice_autoplay")&&payload.current.getVoiceURL()?(_extends(payload,{timeout:0}),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("voice:play",{model:payload.current,callback:function(){_this.afterCurrentSceneVoice(payload)}})):this.afterCurrentSceneVoice(payload))},afterCurrentSceneVoice:function(payload){payload.current.node.edges().size()>0?(clearTimeout(this.currentEdgesLoadTimer),this.currentEdgesLoadTimer=setTimeout((function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges:load")}),payload.timeout)):this.finish(payload)},afterCurrentEdgesLoad:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges:show")},afterCurrentEdgesShow:function(){_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.startWaiting()},afterCurrentSceneTyping:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:scene:load")},afterCurrentSceneLoad:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:scene:show")},afterChoiceShow:function(payload){var _this2=this;payload.choice.getVoiceURL()?_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("voice:play",{model:payload.choice,callback:function(){_this2.afterChoiceVoice(payload)}}):this.afterChoiceVoice(payload)},afterChoiceVoice:function(payload){var _this3=this,node=payload.choice.edge.toNode;node&&setTimeout((function(){_this3.changeCurrent({node:node})}),500)},afterFeedbackShown:function(payload){this.changeCurrentScene({scene:payload.model.scene})},showScoreDetails:function(payload){_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.get("multiple_scoring")&&null!=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.score()&&_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("score_details:show",payload)},showMenu:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("menu:show")},initMedia:function(payload){if(payload.voice){delete payload.voice;var background=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.getBackground();background&&_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("background:change",background),this.createVoiceMessage(payload)}else this.startTimeline()},createVoiceMessage:function(payload){var attributes={payload:payload,kind:"init_voice",translation:"init_voice_content",content:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.translations("init_voice_content"),icon:constants_message__WEBPACK_IMPORTED_MODULE_4__.b,edges:[{translation:"init_voice_yes",content:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.translations("init_voice_yes"),voice:!0,callback:this.initVoice},{translation:"init_voice_no",content:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.translations("init_voice_no"),voice:!1,callback:this.muteVoice}]};this.changeCurrentMessage(attributes)},initVoice:function(payload){var _this4=this,model=new Backbone.Model({url:constants_voice__WEBPACK_IMPORTED_MODULE_5__.b});model.getVoiceURL=function(){return this.get("url")},_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("voice:play",{model:model,callback:function(){_this4.afterInitVoice(payload.current.get("payload"))}})},muteVoice:function(payload){_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.set("voice_autoplay",!1),this.afterInitVoice(payload.current.get("payload"))},afterInitVoice:function(payload){var _this5=this;_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.set("voice_button",!0),setTimeout((function(){_this5.startTimeline(payload)}),300)},toggleVoiceAutoplay:function(){_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.set("voice_autoplay",!_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.get("voice_autoplay"))},showShorcuts:function(){_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("shortcuts:show")},toggleDebugFace:function(){_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.set("debug_face",!_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.get("debug_face"))},createFinishEdges:function(){var _this6=this,attributes={edges:[]};if(_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.get("disable_replay_button")||attributes.edges.push({kind:"finish",restart:!0,translation:"finish_replay_link",content:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.translations("finish_replay_link"),url:window.location.href,callback:this.onFinishLink}),_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.editor||_(["edit","projects","classroom"]).each((function(name){lib_loader__WEBPACK_IMPORTED_MODULE_2__.a.url[name]&&attributes.edges.push({kind:"finish",translation:"finish_"+name+"_link",content:_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.project.translations("finish_"+name+"_link"),url:lib_loader__WEBPACK_IMPORTED_MODULE_2__.a.url[name],callback:_this6.onFinishLink})})),attributes.edges.length>0){var message=_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.timeline.createMessage(attributes);_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges",message),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("scroll:fix"),_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("current:edges:load")}},onFinishLink:function(payload){_stores_player__WEBPACK_IMPORTED_MODULE_9__.a.editor&&payload.edge.get("restart")?(this.reset(),this.start()):window.location.href=payload.edge.get("url")},toggleAnimation:function(){_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.set("duration",_stores_settings__WEBPACK_IMPORTED_MODULE_10__.b.get("duration")>0?0:_stores_settings__WEBPACK_IMPORTED_MODULE_10__.a)},playlogServerFinish:function(){partials_dispatcher__WEBPACK_IMPORTED_MODULE_6__.a.postMessage("player:finish:success")},showAttachment:function(payload){!payload.attachment.isPDF()||(null===PDF_SUPPORT&&(PDF_SUPPORT=pdfobject__WEBPACK_IMPORTED_MODULE_3___default.a.supportsPDFs),PDF_SUPPORT)?payload.attachment.isAudio()?payload.scene.trigger("attachment:audio"):_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("attachment:show",payload):window.open(payload.attachment.get("url"))},playlogError:function(payload){switch(payload.error){case"lesson_locked":case"connection":_channels_player__WEBPACK_IMPORTED_MODULE_8__.a.trigger("notification:show",new Backbone.Model({type:payload.error}));break;default:payload.message&&loglevel__WEBPACK_IMPORTED_MODULE_1___default.a.info("[Player] "+payload.message)}}}}).call(this,__webpack_require__("clIx"),__webpack_require__("5VhH").default)},oULx:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var map,result;if("function"!=typeof Map)return!1;try{map=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(map)&&(3===map.size&&("function"==typeof map.clear&&("function"==typeof map.delete&&("function"==typeof map.entries&&("function"==typeof map.forEach&&("function"==typeof map.get&&("function"==typeof map.has&&("function"==typeof map.keys&&("function"==typeof map.set&&("function"==typeof map.values&&(!1===(result=map.entries().next()).done&&(!!result.value&&("raz"===result.value[0]&&"one"===result.value[1])))))))))))))}},odEd:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ImageViewer",{enumerable:!0,get:function(){return _ImageViewer.default}}),Object.defineProperty(exports,"FullScreenViewer",{enumerable:!0,get:function(){return _FullScreen.default}}),exports.default=void 0;var _ImageViewer=_interopRequireDefault(__webpack_require__("bE6X")),_FullScreen=_interopRequireDefault(__webpack_require__("Mqk3"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _default=_ImageViewer.default;exports.default=_default},"oj+x":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return PERSISTED_ATTRIBUTES})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULTS}));var _rails__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("mCzO"),PERSISTED_ATTRIBUTES=["version","player_name","started_at","finished_at","progress_pct","referrer_url"],DEFAULTS={version:_rails__WEBPACK_IMPORTED_MODULE_0__.a.PLAYLOG_VERSION,score:null,scores:null,started_at:null,finished_at:null,progress_pct:null}},pocN:function(module,exports,__webpack_require__){"use strict";module.exports=function(){var obj,assign=Object.assign;return"function"==typeof assign&&(assign(obj={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}},"q/aM":function(module,exports,__webpack_require__){"use strict";module.exports=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn}},qdkk:function(module,exports,__webpack_require__){"use strict";var aFrom=__webpack_require__("mqLf"),assign=__webpack_require__("1G0L"),value=__webpack_require__("EmFb");module.exports=function(obj){var copy=Object(value(obj)),propertyNames=arguments[1],options=Object(arguments[2]);if(copy!==obj&&!propertyNames)return copy;var result={};return propertyNames?aFrom(propertyNames,(function(propertyName){(options.ensure||propertyName in obj)&&(result[propertyName]=obj[propertyName])})):assign(result,obj),result}},qpBm:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"b",(function(){return Edges})),__webpack_require__.d(__webpack_exports__,"a",(function(){return SortedEdges}));__webpack_require__("olot");var _models_edge__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fXDG");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _inheritsLoose(subClass,superClass){subClass.prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Edges=function(_Backbone$Collection){function Edges(){return _Backbone$Collection.apply(this,arguments)||this}_inheritsLoose(Edges,_Backbone$Collection);var _proto=Edges.prototype;return _proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project},_proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_edge__WEBPACK_IMPORTED_MODULE_1__.a(attributes,options)},_proto.parse=function(response){return response.edges},_proto.create=function(attributes,options){return void 0===options&&(options={}),null==attributes.index&&_extends(attributes,{index:this.project.nextEdgeIndex()}),_extends(options,{project:this.project}),this.add(attributes,options)},Edges}(Backbone.Collection),SortedEdges=function(_Backbone$Collection2){function SortedEdges(){return _Backbone$Collection2.apply(this,arguments)||this}return _inheritsLoose(SortedEdges,_Backbone$Collection2),SortedEdges.prototype.model=function(attributes,options){return void 0===options&&(options={}),new _models_edge__WEBPACK_IMPORTED_MODULE_1__.a(attributes,options)},SortedEdges}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},qtWV:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Character}));var constants_character__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("LGAl"),constants_node__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("RIFn");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Character=function(_Backbone$Model){var subClass,superClass;function Character(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Character).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Character.prototype;return _proto.defaults=function(){return constants_character__WEBPACK_IMPORTED_MODULE_0__.a},_proto.initialize=function(){this.views={},this.uploader=!1},_proto.defaultFace=function(){return{x:0,y:0,width:constants_character__WEBPACK_IMPORTED_MODULE_0__.b,height:constants_character__WEBPACK_IMPORTED_MODULE_0__.b,normal_x:-constants_character__WEBPACK_IMPORTED_MODULE_0__.b/2}},_proto.imageURL=function(options){void 0===options&&(options={});var style=options.style||"small",emotion=this.emotion(options.emotion);if(emotion)return emotion[style+"_url"]},_proto.emotion=function(name){var emotions=this.get("emotions"),exist=name;if(emotions)return this.get("emotional")&&emotions[name]||(exist=constants_node__WEBPACK_IMPORTED_MODULE_1__.b.emotion),emotions[exist]},_proto.getFace=function(name,fallback){void 0===fallback&&(fallback=!0);var emotion=this.emotion(name);return emotion&&emotion.face?emotion.face:fallback?this.defaultFace():null},_proto.parse=function(response){return null!=response.character?response.character:response},Character}(Backbone.Model)}).call(this,__webpack_require__("clIx"))},r33L:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(root,factory){"use strict";module.exports?module.exports=factory():void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(0,(function(root){"use strict";var _SecondLevelDomains=root&&root.SecondLevelDomains,SLD={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||sldOffset>=tldOffset-1)return!1;var sldList=SLD.list[domain.slice(tldOffset+1)];return!!sldList&&sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")>=0},is:function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return!1;if(domain.lastIndexOf(".",tldOffset-1)>=0)return!1;var sldList=SLD.list[domain.slice(tldOffset+1)];return!!sldList&&sldList.indexOf(" "+domain.slice(0,tldOffset)+" ")>=0},get:function(domain){var tldOffset=domain.lastIndexOf(".");if(tldOffset<=0||tldOffset>=domain.length-1)return null;var sldOffset=domain.lastIndexOf(".",tldOffset-1);if(sldOffset<=0||sldOffset>=tldOffset-1)return null;var sldList=SLD.list[domain.slice(tldOffset+1)];return sldList?sldList.indexOf(" "+domain.slice(sldOffset+1,tldOffset)+" ")<0?null:domain.slice(sldOffset+1):null},noConflict:function(){return root.SecondLevelDomains===this&&(root.SecondLevelDomains=_SecondLevelDomains),this}};return SLD}))},rFoI:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({1:function(container,depth0,helpers,partials,data){var stack1,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="js-score">'+(null!=(stack1=container.invokePartial(__webpack_require__("7o3E"),null!=depth0?lookupProperty(depth0,"score"):depth0,{name:"../feedbacks/score",data:data,helpers:helpers,partials:partials,decorators:container.decorators}))?stack1:"")+"</div>"},compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var stack1,helper,alias1=null!=depth0?depth0:container.nullContext||{},alias2=container.hooks.helperMissing,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="bubble scene js-bubble"tabindex="0"notranslate><div class="content js-content"dir="auto">'+(null!=(stack1="function"==typeof(helper=null!=(helper=lookupProperty(helpers,"content")||(null!=depth0?lookupProperty(depth0,"content"):depth0))?helper:alias2)?helper.call(alias1,{name:"content",hash:{},data:data,loc:{start:{line:1,column:101},end:{line:1,column:114}}}):helper)?stack1:"")+"</div>"+(null!=(stack1=lookupProperty(helpers,"if").call(alias1,null!=depth0?lookupProperty(depth0,"score"):depth0,{name:"if",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data,loc:{start:{line:1,column:120},end:{line:1,column:198}}}))?stack1:"")+'</div><footer class="timeline left"><div class="avatar message-icon js-avatar theme-highlight-bg-color"><span class="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"icon")||(null!=depth0?lookupProperty(depth0,"icon"):depth0))?helper:alias2)?helper.call(alias1,{name:"icon",hash:{},data:data,loc:{start:{line:1,column:315},end:{line:1,column:323}}}):helper)+'"></span></div></footer>'},usePartial:!0,useData:!0})},rR11:function(module,exports,__webpack_require__){"use strict";var d=__webpack_require__("R5f6"),validateSymbol=__webpack_require__("4Z7C"),registry=Object.create(null);module.exports=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{for:d((function(key){return registry[key]?registry[key]:registry[key]=SymbolPolyfill(String(key))})),keyFor:d((function(symbol){var key;for(key in validateSymbol(symbol),registry)if(registry[key]===symbol)return key}))})}},rstW:function(module,exports,__webpack_require__){"use strict";var isObject=__webpack_require__("tDQ5");module.exports=function(value){if(!isObject(value))return!1;try{return!!value.constructor&&value.constructor.prototype===value}catch(error){return!1}}},"s1/G":function(module,exports,__webpack_require__){module.exports=function(_,Backbone){"use strict";_="default"in _?_.default:_,Backbone="default"in Backbone?Backbone.default:Backbone;var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},previousRadio=Backbone.Radio,Radio=Backbone.Radio={};Radio.VERSION="2.0.0",Radio.noConflict=function(){return Backbone.Radio=previousRadio,this},Radio.DEBUG=!1,Radio._debugText=function(warning,eventName,channelName){return warning+(channelName?" on the "+channelName+" channel":"")+': "'+eventName+'"'},Radio.debugLog=function(warning,eventName,channelName){Radio.DEBUG&&console&&console.warn&&console.warn(Radio._debugText(warning,eventName,channelName))};var eventSplitter=/\s+/;function removeHandler(store,name,callback,context){var event=store[name];if(!(callback&&callback!==event.callback&&callback!==event.callback._callback||context&&context!==event.context))return delete store[name],!0}function removeHandlers(store,name,callback,context){store||(store={});for(var names=name?[name]:_.keys(store),matched=!1,i=0,length=names.length;i<length;i++)store[name=names[i]]&&removeHandler(store,name,callback,context)&&(matched=!0);return matched}Radio._eventsApi=function(obj,action,name,rest){if(!name)return!1;var results={};if("object"===(void 0===name?"undefined":_typeof(name))){for(var key in name){var result=obj[action].apply(obj,[key,name[key]].concat(rest));eventSplitter.test(key)?_.extend(results,result):results[key]=result}return results}if(eventSplitter.test(name)){for(var names=name.split(eventSplitter),i=0,l=names.length;i<l;i++)results[names[i]]=obj[action].apply(obj,[names[i]].concat(rest));return results}return!1},Radio._callHandler=function(callback,context,args){var a1=args[0],a2=args[1],a3=args[2];switch(args.length){case 0:return callback.call(context);case 1:return callback.call(context,a1);case 2:return callback.call(context,a1,a2);case 3:return callback.call(context,a1,a2,a3);default:return callback.apply(context,args)}};var channel,args,_logs={};function _partial(channelName){return _logs[channelName]||(_logs[channelName]=_.bind(Radio.log,Radio,channelName))}function makeCallback(callback){return _.isFunction(callback)?callback:function(){return callback}}_.extend(Radio,{log:function(channelName,eventName){if("undefined"!=typeof console){var args=_.toArray(arguments).slice(2);console.log("["+channelName+'] "'+eventName+'"',args)}},tuneIn:function(channelName){var channel=Radio.channel(channelName);return channel._tunedIn=!0,channel.on("all",_partial(channelName)),this},tuneOut:function(channelName){var channel=Radio.channel(channelName);return channel._tunedIn=!1,channel.off("all",_partial(channelName)),delete _logs[channelName],this}}),Radio.Requests={request:function(name){var args=_.toArray(arguments).slice(1),results=Radio._eventsApi(this,"request",name,args);if(results)return results;var channelName=this.channelName,requests=this._requests;if(channelName&&this._tunedIn&&Radio.log.apply(this,[channelName,name].concat(args)),requests&&(requests[name]||requests.default)){var handler=requests[name]||requests.default;return args=requests[name]?args:arguments,Radio._callHandler(handler.callback,handler.context,args)}Radio.debugLog("An unhandled request was fired",name,channelName)},reply:function(name,callback,context){return Radio._eventsApi(this,"reply",name,[callback,context])||(this._requests||(this._requests={}),this._requests[name]&&Radio.debugLog("A request was overwritten",name,this.channelName),this._requests[name]={callback:makeCallback(callback),context:context||this}),this},replyOnce:function(name,callback,context){if(Radio._eventsApi(this,"replyOnce",name,[callback,context]))return this;var self=this,once=_.once((function(){return self.stopReplying(name),makeCallback(callback).apply(this,arguments)}));return this.reply(name,once,context)},stopReplying:function(name,callback,context){return Radio._eventsApi(this,"stopReplying",name)||(name||callback||context?removeHandlers(this._requests,name,callback,context)||Radio.debugLog("Attempted to remove the unregistered request",name,this.channelName):delete this._requests),this}},Radio._channels={},Radio.channel=function(channelName){if(!channelName)throw new Error("You must provide a name for the channel.");return Radio._channels[channelName]?Radio._channels[channelName]:Radio._channels[channelName]=new Radio.Channel(channelName)},Radio.Channel=function(channelName){this.channelName=channelName},_.extend(Radio.Channel.prototype,Backbone.Events,Radio.Requests,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}});var systems=[Backbone.Events,Radio.Requests];return _.each(systems,(function(system){_.each(system,(function(method,methodName){Radio[methodName]=function(channelName){return args=_.toArray(arguments).slice(1),(channel=this.channel(channelName))[methodName].apply(channel,args)}}))})),Radio.reset=function(channelName){var channels=channelName?[this._channels[channelName]]:this._channels;_.each(channels,(function(channel){channel.reset()}))},Radio}(__webpack_require__("5VhH"),__webpack_require__("clIx"))},sgFB:function(module,exports,__webpack_require__){"use strict";var _undefined=__webpack_require__("H+6F")();module.exports=function(val){return val!==_undefined&&null!==val}},sqH0:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return CurrentView}));var loglevel__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__),lib_tracer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("ZypF"),_models_scene__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6nYy"),_models_message__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("PwMq"),_models_feedback__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("+rAh"),_scene_view__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("zXod"),_message_view__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("eZ3C"),_feedback_view__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("v4oE"),_stores_settings__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("x3EI"),_channels_player__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("9fCi"),_actions_timeline__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("oOCt"),_templates_current__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("n1Yi"),_templates_current__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_templates_current__WEBPACK_IMPORTED_MODULE_11__);function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var CurrentView=function(_Marionette$View){var subClass,superClass;function CurrentView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=CurrentView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=CurrentView.prototype;return _proto.initialize=function(){this.autofocus=_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.get("autofocus"),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"reset",this.onReset),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"current:scene current:message",this.onModelChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"current:unload",this.onUnload),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"current:scene:typing",this.onTyping),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"current:scene:show",this.onShow),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"current:scene:load",this.onLoad),this.autofocus&&this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_9__.a,"current:edges:show",this.onEdgesShow),_channels_player__WEBPACK_IMPORTED_MODULE_9__.a.reply("current:scene:offset",this.onOffsetRequest.bind(this)),_channels_player__WEBPACK_IMPORTED_MODULE_9__.a.reply("current:entry:view",this.onEntryViewRequest.bind(this))},_proto.className=function(){return"current-scene"},_proto.ui=function(){return{entry:".js-entry-wrapper",typing:".js-typing",placeholder:".js-placeholder",bubble:".js-placeholder > .js-bubble"}},_proto.getTemplate=function(){return _templates_current__WEBPACK_IMPORTED_MODULE_11___default.a},_proto.regions=function(){return{entry:"@ui.entry"}},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.onReset()},_proto.onModelChange=function(model){this.model=model},_proto.onReset=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.ui.typing.css({display:"none"}),this.ui.entry.css({visibility:"hidden",position:"absolute"}),this.ui.placeholder.css({position:"",visibility:"hidden"})},_proto.getEntryView=function(){switch(this.model.constructor){case _models_scene__WEBPACK_IMPORTED_MODULE_2__.a:return _scene_view__WEBPACK_IMPORTED_MODULE_5__.a;case _models_feedback__WEBPACK_IMPORTED_MODULE_4__.a:return _feedback_view__WEBPACK_IMPORTED_MODULE_7__.a;case _models_message__WEBPACK_IMPORTED_MODULE_3__.a:return _message_view__WEBPACK_IMPORTED_MODULE_6__.a;default:loglevel__WEBPACK_IMPORTED_MODULE_0___default.a.error("Unknown Model in CurrentView")}},_proto.onLoad=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.ui.entry.css({visibility:"hidden",position:"absolute"});var childView=new(this.getEntryView())({model:this.model,no_character:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.screen("md")});this.showChildView("entry",childView),this.ui.typing.css({display:"none"}),this.ui.placeholder.css({visibility:this.model.constructor===_models_scene__WEBPACK_IMPORTED_MODULE_2__.a?"visible":"hidden"}),this.ui.bubble.velocity({height:childView.getBubbleHeight(),width:childView.getWidth(),borderRadius:childView.getBubbleBorderRadius()},{easing:"linear",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration,complete:function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_10__.a.afterCurrentSceneLoad()}})},_proto.onUnload=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.ui.entry.css({visibility:"hidden",position:"absolute"}),this.ui.placeholder.css({position:""}),this.ui.bubble.velocity({height:this.ui.typing.height()},{easing:"linear",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration})},_proto.onOffsetRequest=function(){return this.ui.placeholder.offset()},_proto.onShow=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.ui.placeholder.css({visibility:"hidden",position:"absolute"});var css={position:""};this.model.constructor===_models_scene__WEBPACK_IMPORTED_MODULE_2__.a?(css.visibility="",this.ui.entry.css(css)):this.ui.entry.css(css).velocity({opacity:[1,0]},{visibility:""}),_actions_timeline__WEBPACK_IMPORTED_MODULE_10__.a.afterCurrentSceneShow({current:this.model,timeout:this.thinkTime})},_proto.onTyping=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_1__.a)(this),this.ui.typing.velocity("stop",!0).velocity({opacity:1},{display:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_8__.b.duration}),this.ui.bubble.css({height:this.ui.typing.height(),width:this.ui.typing.outerWidth(),borderRadius:this.ui.typing.css("border-radius")}),this.thinkTime=Math.min(Math.max(5*this.model.getContent().length,500),3e3),clearTimeout(this.thinkingTimer),this.thinkingTimer=setTimeout((function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_10__.a.afterCurrentSceneTyping()}),this.thinkTime)},_proto.onEdgesShow=function(){this.getChildView("entry").focus()},_proto.onEntryViewRequest=function(){return this.getRegion("entry").detachView()},CurrentView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))},"t/bv":function(module,__webpack_exports__,__webpack_require__){"use strict";(function(_){__webpack_require__("Ubn2"),__webpack_require__("fAGv"),__webpack_require__("Cwug"),__webpack_require__("nPQI");var loglevel__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("OPuQ"),loglevel__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_4__),keyboardjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("KUB/"),keyboardjs__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(keyboardjs__WEBPACK_IMPORTED_MODULE_5__),scopes=[],globals=[],context=false;keyboardjs__WEBPACK_IMPORTED_MODULE_5___default.a.setContext(false),__webpack_exports__.a={on:function(obj){var _this=this,options=obj.keyboard(),scope={obj:obj,keys:_.result(options,"keys",null),context:_.result(options,"context",false),global:_.result(options,"global",!1),callback:obj.onShortcut,apply:function(event){return _this.apply(scope,event)}};if(null===scope.keys)return loglevel__WEBPACK_IMPORTED_MODULE_4___default.a.error("Keyboard: please specify keys to listen to"),!1;scope.global?globals.push(scope):scope.context?scopes.push(scope):scopes.unshift(scope),scope.context&&(context=scope.context),keyboardjs__WEBPACK_IMPORTED_MODULE_5___default.a.on(scope.keys,scope.apply)},off:function(obj){if(0===scopes.length||0===globals.length)return!0;var scope,i;for(i=0;i<scopes.length;i++)obj===(scope=scopes[i]).obj&&(scopes.splice(i,1),keyboardjs__WEBPACK_IMPORTED_MODULE_5___default.a.off(scope.keys,scope.apply));(context=false,scopes.length>0)&&(scope=scopes[scopes.length-1],context=scope.context)},apply:function(scope,event){if(["textarea","input","select"].indexOf(event.target.tagName.toLowerCase())>=0)return!1;(scope.global||scope.context===context)&&scope.callback.call(scope.obj,event)},getContext:function(){return context}}}).call(this,__webpack_require__("5VhH").default)},t5dq:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return OPTIONS}));__webpack_require__("6rNj");var OPTIONS={classPrefix:"mejs-",fakeNodeName:"div",type:"audio/mpeg",enablePluginDebug:!1,enableKeyboard:!1,startVolume:1,autoRewind:!1,renderers:["html5","native_hls","native_dash"]};__webpack_exports__.b=window.MediaElementPlayer},tDQ5:function(module,exports,__webpack_require__){"use strict";var isValue=__webpack_require__("Fc97"),possibleTypes={object:!0,function:!0,undefined:!0};module.exports=function(value){return!!isValue(value)&&hasOwnProperty.call(possibleTypes,typeof value)}},teAV:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Scores}));var _models_playlog_entry__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("faqT");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Scores=function(_Backbone$Collection){var subClass,superClass;function Scores(){return _Backbone$Collection.apply(this,arguments)||this}return superClass=_Backbone$Collection,(subClass=Scores).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass),Scores.prototype.model=function(attributes,options){return void 0===options&&(options={}),new _models_playlog_entry__WEBPACK_IMPORTED_MODULE_0__.a(attributes,options)},Scores}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},uWKT:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){return'<div class="player-xs-11 player-md-7 player-lg-4 player-lg-offset-4 player-fhd-5 player-fhd-offset-3"><div class="js-resize"></div></div>'},useData:!0})},uew1:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("ZDcT")()?Object.setPrototypeOf:__webpack_require__("B8jV")},unFh:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={}},v4oE:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return FeedbackView}));__webpack_require__("qoQZ"),__webpack_require__("V4Jz"),__webpack_require__("olot");var lib_autolink__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Z/ZA"),lib_interpolation__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("g86V"),_stores_player__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("unFh"),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOCt"),_behaviors_autolink_clickable__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("kPJp"),_message_view__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("eZ3C");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var AUTOLINK_OPTIONS={target:"_blank",rel:"nofollow",class:"theme-highlight-font-color js-autolink"},FeedbackView=function(_MessageView){var subClass,superClass;function FeedbackView(){return _MessageView.apply(this,arguments)||this}superClass=_MessageView,(subClass=FeedbackView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=FeedbackView.prototype;return _proto.className=function(){return"timeline-scene timeline-feedback"},_proto.ui=function(){var ui=_MessageView.prototype.ui.call(this);return ui.score=".js-score",ui},_proto.events=function(){var events={};return _stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.get("multiple_scoring")&&(events["click @ui.score"]="showScoreLayer"),events},_proto.behaviors=function(){return[_behaviors_autolink_clickable__WEBPACK_IMPORTED_MODULE_7__.a]},_proto.templateContext=function(){var context=_MessageView.prototype.templateContext.call(this),score=this.model.scene.score();return null!=score&&this.model.node.get("show_score_with_feedback")&&_extends(context,{score:{translation:"current_score",title:_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.translations("current_score"),points:score,clickable:_stores_player__WEBPACK_IMPORTED_MODULE_5__.a.project.get("multiple_scoring")}}),context},_proto.showScoreLayer=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.showScoreDetails({scene:this.model.scene})},_proto.getContent=function(){var content=this.model.getContent();return content="<p>"+(content=Object(lib_interpolation__WEBPACK_IMPORTED_MODULE_4__.a)(content).replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"</p><p>"))+"</p>",Object(lib_autolink__WEBPACK_IMPORTED_MODULE_3__.a)(content,AUTOLINK_OPTIONS)},FeedbackView}(_message_view__WEBPACK_IMPORTED_MODULE_8__.a)},v53q:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__("C9yj");for(var lib_keyboard__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("t/bv"),_stores_player__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("unFh"),layer={},methods=Object.keys(lib_keyboard__WEBPACK_IMPORTED_MODULE_1__.a),_loop=function(i){layer[methods[i]]=function(){return _stores_player__WEBPACK_IMPORTED_MODULE_2__.a.editor?null:lib_keyboard__WEBPACK_IMPORTED_MODULE_1__.a[methods[i]].apply(lib_keyboard__WEBPACK_IMPORTED_MODULE_1__.a,arguments)}},i=0;i<methods.length;i++)_loop(i);__webpack_exports__.a=layer},v5u5:function(module,exports,__webpack_require__){"use strict";var keys=__webpack_require__("Jalf"),value=__webpack_require__("EmFb"),max=Math.max;module.exports=function(dest,src){var error,i,assign,length=max(arguments.length,2);for(dest=Object(value(dest)),assign=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;i<length;++i)keys(src=arguments[i]).forEach(assign);if(void 0!==error)throw error;return dest}},vjfU:function(module,exports,__webpack_require__){"use strict";__webpack_require__("oULx")()||Object.defineProperty(__webpack_require__("KzmK"),"Map",{value:__webpack_require__("E1Dx"),configurable:!0,enumerable:!1,writable:!0})},vy9o:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var filesize__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("dwMK"),filesize__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(filesize__WEBPACK_IMPORTED_MODULE_0__);__webpack_exports__.default=function(size){return null==size?"Unknown":filesize__WEBPACK_IMPORTED_MODULE_0___default()(size)}},w5ZZ:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a=__webpack_require__.p+"c28aa7a881cca5cc50f6e190b9c22691.svg"},wAjX:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="text-center"><span class="icon bf-lock"></span><p>This scenario has been LOCKED by your class facilitator.<br>Please click below to exit the scenario.</p><a href="'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"classroom_url")||(null!=depth0?lookupProperty(depth0,"classroom_url"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"classroom_url",hash:{},data:data,loc:{start:{line:1,column:175},end:{line:1,column:192}}}):helper)+'"class="button js-close">Return to Class</a><div></div></div>'},useData:!0})},wK8y:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return Scores}));__webpack_require__("exX3"),__webpack_require__("sccJ"),__webpack_require__("olot");var constants_score__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("/gkB"),_models_score__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Xi0R");function _extends(){return _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var Scores=function(_Backbone$Collection){var subClass,superClass;function Scores(){return _Backbone$Collection.apply(this,arguments)||this}superClass=_Backbone$Collection,(subClass=Scores).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=Scores.prototype;return _proto.model=function(attributes,options){return void 0===options&&(options={}),new _models_score__WEBPACK_IMPORTED_MODULE_4__.a(attributes,options)},_proto.initialize=function(models,options){void 0===options&&(options={}),this.project=options.project},_proto.uids=function(){return this.map((function(score){return score.get("uid")}))},_proto.generateUID=function(name){for(var chars=name.substring(0,2).toLowerCase(),counter=1;null!=this.project.scores.findWhere({uid:""+chars+counter});)counter++;return""+chars+counter},_proto.create=function(attributes,options){if(void 0===options&&(options={}),_extends(options,{project:this.project}),_extends(attributes,{uid:this.generateUID(attributes.name)}),!attributes.color){var last=this.last(),index=last?constants_score__WEBPACK_IMPORTED_MODULE_3__.a.indexOf(last.get("color"))+1:0;_extends(attributes,{color:constants_score__WEBPACK_IMPORTED_MODULE_3__.a[index%(constants_score__WEBPACK_IMPORTED_MODULE_3__.a.length-1)]})}return this.add(attributes,options)},_proto.delete=function(model){model.set("deleted",!0),this.project.nodes.each((function(node){return node.deleteScoreFor(model.get("uid"))})),this.remove(model)},Scores}(Backbone.Collection)}).call(this,__webpack_require__("clIx"))},wQ3O:function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__("gZsQ")()?String.prototype.contains:__webpack_require__("x3sF")},wbQR:function(module,exports,__webpack_require__){"use strict";var toInteger=__webpack_require__("IzKM"),max=Math.max;module.exports=function(value){return max(0,toInteger(value))}},wmlB:function(module,exports,__webpack_require__){"use strict";var isArguments=__webpack_require__("5VZH"),isValue=__webpack_require__("sgFB"),isString=__webpack_require__("5ECE"),iteratorSymbol=__webpack_require__("gW10").iterator,isArray=Array.isArray;module.exports=function(value){return!!isValue(value)&&(!!isArray(value)||(!!isString(value)||(!!isArguments(value)||"function"==typeof value[iteratorSymbol])))}},x3EI:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Backbone){__webpack_require__.d(__webpack_exports__,"a",(function(){return DURATION}));var lib_loader__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("B9Pn");function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var DURATION=350,Settings=function(_Backbone$Model){var subClass,superClass;function Settings(){return _Backbone$Model.apply(this,arguments)||this}superClass=_Backbone$Model,(subClass=Settings).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var Constructor,protoProps,staticProps,_proto=Settings.prototype;return _proto.defaults=function(){return{duration:DURATION,voice_button:!1,voice_autoplay:!0}},_proto.screen=function(_screen){return this.get("screens").indexOf(_screen)>=0},Constructor=Settings,(protoProps=[{key:"duration",get:function(){return this.get("duration")}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Settings}(Backbone.Model),settings=new Settings(lib_loader__WEBPACK_IMPORTED_MODULE_0__.a.settings);__webpack_exports__.b=settings}).call(this,__webpack_require__("clIx"))},x3sF:function(module,exports,__webpack_require__){"use strict";var indexOf=String.prototype.indexOf;module.exports=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1}},xggf:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return App}));__webpack_require__("WIcX"),__webpack_require__("9wHH"),__webpack_require__("qoQZ"),__webpack_require__("/xhF");var image_promise__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("6lUm"),lib_project_assets_extractor__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("Rzmm"),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("oOCt"),_actions_editor__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("MiS+"),_stores_player__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("unFh"),_stores_settings__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("x3EI"),_models_user__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("1x26"),_models_project__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("Pnc7"),_models_playlog__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("Ftsh"),_collections_timeline__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("Zwr1"),_views_player_view__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("VZh8");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var App=function(_Marionette$Applicati){var subClass,superClass;function App(){return _Marionette$Applicati.apply(this,arguments)||this}superClass=_Marionette$Applicati,(subClass=App).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=App.prototype;return _proto.initialize=function(options){this.options=options,_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.app=this,_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.editor=options.editor,_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.set({autostart:_.result(options,"autostart",!0),autofocus:_.result(options,"autofocus",this.detectAutofocus())}),options.project&&(_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project=options.project instanceof _models_project__WEBPACK_IMPORTED_MODULE_11__.a?options.project:new _models_project__WEBPACK_IMPORTED_MODULE_11__.a(options.project)),_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.get("autostart")&&this.start()},_proto.onStart=function(){_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project?this.preloadAssets():$.ajax({method:"get",url:this.options.url.project,dataType:"json",success:this.onLoadSuccess.bind(this),error:this.onLoadError.bind(this)})},_proto.onLoadSuccess=function(response){_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project=new _models_project__WEBPACK_IMPORTED_MODULE_11__.a(response.project),this.preloadAssets()},_proto.onLoadError=function(){this.showError("Error loading simulation<br>Click here to reload the simulation")},_proto.showError=function(text){text&&$(".js-reload-text").html(text),$(".js-player-preloader").hide(),$(".js-player-reload").show()},_proto.preloadAssets=function(){var _this=this,assets=Object(lib_project_assets_extractor__WEBPACK_IMPORTED_MODULE_5__.a)(_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project);Object(image_promise__WEBPACK_IMPORTED_MODULE_4__.a)(Array.from(assets.initial)).then((function(_assets){_this.setup(),setTimeout((function(){Object(image_promise__WEBPACK_IMPORTED_MODULE_4__.a)(Array.from(assets.rest))}),1500)})).catch((function(error){_this.showError("Error loading simulation assets<br>Try to reload the simulation"),Bugsnag&&Bugsnag.notify(error)}))},_proto.setup=function(){_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.user=this.options.user instanceof _models_user__WEBPACK_IMPORTED_MODULE_10__.a?this.options.user:new _models_user__WEBPACK_IMPORTED_MODULE_10__.a(this.options.user),_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.timeline=new _collections_timeline__WEBPACK_IMPORTED_MODULE_13__.a([],{project:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project}),_stores_settings__WEBPACK_IMPORTED_MODULE_9__.b.set({duration:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.get("disable_player_animation")?0:_stores_settings__WEBPACK_IMPORTED_MODULE_9__.a}),this.options.playlog&&(_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.playlog=new _models_playlog__WEBPACK_IMPORTED_MODULE_12__.a(this.options.playlog,{project:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project,timeline:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.timeline,defaults:this.options.playlog}),this.listenTo(_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.playlog,"server:finish",this.onPlaylogFinish)),this.element=this.options.embed_el||document.getElementById(_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.get("embed_id")),this.rootView=new _views_player_view__WEBPACK_IMPORTED_MODULE_14__.a({el:this.element}).render(),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.init(),_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.editor&&_actions_editor__WEBPACK_IMPORTED_MODULE_7__.a.init(),_actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.start()},_proto.onPlaylogFinish=function(){_actions_timeline__WEBPACK_IMPORTED_MODULE_6__.a.playlogServerFinish()},_proto.detectAutofocus=function(){return!(window.location.search.search(/disable-focus/)>=0)&&window.self===window.top},App}(Marionette.Application)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},yHCd:function(module,exports,__webpack_require__){"use strict";var numberIsNaN=__webpack_require__("3mYS"),toPosInt=__webpack_require__("wbQR"),value=__webpack_require__("EmFb"),indexOf=Array.prototype.indexOf,objHasOwnProperty=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor;module.exports=function(searchElement){var i,length,fromIndex,val;if(!numberIsNaN(searchElement))return indexOf.apply(this,arguments);for(length=toPosInt(value(this).length),fromIndex=arguments[1],i=fromIndex=isNaN(fromIndex)?0:fromIndex>=0?floor(fromIndex):toPosInt(this.length)-floor(abs(fromIndex));i<length;++i)if(objHasOwnProperty.call(this,i)&&(val=this[i],numberIsNaN(val)))return i;return-1}},yb66:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette,_){__webpack_require__.d(__webpack_exports__,"a",(function(){return BackgroundView}));var lib_tracer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("ZypF"),_channels_player__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("9fCi"),_stores_settings__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("x3EI");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var BackgroundView=function(_Marionette$View){var subClass,superClass;function BackgroundView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=BackgroundView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=BackgroundView.prototype;return _proto.initialize=function(){this.opacity=1,this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_1__.a,"current:scene",this.onSceneChange),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_1__.a,"background:change",this.renderBackground),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_1__.a,"scrollable:scroll",this.onScroll)},_proto.className=function(){return"player-background"},_proto.getTemplate=function(){return _.noop},_proto.onRender=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this)},_proto.onSceneChange=function(scene){this.scene=scene,this.renderBackground(this.scene.getBackground())},_proto.renderBackground=function(background){var _this=this;Object(lib_tracer__WEBPACK_IMPORTED_MODULE_0__.a)(this);var backgroundURL=background?background.imageURL({style:"fhd"}):null;if(backgroundURL!==this.backgroundURL){this.backgroundURL=backgroundURL;var $children=this.$el.children().not(".js-hidden");if(backgroundURL){var color=background.get("average_color"),$image=$('<div class="bg-image">').css({opacity:0}).appendTo(this.$el),$color=$('<div class="bg-color">'),image=new Image;this.$el.css("background-image","none"),color&&$color.css({opacity:0,backgroundImage:"linear-gradient(to bottom, "+color+" 35%, rgba(255,255,255,0))"}).appendTo(this.$el),image.onload=function(){var options={duration:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration};color&&($color.velocity({opacity:1},options),options.delay=Math.ceil(_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration/2)),$image.css({"background-image":'url("'+image.src+'")'}).velocity({opacity:1},options),_this.removeElements($children)},image.src=backgroundURL}else this.$el.css("background-image",""),this.removeElements($children)}},_proto.removeElements=function($elements){$elements.addClass(".js-hidden").velocity({opacity:0},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration,delay:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration,complete:function(){return $(this).remove()}})},_proto.onScroll=function(payload){var opacity=.8*(1-Math.min(payload.relative,1))+.2;this.opacity!==opacity&&(payload.animate?this.$el.velocity({opacity:[opacity,this.opacity]},{duration:_stores_settings__WEBPACK_IMPORTED_MODULE_2__.b.duration}):this.el.style.opacity=opacity,this.opacity=opacity)},BackgroundView}(Marionette.View)}).call(this,__webpack_require__("6BNn"),__webpack_require__("5VhH").default)},ye8D:function(module,exports){function NodeSearchState(node){this.node=node,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}module.exports=function(){var currentInCache=0,nodeCache=[];return{createNewState:function(node){var cached=nodeCache[currentInCache];cached?(cached.node=node,cached.parent=null,cached.closed=!1,cached.open=0,cached.distanceToSource=Number.POSITIVE_INFINITY,cached.fScore=Number.POSITIVE_INFINITY,cached.heapIndex=-1):(cached=new NodeSearchState(node),nodeCache[currentInCache]=cached);return currentInCache++,cached},reset:function(){currentInCache=0}}}},ytaN:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=function(){"use strict";if("undefined"==typeof window||void 0===window.navigator||void 0===window.navigator.userAgent||void 0===window.navigator.mimeTypes)return!1;let pdfobjectversion="2.2.7",nav=window.navigator,ua=window.navigator.userAgent,isIE="ActiveXObject"in window,isModernBrowser=void 0!==window.Promise,supportsPdfMimeType=void 0!==nav.mimeTypes["application/pdf"],isMobileDevice=void 0!==nav.platform&&"MacIntel"===nav.platform&&void 0!==nav.maxTouchPoints&&nav.maxTouchPoints>1||/Mobi|Tablet|Android|iPad|iPhone/.test(ua),isSafariDesktop=!isMobileDevice&&void 0!==nav.vendor&&/Apple/.test(nav.vendor)&&/Safari/.test(ua),isFirefoxWithPDFJS=!!(!isMobileDevice&&/irefox/.test(ua)&&ua.split("rv:").length>1)&&parseInt(ua.split("rv:")[1].split(".")[0],10)>18,createAXO=function(type){var ax;try{ax=new ActiveXObject(type)}catch(e){ax=null}return ax},supportsPdfActiveX=function(){return!(!createAXO("AcroPDF.PDF")&&!createAXO("PDF.PdfCtrl"))},supportsPDFs=!isMobileDevice&&(isModernBrowser||isFirefoxWithPDFJS||supportsPdfMimeType||isIE&&supportsPdfActiveX()),buildURLFragmentString=function(pdfParams){let prop,string="";if(pdfParams){for(prop in pdfParams)pdfParams.hasOwnProperty(prop)&&(string+=encodeURIComponent(prop)+"="+encodeURIComponent(pdfParams[prop])+"&");string&&(string="#"+string,string=string.slice(0,string.length-1))}return string},embedError=function(msg,suppressConsole){return suppressConsole||console.log("[PDFObject] "+msg),!1},emptyNodeContents=function(node){for(;node.firstChild;)node.removeChild(node.firstChild)},getTargetElement=function(targetSelector){let targetNode=document.body;return"string"==typeof targetSelector?targetNode=document.querySelector(targetSelector):void 0!==window.jQuery&&targetSelector instanceof jQuery&&targetSelector.length?targetNode=targetSelector.get(0):void 0!==targetSelector.nodeType&&1===targetSelector.nodeType&&(targetNode=targetSelector),targetNode},generatePDFJSMarkup=function(targetNode,url,pdfOpenFragment,PDFJS_URL,id,title,omitInlineStyles){emptyNodeContents(targetNode);let fullURL=PDFJS_URL+"?file="+encodeURIComponent(url)+pdfOpenFragment,div=document.createElement("div"),iframe=document.createElement("iframe");return iframe.src=fullURL,iframe.className="pdfobject",iframe.type="application/pdf",iframe.frameborder="0",iframe.allow="fullscreen",iframe.title=title,id&&(iframe.id=id),omitInlineStyles||(div.style.cssText="position: absolute; top: 0; right: 0; bottom: 0; left: 0;",iframe.style.cssText="border: none; width: 100%; height: 100%;",targetNode.style.position="relative",targetNode.style.overflow="auto"),div.appendChild(iframe),targetNode.appendChild(div),targetNode.classList.add("pdfobject-container"),targetNode.getElementsByTagName("iframe")[0]},generatePDFObjectMarkup=function(embedType,targetNode,targetSelector,url,pdfOpenFragment,width,height,id,title,omitInlineStyles){emptyNodeContents(targetNode);let embed=document.createElement(embedType);if(embed.src=url+pdfOpenFragment,embed.className="pdfobject",embed.type="application/pdf",embed.title=title,id&&(embed.id=id),"iframe"===embedType&&(embed.allow="fullscreen"),!omitInlineStyles){let style="embed"===embedType?"overflow: auto;":"border: none;";targetSelector&&targetSelector!==document.body?style+="width: "+width+"; height: "+height+";":style+="position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: 100%; height: 100%;",embed.style.cssText=style}return targetNode.classList.add("pdfobject-container"),targetNode.appendChild(embed),targetNode.getElementsByTagName(embedType)[0]},embed=function(url,targetSelector,options){let selector=targetSelector||!1,opt=options||{},id="string"==typeof opt.id?opt.id:"",page=opt.page||!1,pdfOpenParams=opt.pdfOpenParams||{},fallbackLink=opt.fallbackLink||!0,width=opt.width||"100%",height=opt.height||"100%",title=opt.title||"Embedded PDF",assumptionMode="boolean"!=typeof opt.assumptionMode||opt.assumptionMode,forcePDFJS="boolean"==typeof opt.forcePDFJS&&opt.forcePDFJS,supportRedirect="boolean"==typeof opt.supportRedirect&&opt.supportRedirect,omitInlineStyles="boolean"==typeof opt.omitInlineStyles&&opt.omitInlineStyles,suppressConsole="boolean"==typeof opt.suppressConsole&&opt.suppressConsole,forceIframe="boolean"==typeof opt.forceIframe&&opt.forceIframe,PDFJS_URL=opt.PDFJS_URL||!1,targetNode=getTargetElement(selector),fallbackHTML="",pdfOpenFragment="",fallbackHTML_default="<p>This browser does not support inline PDFs. Please download the PDF to view it: <a href='[url]'>Download PDF</a></p>";return"string"!=typeof url?embedError("URL is not valid",suppressConsole):targetNode?(page&&(pdfOpenParams.page=page),pdfOpenFragment=buildURLFragmentString(pdfOpenParams),forcePDFJS&&PDFJS_URL?generatePDFJSMarkup(targetNode,url,pdfOpenFragment,PDFJS_URL,id,title,omitInlineStyles):supportsPDFs||assumptionMode&&!isMobileDevice?generatePDFObjectMarkup(forceIframe||supportRedirect||isSafariDesktop?"iframe":"embed",targetNode,targetSelector,url,pdfOpenFragment,width,height,id,title,omitInlineStyles):PDFJS_URL?generatePDFJSMarkup(targetNode,url,pdfOpenFragment,PDFJS_URL,id,title,omitInlineStyles):(fallbackLink&&(fallbackHTML="string"==typeof fallbackLink?fallbackLink:fallbackHTML_default,targetNode.innerHTML=fallbackHTML.replace(/\[url\]/g,url)),embedError("This browser does not support embedded PDFs",suppressConsole))):embedError("Target element cannot be determined",suppressConsole)};return{embed:function(a,b,c){return embed(a,b,c)},pdfobjectversion:pdfobjectversion,supportsPDFs:supportsPDFs}})?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},zNQj:function(module,exports,__webpack_require__){var Handlebars=__webpack_require__("8DWv");module.exports=(Handlebars.default||Handlebars).template({compiler:[8,">= 4.3.0"],main:function(container,depth0,helpers,partials,data){var helper,lookupProperty=container.lookupProperty||function(parent,propertyName){if(Object.prototype.hasOwnProperty.call(parent,propertyName))return parent[propertyName]};return'<div class="scroll-button top player-container"><a href="javascript:;"class="js-scroll-top"><span class="fa fa-chevron-up"></span></a></div><div class="scroll-button bottom player-container"><a href="javascript:;"class="js-scroll-bottom"><span class="fa fa-chevron-down"></span></a></div><div class="scrollbar js-scrollbar"><div class="scroll-track scroll-bg js-scroll-bg"></div><div class="scroll-track"><div class="scroll-thumb js-scroll-thumb"></div></div></div><div class="js-scrollable scroll-container"><div class="scroll-load-more js-load-more"><a href="javascript:;"class="control"data-translation="load_more">'+container.escapeExpression("function"==typeof(helper=null!=(helper=lookupProperty(helpers,"load_more_text")||(null!=depth0?lookupProperty(depth0,"load_more_text"):depth0))?helper:container.hooks.helperMissing)?helper.call(null!=depth0?depth0:container.nullContext||{},{name:"load_more_text",hash:{},data:data,loc:{start:{line:1,column:618},end:{line:1,column:636}}}):helper)+'</a></div><div class="js-timeline"></div><div class="player-current js-current"><div class="player-container"><div class="player-row"><div class="player-xs-11 player-md-7 player-lg-4 player-lg-offset-4 player-fhd-5 player-fhd-offset-3 current-column"><div class="js-current-scene"></div><div class="current-bubbles js-bubbles"><span class="oval-1"></span><span class="oval-2"></span><span class="oval-3"></span></div><div class="player-xs-hidden player-md-block player-lg-hidden js-character-placeholder"></div></div><div class="player-xs-12 player-md-5 player-lg-4 current-column"><div class="player-row"><div class="player-xs-11 player-xs-offset-1 player-md-12 player-md-offset-0 js-current-choice"></div></div><div class="js-userzone"></div></div></div></div></div><div class="js-character"></div><div class="js-emotion-meter"aria-hidden="true"></div></div>'},useData:!0})},zXod:function(module,__webpack_exports__,__webpack_require__){"use strict";(function(Marionette){__webpack_require__.d(__webpack_exports__,"a",(function(){return SceneView}));__webpack_require__("qoQZ"),__webpack_require__("V4Jz");var lib_tracer__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ZypF"),lib_character_face_style__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("GitV"),lib_autolink__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("Z/ZA"),lib_interpolation__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("g86V"),plyr__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("B7eJ"),plyr_dist_plyr_svg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("w5ZZ"),_stores_player__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("unFh"),_actions_timeline__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("oOCt"),_channels_player__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("9fCi"),_stores_settings__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("x3EI"),_templates_scenes_show__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("GQgX"),_templates_scenes_show__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_templates_scenes_show__WEBPACK_IMPORTED_MODULE_12__),_templates_scenes_audio__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("O0Fy"),_templates_scenes_audio__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_templates_scenes_audio__WEBPACK_IMPORTED_MODULE_13__),_behaviors_autolink_clickable__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("kPJp");function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}var AUTOLINK_OPTIONS={target:"_blank",rel:"nofollow",class:"theme-highlight-font-color js-autolink"},SceneView=function(_Marionette$View){var subClass,superClass;function SceneView(){return _Marionette$View.apply(this,arguments)||this}superClass=_Marionette$View,(subClass=SceneView).prototype=Object.create(superClass.prototype),subClass.prototype.constructor=subClass,_setPrototypeOf(subClass,superClass);var _proto=SceneView.prototype;return _proto.className=function(){return"timeline-scene"},_proto.ui=function(){return{content:".js-content",bubble:".js-bubble",character:".js-character",avatar:".js-avatar",voice:".js-voice",attachment:".js-attachment",player:".js-player"}},_proto.events=function(){return{"click @ui.voice":"onVoiceClick","click @ui.attachment":"onAttachmentClick"}},_proto.modelEvents=function(){return{"voice:playing":"onVoicePlaying","voice:paused voice:ended":"onVoiceStop","attachment:audio":"onAttachmentAudio"}},_proto.behaviors=function(){return[_behaviors_autolink_clickable__WEBPACK_IMPORTED_MODULE_14__.a]},_proto.getTemplate=function(){return _templates_scenes_show__WEBPACK_IMPORTED_MODULE_12___default.a},_proto.templateContext=function(){var context={content:this.getContent(),voice:this.getVoiceURL(),emotion:this.model.node.getEmotion(),avatar_url:this.getCharacterURL(),show_emotion_meter:!_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.get("disable_emotion_meter")&&this.model.getCharacter(),index_name:this.model.node.getIndexName(),translations:_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.translations(),wcag_character_text:(this.model.node.get("wcag_character_text")||"").replace(/\.$/,"")};return context.emotion_name=_stores_player__WEBPACK_IMPORTED_MODULE_8__.a.project.translations()[context.emotion],this.attachment=this.model.getAttachment(),null!=this.attachment&&(context.attachment=this.attachment.templateContext()),context},_proto.onRender=function(){this.model.getCharacter()&&(this.setCharacterStyle(),this.getOption("no_character")&&this.hideCharacter())},_proto.focus=function(){this.ui.bubble.focus()},_proto.removeTabIndex=function(){this.ui.bubble.removeAttr("tabindex")},_proto.hideCharacter=function(){this.ui.character.css({width:0,display:"none",visibility:"hidden"})},_proto.showCharacter=function(){this.getOption("no_character")&&(this.ui.character.css({display:""}),this.ui.character.velocity({width:this.ui.character.height()},{easing:"linear",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_11__.b.duration,complete:this.fadeInCharacter.bind(this)}))},_proto.fadeInCharacter=function(){this.ui.character.css({width:""}),this.ui.character.velocity({opacity:[1,0]},{visibility:"",duration:_stores_settings__WEBPACK_IMPORTED_MODULE_11__.b.duration/2})},_proto.setCharacterStyle=function(){var _this=this,character=this.model.getCharacter();character&&Object(lib_character_face_style__WEBPACK_IMPORTED_MODULE_3__.a)({character:character,emotion:this.model.getEmotion(),callback:function(style){_this.ui.avatar.css(style)}})},_proto.getHeight=function(){return this.$el.outerHeight()},_proto.getWidth=function(){return this.$el.width()},_proto.getBubbleHeight=function(){return this.ui.bubble.outerHeight()},_proto.getBubbleBorderRadius=function(){return this.ui.bubble.css("border-radius")},_proto.getContent=function(){var content=this.model.getContent();return content="<p>"+(content=Object(lib_interpolation__WEBPACK_IMPORTED_MODULE_5__.a)(content).replace(/\n{2,}/g,"</p><p>").replace(/\n/g,"</p><p>"))+"</p>",Object(lib_autolink__WEBPACK_IMPORTED_MODULE_4__.a)(content,AUTOLINK_OPTIONS)},_proto.getCharacterURL=function(){var character=this.model.getCharacter(),emotion=this.model.getEmotion();return character?character.imageURL({emotion:emotion,style:"player"}):null},_proto.getVoiceURL=function(){return this.model.getVoiceURL()},_proto.onVoicePlaying=function(){this.voicing=!0,this.ui.voice.addClass("active")},_proto.onVoiceStop=function(){this.voicing=!1,this.ui.voice.removeClass("active")},_proto.onVoiceClick=function(){Object(lib_tracer__WEBPACK_IMPORTED_MODULE_2__.a)(this),this.voicing?_channels_player__WEBPACK_IMPORTED_MODULE_10__.a.trigger("voice:stop"):_channels_player__WEBPACK_IMPORTED_MODULE_10__.a.trigger("voice:play",{model:this.model,force:!0})},_proto.onAttachmentClick=function(event){event&&event.preventDefault(),_actions_timeline__WEBPACK_IMPORTED_MODULE_9__.a.showAttachment({attachment:this.attachment,scene:this.model,title:this.model.getContent()}),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_10__.a,"attachment:audio:playing",this.onAttachmentAudioPlaying),this.listenTo(_channels_player__WEBPACK_IMPORTED_MODULE_10__.a,"attachment:show",this.onAttachmentShow)},_proto.onAttachmentAudio=function(){if(!this.player){var html=_templates_scenes_audio__WEBPACK_IMPORTED_MODULE_13___default()(this.attachment.templateContext());this.ui.attachment.prepend(html),this.ui.attachment.removeAttr("href"),this.bindUIElements(),this.player=new plyr__WEBPACK_IMPORTED_MODULE_6__.a(this.ui.player.get(0),{iconUrl:plyr_dist_plyr_svg__WEBPACK_IMPORTED_MODULE_7__.a,autoplay:!0,settings:[]}),this.player.on("playing",this.onAudioPlaying.bind(this))}},_proto.onAudioPlaying=function(){_channels_player__WEBPACK_IMPORTED_MODULE_10__.a.trigger("attachment:audio:playing",this.model)},_proto.onAttachmentAudioPlaying=function(model){this.model!==model&&this.stopAttachmentAudio()},_proto.onAttachmentShow=function(){this.stopAttachmentAudio()},_proto.stopAttachmentAudio=function(){this.player&&this.player.pause()},SceneView}(Marionette.View)}).call(this,__webpack_require__("6BNn"))}}]);